<!DOCTYPE html>
<!-- saved from url=(0037)http://habrahabr.ru/post/243471/#Day3 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta content="width=1024" name="viewport">


    <title>[LibGDX] Создаем клон Flappy Bird — Zombie Bird / Хабрахабр</title>

    <meta name="yandex-verification" content="67d46b975fa41645"> <!-- яндекс вебмастер - верификация -->

    <meta name="description" content=" Доброго времени суток %username%. Не давно наткнулся на хороший туториал по созданию клона игры Flappy Bird используя LibGDX и этот туториал мне понравился своей простотой и детализацией.

Я...">
    <meta name="keywords" content="libgdx, game development, java, eclipse, flappy bird, перевод">

    	<meta property="fb:app_id" content="444736788986613"> 
<meta property="og:type" content="article"> 
<meta property="og:url" content="http://habrahabr.ru/post/243471/"> 
<meta property="og:title" content="[LibGDX] Создаем клон Flappy Bird — Zombie Bird"> 
	<meta property="og:image" content="http://habrastorage.org/files/0d8/a7f/6e4/0d8a7f6e45cf481bac6c2a057877916b.png">
	<link rel="image_src" href="./tutorial_files/0d8a7f6e45cf481bac6c2a057877916b.png"><meta property="og:image" content="https://habrastorage.org/files/4e5/585/2eb/4e55852eb2a04db2a1200c031304129c.png">
	<link rel="image_src" href="https://habrastorage.org/files/4e5/585/2eb/4e55852eb2a04db2a1200c031304129c.png"><meta property="og:image" content="https://habrastorage.org/files/4a2/925/ca6/4a2925ca64c148baa7b3c9c82a5d3f0f.png">
	<link rel="image_src" href="https://habrastorage.org/files/4a2/925/ca6/4a2925ca64c148baa7b3c9c82a5d3f0f.png"><meta property="og:image" content="https://habrastorage.org/files/b7e/b2d/d2c/b7eb2dd2c22541238e4db1cca28466fd.png">
	<link rel="image_src" href="https://habrastorage.org/files/b7e/b2d/d2c/b7eb2dd2c22541238e4db1cca28466fd.png"><meta property="og:image" content="https://habrastorage.org/files/48b/66b/e68/48b66be68b514538ba154763703d019f.png">
	<link rel="image_src" href="https://habrastorage.org/files/48b/66b/e68/48b66be68b514538ba154763703d019f.png"><meta property="og:image" content="https://habrastorage.org/files/52c/4f4/345/52c4f43458da4ca0832db733bca91fbe.png">
	<link rel="image_src" href="https://habrastorage.org/files/52c/4f4/345/52c4f43458da4ca0832db733bca91fbe.png"><meta property="og:image" content="https://habrastorage.org/files/4f3/554/91b/4f355491bc81468cbcb05427325b49ca.png">
	<link rel="image_src" href="https://habrastorage.org/files/4f3/554/91b/4f355491bc81468cbcb05427325b49ca.png"><meta property="og:image" content="https://habrastorage.org/files/4e5/585/2eb/4e55852eb2a04db2a1200c031304129c.png">
	<link rel="image_src" href="https://habrastorage.org/files/4e5/585/2eb/4e55852eb2a04db2a1200c031304129c.png"><meta property="og:image" content="http://habrastorage.org/files/0d8/a7f/6e4/0d8a7f6e45cf481bac6c2a057877916b.png">
	<link rel="image_src" href="./tutorial_files/0d8a7f6e45cf481bac6c2a057877916b.png"><meta property="og:image" content="https://habrastorage.org/files/17b/1ba/1a6/17b1ba1a61e64f4abc88ef8da7942f00.png">
	<link rel="image_src" href="https://habrastorage.org/files/17b/1ba/1a6/17b1ba1a61e64f4abc88ef8da7942f00.png"><meta property="og:image" content="https://habrastorage.org/files/77f/ca9/f97/77fca9f9709943f5b923a805df52e9de.png">
	<link rel="image_src" href="https://habrastorage.org/files/77f/ca9/f97/77fca9f9709943f5b923a805df52e9de.png"><meta property="og:image" content="https://habrastorage.org/files/f87/4e7/44c/f874e744c875497c9d85dde657ff6759.png">
	<link rel="image_src" href="https://habrastorage.org/files/f87/4e7/44c/f874e744c875497c9d85dde657ff6759.png"><meta property="og:image" content="https://habrastorage.org/files/0b7/dde/848/0b7dde848fad4629846c63a07721d204.png">
	<link rel="image_src" href="https://habrastorage.org/files/0b7/dde/848/0b7dde848fad4629846c63a07721d204.png"><meta property="og:image" content="https://habrastorage.org/files/d7d/fd7/5f8/d7dfd75f8cac4e4bbd8ce06060a0765c.png">
	<link rel="image_src" href="https://habrastorage.org/files/d7d/fd7/5f8/d7dfd75f8cac4e4bbd8ce06060a0765c.png"><meta property="og:image" content="https://habrastorage.org/files/ef8/5c2/d4c/ef85c2d4ceb6481e812df85e5af20e41.png">
	<link rel="image_src" href="https://habrastorage.org/files/ef8/5c2/d4c/ef85c2d4ceb6481e812df85e5af20e41.png"><meta property="og:image" content="https://habrastorage.org/files/d86/a84/775/d86a847758e644e2a16d2fd69470d17e.png">
	<link rel="image_src" href="https://habrastorage.org/files/d86/a84/775/d86a847758e644e2a16d2fd69470d17e.png"><meta property="og:image" content="https://habrastorage.org/files/1dc/71b/900/1dc71b9006564a699e18fe0fd456400c.png">
	<link rel="image_src" href="https://habrastorage.org/files/1dc/71b/900/1dc71b9006564a699e18fe0fd456400c.png"><meta property="og:image" content="https://habrastorage.org/files/8da/b60/6b1/8dab606b108d473c87cca0e7a317cc2d.png">
	<link rel="image_src" href="https://habrastorage.org/files/8da/b60/6b1/8dab606b108d473c87cca0e7a317cc2d.png"><meta property="og:image" content="https://habrastorage.org/files/8c5/ee7/840/8c5ee78404274c83a9bca51047f2908b.png">
	<link rel="image_src" href="https://habrastorage.org/files/8c5/ee7/840/8c5ee78404274c83a9bca51047f2908b.png"><meta property="og:image" content="https://habrastorage.org/files/2bb/b69/08b/2bbb6908b55b44e1876f82cd57699dc9.png">
	<link rel="image_src" href="https://habrastorage.org/files/2bb/b69/08b/2bbb6908b55b44e1876f82cd57699dc9.png"><meta property="og:image" content="https://habrastorage.org/files/4f3/554/91b/4f355491bc81468cbcb05427325b49ca.png">
	<link rel="image_src" href="https://habrastorage.org/files/4f3/554/91b/4f355491bc81468cbcb05427325b49ca.png"><meta property="og:image" content="https://habrastorage.org/files/4e5/585/2eb/4e55852eb2a04db2a1200c031304129c.png">
	<link rel="image_src" href="https://habrastorage.org/files/4e5/585/2eb/4e55852eb2a04db2a1200c031304129c.png"><meta property="og:image" content="https://habrastorage.org/files/66c/58b/ce8/66c58bce828f4f33904ade5fb7b914c0.png">
	<link rel="image_src" href="https://habrastorage.org/files/66c/58b/ce8/66c58bce828f4f33904ade5fb7b914c0.png"><meta property="og:image" content="https://habrastorage.org/files/77a/cc9/6db/77acc96dbdd9447387baebedf2268ab0.png">
	<link rel="image_src" href="https://habrastorage.org/files/77a/cc9/6db/77acc96dbdd9447387baebedf2268ab0.png"><meta property="og:image" content="https://habrastorage.org/files/58b/76c/4a7/58b76c4a75a64d76af6f9eff870ae1fc.png">
	<link rel="image_src" href="https://habrastorage.org/files/58b/76c/4a7/58b76c4a75a64d76af6f9eff870ae1fc.png"><meta property="og:image" content="https://habrastorage.org/files/9e4/2f8/401/9e42f8401a8d4e608625810171c21f71.png">
	<link rel="image_src" href="https://habrastorage.org/files/9e4/2f8/401/9e42f8401a8d4e608625810171c21f71.png"><meta property="og:image" content="https://habrastorage.org/files/e27/3ed/1a4/e273ed1a4ed342abb148c53ad824d8f3.png">
	<link rel="image_src" href="https://habrastorage.org/files/e27/3ed/1a4/e273ed1a4ed342abb148c53ad824d8f3.png"><meta property="og:image" content="https://habrastorage.org/files/4f3/554/91b/4f355491bc81468cbcb05427325b49ca.png">
	<link rel="image_src" href="https://habrastorage.org/files/4f3/554/91b/4f355491bc81468cbcb05427325b49ca.png"><meta property="og:image" content="https://habrastorage.org/files/4e5/585/2eb/4e55852eb2a04db2a1200c031304129c.png">
	<link rel="image_src" href="https://habrastorage.org/files/4e5/585/2eb/4e55852eb2a04db2a1200c031304129c.png"><meta property="og:image" content="https://habrastorage.org/files/f28/0fe/99a/f280fe99ad1845568a91de83b8ddb23a.png">
	<link rel="image_src" href="https://habrastorage.org/files/f28/0fe/99a/f280fe99ad1845568a91de83b8ddb23a.png"><meta property="og:image" content="https://habrastorage.org/files/e4b/7f5/818/e4b7f5818c1748e1a2cbf8eb0924c35e.png">
	<link rel="image_src" href="https://habrastorage.org/files/e4b/7f5/818/e4b7f5818c1748e1a2cbf8eb0924c35e.png"><meta property="og:image" content="https://habrastorage.org/files/0fa/0f7/67c/0fa0f767c2b94d0dbd15bfb821c96adc.png">
	<link rel="image_src" href="https://habrastorage.org/files/0fa/0f7/67c/0fa0f767c2b94d0dbd15bfb821c96adc.png"><meta property="og:image" content="https://habrastorage.org/files/679/12e/24b/67912e24bcb444919d45fc5829a3e9fe.png">
	<link rel="image_src" href="https://habrastorage.org/files/679/12e/24b/67912e24bcb444919d45fc5829a3e9fe.png"><meta property="og:image" content="https://habrastorage.org/files/e99/1ea/995/e991ea9951e14eccaf60b27cb3e421dd.jpg">
	<link rel="image_src" href="https://habrastorage.org/files/e99/1ea/995/e991ea9951e14eccaf60b27cb3e421dd.jpg"><meta property="og:image" content="https://habrastorage.org/files/d3f/3a6/7f2/d3f3a67f2bf8432688095504f50a2386.png">
	<link rel="image_src" href="https://habrastorage.org/files/d3f/3a6/7f2/d3f3a67f2bf8432688095504f50a2386.png"><meta property="og:image" content="https://habrastorage.org/files/a9f/ea4/45a/a9fea445aed74cd0864f78e21fef41cf.png">
	<link rel="image_src" href="https://habrastorage.org/files/a9f/ea4/45a/a9fea445aed74cd0864f78e21fef41cf.png"><meta property="og:image" content="https://habrastorage.org/files/4e0/b18/621/4e0b18621d67432cb41defea99595075.png">
	<link rel="image_src" href="https://habrastorage.org/files/4e0/b18/621/4e0b18621d67432cb41defea99595075.png"><meta property="og:image" content="https://habrastorage.org/files/e27/3ed/1a4/e273ed1a4ed342abb148c53ad824d8f3.png">
	<link rel="image_src" href="https://habrastorage.org/files/e27/3ed/1a4/e273ed1a4ed342abb148c53ad824d8f3.png"><meta property="og:image" content="https://habrastorage.org/files/4f3/554/91b/4f355491bc81468cbcb05427325b49ca.png">
	<link rel="image_src" href="https://habrastorage.org/files/4f3/554/91b/4f355491bc81468cbcb05427325b49ca.png"><meta property="og:image" content="https://habrastorage.org/files/4e5/585/2eb/4e55852eb2a04db2a1200c031304129c.png">
	<link rel="image_src" href="https://habrastorage.org/files/4e5/585/2eb/4e55852eb2a04db2a1200c031304129c.png"><meta property="og:image" content="https://habrastorage.org/files/b3a/4f6/19a/b3a4f619a5af41e2ab0bfb57520e8dec.png">
	<link rel="image_src" href="https://habrastorage.org/files/b3a/4f6/19a/b3a4f619a5af41e2ab0bfb57520e8dec.png"><meta property="og:image" content="https://habrastorage.org/files/cff/6ca/c07/cff6cac07167483189b95de4d427b5aa.png">
	<link rel="image_src" href="https://habrastorage.org/files/cff/6ca/c07/cff6cac07167483189b95de4d427b5aa.png"><meta property="og:image" content="https://habrastorage.org/files/9b8/a9e/7f4/9b8a9e7f444f4b359cac4b6964d2e8eb.png">
	<link rel="image_src" href="https://habrastorage.org/files/9b8/a9e/7f4/9b8a9e7f444f4b359cac4b6964d2e8eb.png"><meta property="og:image" content="https://habrastorage.org/files/02d/a8c/093/02da8c093fb74979a95b6d94eeba12da.png">
	<link rel="image_src" href="https://habrastorage.org/files/02d/a8c/093/02da8c093fb74979a95b6d94eeba12da.png"><meta property="og:image" content="https://habrastorage.org/files/038/ff4/dbe/038ff4dbe4db4e51a5c16d91745b2f6a.png">
	<link rel="image_src" href="https://habrastorage.org/files/038/ff4/dbe/038ff4dbe4db4e51a5c16d91745b2f6a.png"><meta property="og:image" content="https://habrastorage.org/files/c59/7d1/b3a/c597d1b3a25344b6b3ef03e2356a4e16.png">
	<link rel="image_src" href="https://habrastorage.org/files/c59/7d1/b3a/c597d1b3a25344b6b3ef03e2356a4e16.png"><meta property="og:image" content="https://habrastorage.org/files/e27/3ed/1a4/e273ed1a4ed342abb148c53ad824d8f3.png">
	<link rel="image_src" href="https://habrastorage.org/files/e27/3ed/1a4/e273ed1a4ed342abb148c53ad824d8f3.png"><meta property="og:image" content="https://habrastorage.org/files/4f3/554/91b/4f355491bc81468cbcb05427325b49ca.png">
	<link rel="image_src" href="https://habrastorage.org/files/4f3/554/91b/4f355491bc81468cbcb05427325b49ca.png"><meta property="og:image" content="https://habrastorage.org/files/4e5/585/2eb/4e55852eb2a04db2a1200c031304129c.png">
	<link rel="image_src" href="https://habrastorage.org/files/4e5/585/2eb/4e55852eb2a04db2a1200c031304129c.png"><meta property="og:image" content="https://habrastorage.org/files/4ff/008/b31/4ff008b318004404a12123e445d5d470.png">
	<link rel="image_src" href="https://habrastorage.org/files/4ff/008/b31/4ff008b318004404a12123e445d5d470.png"><meta property="og:image" content="https://habrastorage.org/files/0a1/4ca/d5b/0a14cad5be85478cb63183dc38d0cc9e.png">
	<link rel="image_src" href="https://habrastorage.org/files/0a1/4ca/d5b/0a14cad5be85478cb63183dc38d0cc9e.png"><meta property="og:image" content="https://habrastorage.org/files/c4d/500/413/c4d500413a684b2fba934125fd4416ca.png">
	<link rel="image_src" href="https://habrastorage.org/files/c4d/500/413/c4d500413a684b2fba934125fd4416ca.png"><meta property="og:image" content="https://habrastorage.org/files/3c9/e71/215/3c9e7121586d47549026adcfd9963c7f.png">
	<link rel="image_src" href="https://habrastorage.org/files/3c9/e71/215/3c9e7121586d47549026adcfd9963c7f.png"><meta property="og:image" content="https://habrastorage.org/files/daf/5c5/cb3/daf5c5cb31c146edab32c17ae2d570c8.png">
	<link rel="image_src" href="https://habrastorage.org/files/daf/5c5/cb3/daf5c5cb31c146edab32c17ae2d570c8.png"><meta property="og:image" content="https://habrastorage.org/files/c5d/ef6/57d/c5def657d59a4dfc94083b4ffc420942.png">
	<link rel="image_src" href="https://habrastorage.org/files/c5d/ef6/57d/c5def657d59a4dfc94083b4ffc420942.png"><meta property="og:image" content="https://habrastorage.org/files/200/694/691/20069469150c41b5a7d22aa573871623.png">
	<link rel="image_src" href="https://habrastorage.org/files/200/694/691/20069469150c41b5a7d22aa573871623.png"><meta property="og:image" content="https://habrastorage.org/files/e27/3ed/1a4/e273ed1a4ed342abb148c53ad824d8f3.png">
	<link rel="image_src" href="https://habrastorage.org/files/e27/3ed/1a4/e273ed1a4ed342abb148c53ad824d8f3.png"><meta property="og:image" content="https://habrastorage.org/files/4f3/554/91b/4f355491bc81468cbcb05427325b49ca.png">
	<link rel="image_src" href="https://habrastorage.org/files/4f3/554/91b/4f355491bc81468cbcb05427325b49ca.png"><meta property="og:image" content="https://habrastorage.org/files/4e5/585/2eb/4e55852eb2a04db2a1200c031304129c.png">
	<link rel="image_src" href="https://habrastorage.org/files/4e5/585/2eb/4e55852eb2a04db2a1200c031304129c.png"><meta property="og:image" content="https://habrastorage.org/files/273/d5e/6d9/273d5e6d98b84caabb97e9379978532a.png">
	<link rel="image_src" href="https://habrastorage.org/files/273/d5e/6d9/273d5e6d98b84caabb97e9379978532a.png"><meta property="og:image" content="https://habrastorage.org/files/dd6/c12/701/dd6c12701a81481e83a90bfbee4a7dc6.png">
	<link rel="image_src" href="https://habrastorage.org/files/dd6/c12/701/dd6c12701a81481e83a90bfbee4a7dc6.png"><meta property="og:image" content="https://habrastorage.org/files/7ed/2f5/ae1/7ed2f5ae14224f89b56b144f2d453182.png">
	<link rel="image_src" href="https://habrastorage.org/files/7ed/2f5/ae1/7ed2f5ae14224f89b56b144f2d453182.png"><meta property="og:image" content="https://habrastorage.org/files/e27/3ed/1a4/e273ed1a4ed342abb148c53ad824d8f3.png">
	<link rel="image_src" href="https://habrastorage.org/files/e27/3ed/1a4/e273ed1a4ed342abb148c53ad824d8f3.png"><meta property="og:image" content="https://habrastorage.org/files/4f3/554/91b/4f355491bc81468cbcb05427325b49ca.png">
	<link rel="image_src" href="https://habrastorage.org/files/4f3/554/91b/4f355491bc81468cbcb05427325b49ca.png"><meta property="og:image" content="https://habrastorage.org/files/4e5/585/2eb/4e55852eb2a04db2a1200c031304129c.png">
	<link rel="image_src" href="https://habrastorage.org/files/4e5/585/2eb/4e55852eb2a04db2a1200c031304129c.png"><meta property="og:image" content="https://habrastorage.org/files/e55/5a5/883/e555a58839fe4ac780c0e6ce6cd0f03f.png">
	<link rel="image_src" href="https://habrastorage.org/files/e55/5a5/883/e555a58839fe4ac780c0e6ce6cd0f03f.png"><meta property="og:image" content="https://habrastorage.org/files/8f1/be3/eb1/8f1be3eb193a4ff18baf8ea49e2b0b1a.png">
	<link rel="image_src" href="https://habrastorage.org/files/8f1/be3/eb1/8f1be3eb193a4ff18baf8ea49e2b0b1a.png"><meta property="og:image" content="https://habrastorage.org/files/f94/7f1/c61/f947f1c615994174bf7cdf3c51ce75b7.png">
	<link rel="image_src" href="https://habrastorage.org/files/f94/7f1/c61/f947f1c615994174bf7cdf3c51ce75b7.png"><meta property="og:image" content="https://habrastorage.org/files/23f/12c/527/23f12c527cc344a0a55a14b32724c323.png">
	<link rel="image_src" href="https://habrastorage.org/files/23f/12c/527/23f12c527cc344a0a55a14b32724c323.png"><meta property="og:image" content="https://habrastorage.org/files/b28/747/38e/b2874738eb4a4760a020f6784a466c98.png">
	<link rel="image_src" href="https://habrastorage.org/files/b28/747/38e/b2874738eb4a4760a020f6784a466c98.png"><meta property="og:image" content="https://habrastorage.org/files/2fc/b02/e57/2fcb02e57f6d4452a6bd421e994bf71d.png">
	<link rel="image_src" href="https://habrastorage.org/files/2fc/b02/e57/2fcb02e57f6d4452a6bd421e994bf71d.png"><meta property="og:image" content="https://habrastorage.org/files/e2d/a5d/b65/e2da5db65b74495b900d34dc08a7bca3.png">
	<link rel="image_src" href="https://habrastorage.org/files/e2d/a5d/b65/e2da5db65b74495b900d34dc08a7bca3.png"><meta property="og:image" content="https://habrastorage.org/files/e27/3ed/1a4/e273ed1a4ed342abb148c53ad824d8f3.png">
	<link rel="image_src" href="https://habrastorage.org/files/e27/3ed/1a4/e273ed1a4ed342abb148c53ad824d8f3.png"><meta property="og:image" content="https://habrastorage.org/files/4f3/554/91b/4f355491bc81468cbcb05427325b49ca.png">
	<link rel="image_src" href="https://habrastorage.org/files/4f3/554/91b/4f355491bc81468cbcb05427325b49ca.png"><meta property="og:image" content="https://habrastorage.org/files/4e5/585/2eb/4e55852eb2a04db2a1200c031304129c.png">
	<link rel="image_src" href="https://habrastorage.org/files/4e5/585/2eb/4e55852eb2a04db2a1200c031304129c.png"><meta property="og:image" content="https://habrastorage.org/files/c4a/581/805/c4a5818057514479b2682fffb8d8dcef.png">
	<link rel="image_src" href="https://habrastorage.org/files/c4a/581/805/c4a5818057514479b2682fffb8d8dcef.png"><meta property="og:image" content="https://habrastorage.org/files/2fc/b02/e57/2fcb02e57f6d4452a6bd421e994bf71d.png">
	<link rel="image_src" href="https://habrastorage.org/files/2fc/b02/e57/2fcb02e57f6d4452a6bd421e994bf71d.png"><meta property="og:image" content="https://habrastorage.org/files/2fc/b02/e57/2fcb02e57f6d4452a6bd421e994bf71d.png">
	<link rel="image_src" href="https://habrastorage.org/files/2fc/b02/e57/2fcb02e57f6d4452a6bd421e994bf71d.png"><meta property="og:image" content="https://habrastorage.org/files/feb/a2a/f35/feba2af35eea4c36a5d4c9e90acff6a9.png">
	<link rel="image_src" href="https://habrastorage.org/files/feb/a2a/f35/feba2af35eea4c36a5d4c9e90acff6a9.png"><meta property="og:image" content="https://habrastorage.org/files/f42/356/0f6/f423560f6b1b4e76a2de9ce2ae903330.png">
	<link rel="image_src" href="https://habrastorage.org/files/f42/356/0f6/f423560f6b1b4e76a2de9ce2ae903330.png"><meta property="og:image" content="https://habrastorage.org/files/0a6/ac1/ba6/0a6ac1ba6cbe40f29922b07e1e155f47.png">
	<link rel="image_src" href="https://habrastorage.org/files/0a6/ac1/ba6/0a6ac1ba6cbe40f29922b07e1e155f47.png"><meta property="og:image" content="https://habrastorage.org/files/0a6/ac1/ba6/0a6ac1ba6cbe40f29922b07e1e155f47.png">
	<link rel="image_src" href="https://habrastorage.org/files/0a6/ac1/ba6/0a6ac1ba6cbe40f29922b07e1e155f47.png"><meta property="og:image" content="https://habrastorage.org/files/daf/5c5/cb3/daf5c5cb31c146edab32c17ae2d570c8.png">
	<link rel="image_src" href="https://habrastorage.org/files/daf/5c5/cb3/daf5c5cb31c146edab32c17ae2d570c8.png"><meta property="og:image" content="https://habrastorage.org/files/daf/5c5/cb3/daf5c5cb31c146edab32c17ae2d570c8.png">
	<link rel="image_src" href="https://habrastorage.org/files/daf/5c5/cb3/daf5c5cb31c146edab32c17ae2d570c8.png"><meta property="og:image" content="https://habrastorage.org/files/fa4/fc9/ce0/fa4fc9ce00d84a0e9c211e78845a4440.png">
	<link rel="image_src" href="https://habrastorage.org/files/fa4/fc9/ce0/fa4fc9ce00d84a0e9c211e78845a4440.png"><meta property="og:image" content="https://habrastorage.org/files/e27/3ed/1a4/e273ed1a4ed342abb148c53ad824d8f3.png">
	<link rel="image_src" href="https://habrastorage.org/files/e27/3ed/1a4/e273ed1a4ed342abb148c53ad824d8f3.png"><meta property="og:image" content="https://habrastorage.org/files/4f3/554/91b/4f355491bc81468cbcb05427325b49ca.png">
	<link rel="image_src" href="https://habrastorage.org/files/4f3/554/91b/4f355491bc81468cbcb05427325b49ca.png"><meta property="og:image" content="https://habrastorage.org/files/4e5/585/2eb/4e55852eb2a04db2a1200c031304129c.png">
	<link rel="image_src" href="https://habrastorage.org/files/4e5/585/2eb/4e55852eb2a04db2a1200c031304129c.png"><meta property="og:image" content="https://habrastorage.org/files/73b/0bb/f60/73b0bbf60c8a4fc894685ea6a42dd5b7.png">
	<link rel="image_src" href="https://habrastorage.org/files/73b/0bb/f60/73b0bbf60c8a4fc894685ea6a42dd5b7.png"><meta property="og:image" content="https://habrastorage.org/files/0e7/d62/b40/0e7d62b40e434746ba524aca2a44cf8a.png">
	<link rel="image_src" href="https://habrastorage.org/files/0e7/d62/b40/0e7d62b40e434746ba524aca2a44cf8a.png"><meta property="og:image" content="https://habrastorage.org/files/d41/847/16b/d4184716b59347988b2a201eceef2cf7.png">
	<link rel="image_src" href="https://habrastorage.org/files/d41/847/16b/d4184716b59347988b2a201eceef2cf7.png"><meta property="og:image" content="https://habrastorage.org/files/334/0d2/676/3340d2676811487daafd1c3823984f55.png">
	<link rel="image_src" href="https://habrastorage.org/files/334/0d2/676/3340d2676811487daafd1c3823984f55.png"><meta property="og:image" content="https://habrastorage.org/files/986/46c/ac1/98646cac1aa3467087bef9dd39868b3c.png">
	<link rel="image_src" href="https://habrastorage.org/files/986/46c/ac1/98646cac1aa3467087bef9dd39868b3c.png"><meta property="og:image" content="https://habrastorage.org/files/e27/3ed/1a4/e273ed1a4ed342abb148c53ad824d8f3.png">
	<link rel="image_src" href="https://habrastorage.org/files/e27/3ed/1a4/e273ed1a4ed342abb148c53ad824d8f3.png"><meta property="og:image" content="https://habrastorage.org/files/4f3/554/91b/4f355491bc81468cbcb05427325b49ca.png">
	<link rel="image_src" href="https://habrastorage.org/files/4f3/554/91b/4f355491bc81468cbcb05427325b49ca.png"><meta property="og:image" content="https://habrastorage.org/files/4e5/585/2eb/4e55852eb2a04db2a1200c031304129c.png">
	<link rel="image_src" href="https://habrastorage.org/files/4e5/585/2eb/4e55852eb2a04db2a1200c031304129c.png"><meta property="og:image" content="https://habrastorage.org/files/a50/1fd/0f5/a501fd0f54e24647935e12f704a085f0.png">
	<link rel="image_src" href="https://habrastorage.org/files/a50/1fd/0f5/a501fd0f54e24647935e12f704a085f0.png"><meta property="og:image" content="https://habrastorage.org/files/ecd/4d7/b53/ecd4d7b53e9040058b876d2bc7a956d0.png">
	<link rel="image_src" href="https://habrastorage.org/files/ecd/4d7/b53/ecd4d7b53e9040058b876d2bc7a956d0.png"><meta property="og:image" content="https://habrastorage.org/files/468/ede/39a/468ede39aae14b61aeca40116776af91.png">
	<link rel="image_src" href="https://habrastorage.org/files/468/ede/39a/468ede39aae14b61aeca40116776af91.png"><meta property="og:image" content="https://habrastorage.org/files/5a5/be6/a4e/5a5be6a4e0e84abb84fc9052e69c4aca.png">
	<link rel="image_src" href="https://habrastorage.org/files/5a5/be6/a4e/5a5be6a4e0e84abb84fc9052e69c4aca.png"><meta property="og:image" content="https://habrastorage.org/files/6d1/4b7/772/6d14b7772be64bc687c7aae83ea76e0c.png">
	<link rel="image_src" href="https://habrastorage.org/files/6d1/4b7/772/6d14b7772be64bc687c7aae83ea76e0c.png"><meta property="og:image" content="https://habrastorage.org/files/e27/3ed/1a4/e273ed1a4ed342abb148c53ad824d8f3.png">
	<link rel="image_src" href="https://habrastorage.org/files/e27/3ed/1a4/e273ed1a4ed342abb148c53ad824d8f3.png"><meta property="og:image" content="https://habrastorage.org/files/daf/5c5/cb3/daf5c5cb31c146edab32c17ae2d570c8.png">
	<link rel="image_src" href="https://habrastorage.org/files/daf/5c5/cb3/daf5c5cb31c146edab32c17ae2d570c8.png"><meta property="og:image" content="https://habrastorage.org/files/251/d52/b0c/251d52b0c76d4dce96ba0a3be192169a.png">
	<link rel="image_src" href="https://habrastorage.org/files/251/d52/b0c/251d52b0c76d4dce96ba0a3be192169a.png"><meta property="og:image" content="https://habrastorage.org/files/ac5/c9d/55d/ac5c9d55dd394a3ca53e283b491b9c2a.png">
	<link rel="image_src" href="https://habrastorage.org/files/ac5/c9d/55d/ac5c9d55dd394a3ca53e283b491b9c2a.png"><meta property="og:image" content="https://habrastorage.org/files/237/527/7f8/2375277f8f3c4544bf4b54d3dcdf13cd.png">
	<link rel="image_src" href="https://habrastorage.org/files/237/527/7f8/2375277f8f3c4544bf4b54d3dcdf13cd.png"><meta property="og:image" content="https://habrastorage.org/files/063/014/044/06301404467d49e1a193b8fbe488af72.png">
	<link rel="image_src" href="https://habrastorage.org/files/063/014/044/06301404467d49e1a193b8fbe488af72.png"><meta property="og:image" content="https://habrastorage.org/files/be6/538/871/be6538871da34218b456fb33cc17f139.png">
	<link rel="image_src" href="https://habrastorage.org/files/be6/538/871/be6538871da34218b456fb33cc17f139.png"><meta property="og:image" content="https://habrastorage.org/files/1f7/6e1/be0/1f76e1be07114762829a3c05af3c05c1.png">
	<link rel="image_src" href="https://habrastorage.org/files/1f7/6e1/be0/1f76e1be07114762829a3c05af3c05c1.png"><meta property="og:image" content="https://habrastorage.org/files/00e/575/dc3/00e575dc3098439f8c20f4db412f4d9e.png">
	<link rel="image_src" href="https://habrastorage.org/files/00e/575/dc3/00e575dc3098439f8c20f4db412f4d9e.png"><meta property="og:image" content="https://habrastorage.org/files/904/142/f5a/904142f5a5ad4c6f8ee19126ff821ec3.png">
	<link rel="image_src" href="https://habrastorage.org/files/904/142/f5a/904142f5a5ad4c6f8ee19126ff821ec3.png"><meta property="og:image" content="https:///habrastorage.org/files/daf/5c5/cb3/daf5c5cb31c146edab32c17ae2d570c8.png">
	<link rel="image_src" href="https://habrastorage.org/files/daf/5c5/cb3/daf5c5cb31c146edab32c17ae2d570c8.png"><meta property="og:image" content="https:///habrastorage.org/files/daf/5c5/cb3/daf5c5cb31c146edab32c17ae2d570c8.png">
	<link rel="image_src" href="https://habrastorage.org/files/daf/5c5/cb3/daf5c5cb31c146edab32c17ae2d570c8.png"><meta property="og:image" content="https://habrastorage.org/files/e27/3ed/1a4/e273ed1a4ed342abb148c53ad824d8f3.png">
	<link rel="image_src" href="https://habrastorage.org/files/e27/3ed/1a4/e273ed1a4ed342abb148c53ad824d8f3.png"><meta property="og:image" content="https://habrastorage.org/files/4f3/554/91b/4f355491bc81468cbcb05427325b49ca.png">
	<link rel="image_src" href="https://habrastorage.org/files/4f3/554/91b/4f355491bc81468cbcb05427325b49ca.png"><meta property="og:image" content="https://habrastorage.org/files/4e5/585/2eb/4e55852eb2a04db2a1200c031304129c.png">
	<link rel="image_src" href="https://habrastorage.org/files/4e5/585/2eb/4e55852eb2a04db2a1200c031304129c.png"><meta property="og:image" content="https://habrastorage.org/files/ec1/3ff/f87/ec13fff877ae4f52a297eee9e35e70f2.png">
	<link rel="image_src" href="https://habrastorage.org/files/ec1/3ff/f87/ec13fff877ae4f52a297eee9e35e70f2.png"><meta property="og:image" content="https://habrastorage.org/files/e27/3ed/1a4/e273ed1a4ed342abb148c53ad824d8f3.png">
	<link rel="image_src" href="https://habrastorage.org/files/e27/3ed/1a4/e273ed1a4ed342abb148c53ad824d8f3.png"><meta property="og:image" content="https://habrastorage.org/files/4f3/554/91b/4f355491bc81468cbcb05427325b49ca.png">
	<link rel="image_src" href="https://habrastorage.org/files/4f3/554/91b/4f355491bc81468cbcb05427325b49ca.png">
	
<meta property="og:description" content="Доброго времени суток %username%. Не давно наткнулся на хороший туториал по созданию клона игры Flappy Bird используя LibGDX и этот туториал мне понравился...">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@habrahabr">
	<meta property="al:ios:url" content="habrahabr://post/243471">
<meta property="al:ios:app_store_id" content="778613673">
<meta property="al:ios:app_name" content="Habrahabr">
<meta property="al:android:url" content="habrahabr://post/243471">
<meta property="al:android:app_name" content="Habrahabr">
<meta property="al:android:package" content="ru.habrahabr">
<meta property="al:windows_phone:url" content="habrahabr://post/243471">
<meta property="al:windows_phone:app_name" content="Habrahabr">
<meta property="al:windows_phone:app_id" content="460a6bd6-8955-470f-935e-9ea1726a6060">
	<link rel="canonical" href="http://habrahabr.ru/post/243471/">
    <link rel="alternate" media="only screen and (max-width: 640px)" href="http://m.habrahabr.ru/post/243471/">




    <link href="http://habrahabr.ru/styles/1429261672/assets/global_main.css" rel="stylesheet" media="all">
    <script type="text/javascript" async="" src="./tutorial_files/watch.js"></script><script async="" src="./tutorial_files/analytics.js"></script><script type="text/javascript" src="./tutorial_files/global_main.js"></script>
        <link href="http://habrahabr.ru/styles/1429261672/assets/post_common_css.css" rel="stylesheet" media="all">
    <link href="http://habrahabr.ru/styles/1429261672/users/all.css" rel="stylesheet" media="all">

    <link href="http://habrahabr.ru/styles/1429261672/printer.css" rel="stylesheet" media="print">

    
    




        <script type="text/javascript" src="./tutorial_files/post_common_js.js"></script>
    <script type="text/javascript" src="./tutorial_files/all.js"></script>


      <!-- www.criteo.com/ru -->
<script type="text/javascript">
  var crtg_nid="2580";
  var crtg_cookiename="cto_rtt";
  var crtg_varname="crtg_content";
  function crtg_getCookie(c_name){
    var i,x,y,ARRCookies=document.cookie.split(";");
    for(i=0;i<ARRCookies.length;i++){
      x=ARRCookies[i].substr(0,ARRCookies[i].indexOf("="));
      y=ARRCookies[i].substr(ARRCookies[i].indexOf("=")+1);
      x=x.replace(/^\s+|\s+$/g,"");
      if(x==c_name){return unescape(y);}
    }
    return'';
  }
  var crtg_content = crtg_getCookie(crtg_cookiename);var crtg_rnd=Math.floor(Math.random()*99999999999);
  var crtg_url=location.protocol+'//rtax.criteo.com/delivery/rta/rta.js?netId='+escape(crtg_nid);crtg_url+='&cookieName='+escape(crtg_cookiename);crtg_url+='&rnd='+crtg_rnd;crtg_url+='&varName=' + escape(crtg_varname);
  var crtg_script=document.createElement('script');crtg_script.type='text/javascript';crtg_script.src=crtg_url;crtg_script.async=true;
  if(document.getElementsByTagName("head").length>0)document.getElementsByTagName("head")[0].appendChild(crtg_script);
  else
  if(document.getElementsByTagName("body").length>0)document.getElementsByTagName("body")[0].appendChild(crtg_script);
</script><script type="text/javascript" src="http://rtax.criteo.com/delivery/rta/rta.js?netId=2580&cookieName=cto_rtt&rnd=93091560596&varName=crtg_content" async=""></script>
      <script>
        var N = 5;
        var ar_duo1 = Math.floor(Math.random()*N+1);
      </script>
      <script type="text/javascript" src="./tutorial_files/adriver.core.2.js"></script>

    <link title="Хабрахабр / Комментарии к публикации «[LibGDX] Создаем клон Flappy Bird — Zombie Bird»" type="application/rss+xml" rel="alternate" href="http://habrahabr.ru/rss/post/243471/">

    
<script type="text/javascript">

      var user_type = 'habrauser';

  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-726094-1',  'auto' );
    ga('create', 'UA-726094-24', 'auto', {'name': 'HGM'});

  ga('require', 'displayfeatures');
  ga('set', 'dimension1', user_type); // user type - guest/readonly/habrauser
  //ga('set', 'dimension2', username); // username



  if(typeof removeUtms === 'undefined') {
    removeUtms = function(){};
  }
  ga('HGM.send', 'pageview');
  ga('HGM.set', 'dimension1', user_type);
  ga('HGM.set', 'dimension2', "habrahabr");
  ga('send', 'pageview', { 'hitCallback': removeUtms });

</script>


    <meta content="Хабрахабр" name="apple-mobile-web-app-title">
<link href="http://habrahabr.ru/images/apple-touch-icon_142x142.png" rel="apple-touch-icon" type="image/png">
  <style type="text/css">/*.lleo_errorSelection *::-moz-selection,
.lleo_errorSelection *::selection,
.lleo_errorSelection *::-webkit-selection {
    background-color: red !important;
    color: #fff !important;;
}*/

#lleo_dialog,
#lleo_dialog * {
    color: #000 !important;
    font: normal 13px Arial, Helvetica !important;
    line-height: 15px !important;
    margin: 0 !important;
	padding: 0 !important;
	background: none !important;
	border: none 0 !important;
	position: static !important;
	vertical-align: baseline !important;
	overflow: visible !important;
	width: auto !important;
	height: auto !important;
    max-width: none !important;
    max-height: none !important;
	float: none !important;
	visibility: visible !important;
	text-align: left !important;
    text-transform: none !important;
	border-collapse: separate !important;
	border-spacing: 2px !important;
    box-sizing: content-box !important;
    box-shadow: none !important;
    opacity: 1 !important;
    text-shadow: none !important;
    letter-spacing: normal !important;
    -webkit-filter: none !important;
    -moz-filter: none !important;
    filter: none !important;
}
#lleo_dialog *:before,
#lleo_dialog *:after {
    content: '';
}

#lleo_dialog iframe {
	height: 0 !important;
	width: 0 !important;
}

#lleo_dialog {
    position: absolute !important;
    background: #fff !important;
    border: solid 1px #ccc !important;
    padding: 7px 0 0 !important;
    left: -999px;
    top: -999px;
    width: 440px !important;
    overflow: hidden;
    display: block !important;
    z-index: 999999999 !important;
    box-shadow: 8px 16px 30px rgba(0, 0, 0, 0.16) !important;
    border-radius: 3px !important;
    opacity: 0 !important;
    -webkit-transform: translateY(15px);
    -moz-transform: translateY(15px);
    -ms-transform: translateY(15px);
    -o-transform: translateY(15px);
    transform: translateY(15px);
}
#lleo_dialog.lleo_show_small {
    width: 150px !important;
}
#lleo_dialog.lleo_show {
    opacity: 1 !important;
    -webkit-transform: translateY(0);
    -moz-transform: translateY(0);
    -ms-transform: translateY(0);
    -o-transform: translateY(0);
    transform: translateY(0);
    -webkit-transition: -webkit-transform 0.3s, opacity 0.3s !important;
    -moz-transition: -moz-transform 0.3s, opacity 0.3s !important;
    -ms-transition: -ms-transform 0.3s, opacity 0.3s !important;
    -o-transition: -o-transform 0.3s, opacity 0.3s !important;
    transition: transform 0.3s, opacity 0.3s !important;
}
#lleo_dialog.lleo_collapse {
    opacity: 0 !important;
    -webkit-transform: scale(0.25, 0.1) translate(-550px, 100px);
    -moz-transform: scale(0.25, 0.1) translate(-550px, 100px);
    -ms-transform: scale(0.25, 0.1) translate(-550px, 100px);
    -o-transform: scale(0.25, 0.1) translate(-550px, 100px);
    transform: scale(0.25, 0.1) translate(-550px, 100px);
    -webkit-transition: -webkit-transform 0.4s, opacity 0.4s !important;
    -moz-transition: -moz-transform 0.4s, opacity 0.4s !important;
    -ms-transition: -ms-transform 0.4s, opacity 0.4s !important;
    -o-transition: -o-transform 0.4s, opacity 0.4s !important;
    transition: transform 0.4s, opacity 0.4s !important;
}
#lleo_dialog input::-webkit-input-placeholder {
    color: #aaa !important;
}
#lleo_dialog .lleo_has_pic #lleo_word {
	margin-right: 80px !important;
}
#lleo_dialog #lleo_translationsContainer1 {
	position: relative !important;
}
#lleo_dialog #lleo_translationsContainer2 {
	padding: 7px 0 0 !important;
	vertical-align: middle !important;
}
#lleo_dialog #lleo_word {
    color: #000 !important;
    margin: 0 5px 2px 0 !important;
    /*float: left !important;*/
}
#lleo_dialog .lleo_has_sound #lleo_word {
    margin-left: 30px !important;
}
#lleo_dialog #lleo_text {
    font-weight: bold !important;
    color: #d56e00 !important;
    text-decoration: none !important;
    cursor: default !important;
}
/*
#lleo_dialog #lleo_text.lleo_known {
    cursor: pointer !important;
    text-decoration: underline !important;
}
*/
/*#lleo_dialog #lleo_closeBtn {
    position: absolute !important;
    right: 6px !important;
    top: 5px !important;
    line-height: 1px !important;
    text-decoration: none !important;
    font-weight: bold !important;
    font-size: 0 !important;
    color: #aaa !important;
    display: block !important;
	z-index: 9999999999 !important;
	width: 7px !important;
	height: 7px !important;
	padding: 0 !important;
	margin: 0 !important;
}*/

#lleo_dialog #lleo_optionsBtn {
    position: absolute !important; 
    right: 3px !important;
    top: 5px !important;
    line-height: 1px !important;
    text-decoration: none !important;
    font-weight: bold !important;
    font-size: 13px !important;
    color: #aaa !important;
    padding: 2px !important;
	display: none;
}
    #lleo_dialog.lleo_optionsShown #lleo_optionsBtn {
        display: block !important;
    }
    #lleo_dialog #lleo_optionsBtn img {
        width: 12px !important;
        height: 12px !important;
    }
#lleo_dialog #lleo_sound {
    float: left !important;
    width: 16px !important;
    height: 16px !important;
    margin-left: 9px !important;
    margin-right: 3px !important;
    background: 0 0 no-repeat !important;
    cursor: pointer !important;
    display: none !important;
    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAfNJREFUeNq0U01IVFEU/u57Oo5WhBRIBBptykWLYBa2soWiEKQQEbrSFsGbVRQKQc2iFqGitXqvjQxCoCJCqyI0aBUtZILaJNUuYWYWo8HovJ/707nP94bnz0rxwvfOuefd8517fi5TSuE4i50YwZ3l37ZhNlpgzFkaaM/G9sHF1YskNrT+7l4PjMOcb78t2JL71uxgB+2UlfxHTtq5N94fIOh/88kWgWfl73ZCSQkpeGg3H091JY6dI2S00qA/N3KO3dDUYhFgEmZGurG+w9FqApIHsVM7kaTF9Nhn0r8Q7hPWQgIRuNaH3AMUA4W/Lkdh04cpFS43G0TgxQTvCdMETVAk3KynIHwXZU/ge8XDt7KH9bKLjU0P2zVO5LsEpSejVRJ9UR18EtfqKegovs9R3Q6w9c/H1o4Aa2Jwm1lIvn9RJ4w9RdRRzqcYrpwycCll4Cy1lnkS3Bc6vfBg28v8aRIfI78zhB/1GygROH3jLyyzMQ0zlUZuZBSlKkeLoegGtTjYLcJ8pF+NakHOFC2J6w+f25mxSfWrWFF/ShXVPTGvtN14NNkVnxlYWJkgZEL7/vwKr55lKSVnaGYWkuYgrgG172uUv47+U7fw0EHaJXmalUQy/HqO6lBzEsVjJC4Q8kd6TETQpjuaGOvjv8b/AgwA/ij1XMx58NIAAAAASUVORK5CYII=) !important;
}
#lleo_dialog .lleo_has_sound #lleo_sound {
    display: block !important;
}

#lleo_dialog #lleo_soundWave {
    border: solid 5px #4495CC !important;
    border-radius: 5px !important;
    position: absolute !important;
    left: -5px !important;
    top: -5px !important;
    right: -5px !important;
    bottom: -5px !important;
    z-index: 0 !important;
    opacity: 0.9 !important;
    display: none !important;
}
    #lleo_dialog #lleo_soundWave.lleo_beforePlaying {
        display: block !important;
    }
    #lleo_dialog #lleo_soundWave.lleo_playing {
        opacity: 0 !important;
        border-width: 20px !important;
        border-radius: 30px !important;

        -webkit-transform: scale(1.07,1.1) !important;
        -moz-transform: scale(1.07,1.1) !important;
        -ms-transform: scale(1.07,1.1) !important;
        transform: scale(1.07,1.1) !important;

        -webkit-transition: all 0.6s !important;
        -moz-transition: all 0.6s !important;
        -ms-transition: all 0.6s !important;
        transition: all 0.6s !important;
    }


#lleo_dialog #lleo_picOuter {
    position: absolute !important;
    float: right !important;
    top: 4px;
    right: 5px;
    z-index: 9 !important;
    display: none !important;
    width: 100px !important;
}
    #lleo_dialog.lleo_optionsShown #lleo_picOuter {
        right: 25px;
    }
#lleo_dialog .lleo_has_pic #lleo_picOuter {
    display: block !important;
}
    #lleo_dialog #lleo_picOuter:hover {
        width: auto !important;
        z-index: 11 !important;
    }
#lleo_dialog #lleo_pic,
#lleo_dialog #lleo_picBig {
    position: absolute !important;
    top: 0 !important;
    right: 0 !important;
    border: solid 2px #fff !important;
    -webkit-border-radius: 2px !important;
    -moz-border-radius: 2px !important;
	border-radius: 2px !important;
    z-index: 1 !important;
}
#lleo_dialog #lleo_pic {
	position: relative !important;
    border: none !important;
	width: 30px !important;
}
#lleo_dialog #lleo_picBig {
    box-shadow: -1px 2px 4px rgba(0,0,0,0.3);
    z-index: 2 !important;
    opacity: 0 !important;
    visibility: hidden !important;
}
    #lleo_dialog #lleo_picOuter:hover #lleo_picBig {
        visibility: visible !important;
        opacity: 1 !important;
        -webkit-transition: opacity 0.3s !important;
        -webkit-transition-delay: 0.3s !important;
    }
#lleo_dialog #lleo_transcription {
    margin: 0 80px 4px 31px !important;
    color: #aaaaaa !important;
}
#lleo_dialog .lleo_no_trans {
    color: #aaa !important;
}

#lleo_dialog .ll-translation-counter {
	float: right !important;
    font-size: 11px !important;
    color: #aaa !important;
    padding: 2px 2px 1px 10px !important;
}

#lleo_dialog .ll-translation-text {
	float: left !important;
	/*width: 80% !important;*/
}

#lleo_dialog #lleo_trans a {
    color: #3F669F !important;
    text-decoration: none !important;
    text-overflow: ellipsis !important;
    padding: 1px 4px !important;
    overflow: hidden !important;
    float: left !important;
    width: 320px !important;
}

#lleo_dialog .ll-translation-item {
    color: #3F669F !important;
    border: solid 1px #fff !important;
    padding: 3px !important;
    width: 100% !important;
    float: left !important;
	-moz-border-radius: 2px !important;
	-webkit-border-radius: 2px !important;
	border-radius: 2px !important;
}

#lleo_dialog .ll-translation-item:hover {
	border: solid 1px #9FC2C9 !important;
    background: #EDF4F6 !important;
	cursor: pointer !important;
}
#lleo_dialog .ll-translation-item:hover .ll-translation-counter {
	color: #83a0a6 !important;
}

#lleo_dialog .ll-translation-marker {
    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAWSURBVBhXY7RPm/+fAQkwIXNAbMICAJQ8AkvqWg/SAAAAAElFTkSuQmCC) !important;
    display: inline-block !important;
    width: 4px !important;
    height: 4px !important;
    margin: 7px 5px 2px 2px !important;
    float: left !important;
}

#lleo_dialog #lleo_icons {
    color: #aaa !important;
    font-size: 11px !important;
    background: #f8f8f8 !important;
    padding: 10px 10px 10px 16px !important;
}
#lleo_icons a {
    display: inline-block !important;
    width: 16px !important;
    height: 16px !important;
    margin: 0 10px -4px 3px !important;
    text-decoration: none !important;
    opacity: 0.5 !important;
    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHIAAAAQCAYAAADK4SssAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAADopJREFUeNqsWQt0lNWd/33fzGQemUcmzwkhSkhYSSgpJJGVWHlEVEwLq0AFhC520xN0cfcUkHZ7QNetwfac6mp3oR5Ss8c9XaPVhoJCtGwSkYQglQBBNg/IgxBIQl7zyCSZ97f/e7+ZyeShpu7eM/fc797vu9/j/u7v93+MUqlUwuv1IlQ6Ojqk7u5utLaWo/nanfB45tbnsSI6GgsXLhQwpcx/9rCE/0PpOLSL39Pnh9TY2Y1NJXW4NeTFz59agp9uXASfYwR/Xv9dxJ6pxwJBhCIQoKtFuIUAXPRksyTx+U2rVy0TtdrywNhYeviFJAlSsJ1oJNY2ZdfVLeKdiGIb96Kqw45LvU40Dbj42F2mKNyXasCjGTGI0aqmvr6wdseL075fEORl6h+yYWzcDaNeh8Q4E7z0kVPLx//5Il0uTLqHQqGA3z/92qioKHg8Hn5/SZqYogwdOBwO6d19+9DQ0ADdqrmTJhesLML6nQ38uLj4jHSkuJi/a+Q1vd8QxORg6/dBUtDblLzbhBuuOIhJcfhl5QCeyB9DusWA3MO/hf2+e6FwjtFHKGj15Y8M0Cd0KQTpbr8kCBrNsaTn9iXoH3jga5/739nZC7Mj+n7aHBVNwwSUEhuy4rCR6m8vD9ID5MVyeAI4cPo2suI0KMpJgEoU+A5QiCKmg0jT6H49/cP4Tt4i/FXaHLS0d6O57RZ0WvXXvltaWhpOnz7NCbZ371588MEHHLQ9e/bwev78eTzzzDPo7+8PzxFDIO4rKOAgomHihq+9ckxgdd26dWHQSkuBvJ2lmLqTv2kJbQAGot/nw9U7xDa9CQHakY5xFd45f4OdhWZhFtz534GP9k9A9PPWIxGgAu2AgHwP79hYYseRI8q+f/832Kqr4O7t5bt6pioFAmIkiJXXrbCYtbg85MF1q5vv+IFxH6KUApSizLDsJB09F2i3yozoc3pn/CaBVKPr9gC+X3g/3ih5GruL1mPPjx7DwLCdA/x1xWKx4K677kJ6ejpWr14dHt+xYwdSUlKQl5cHvV4/aQ7/GMZEDiDVI9IF4asecqQ4FwzvnaWl/x84hhnJwFAKSiTFaCDS7ifhhEjMu9pJS0dg0SH8Bh28BKqCXSuRxAp+ApMAFBX8Hj6PR3G+uhrDFRXoeekltG3ZjOsbN6L7wH4M/O53GKEX97pc8NGGCckSW9ibdg9anBJqu0ZgpFvNM0ahf8yH75GU7siOx3aqIjHQS8+N0SiRGa/BhR4nLHpVhBSKfEN03erHny+3IinehBf+cQuqzzby8+1dfURuKSy5X1UMBkP4eM6cOfxdmdQuWrSIj7nd7mlAKquqqqTyVXtnvfCFhUkoRi4xswG7V7RIM9lMVvJJHoryM7Gr4hxcLisfO7m3EIcrm1HZ3DmNkYIo79RHFsfjbHMvlGozLTKBKSpJPhUQ3WRvmlpwO1mE1WCGygMk2pxIcHjhlfzBzSDbQ2Jb2C56Bwfhra2F40wtFxHRaMK899+nU/LzGGAvnR+ARSUTNDVaBTVRMI6AO3VjhMCRkGPRUQusutuABbFqDsaJ63akmtQEZhSf5xx1wWTU4eBPfoDBYQeSE818fOV9i/HZpVYcPPQeLPHmWQGZmJgYPmasZGXt2rUcTFaiyVeJBJszMgxi7uxZxFjJrn/tzBnef5MA6iwp4uCFyrjVhieXp6H5wIYw61ip2FUIjcYc7oeO227a2DKjeG0GFib74LPZoVf58NTKuSSiAkr/9CaeeMSFFQeWYsOPv4XCvVl44GdLsbVoMU5mmcLsCrUBWnneRlYa81qHJzHy983UJzBvOTy8ppvV/Nz+2j581GwjGZav27AwBp/dHsUgXcuY1TLgxns0N/y9LjdMhmisJuD+dkMB1j24jJ7jx5vvnsLT+98gJ8cHg147q/XNysoCcziHhoY4C1NTU7F582Y0NjZikDZmXFzcdGkt6f8IxReO/KWKKDAsS4P29EDZOVhJsqqDgC6NMeOSzQrzc+Uhr5SDvPHwOd4/vHF5WFYL0mL48fee/wBHP2lGkl6Dcy+vwVu70nHhYB7WLJmDX/ypFDsbf42erBTZmwPRkfTVRTJXnx2Ln27PnQCSFpm1UhA8KeDnAPI2OM6cCCnoxLzfYkP3qA/dTh/ujPuxxKJF7e0x1BIbB91+LErUYoDA23rsBk5ccyCRGHu224meMT+fGyrxsUb09VtBHiyy1/4DOm7ewcjoOF58vRz6aDUSyGP1zeCxzlSYnLa3t8NqtUKtVnM2LliwALWkLIyJbA00Gs1kaaVJQjD8mOa87H7uMT722LrdMzyOFq9BRrKPQMspeZsDU09AHn1ug7yLXzmKtANlKNtWyEF+tvwcHny1kh8XZBbBQvawzya7+MMuLX7063r85vhlFORasH/7CtouEk5f/xzPf/IykJFI8ubjVl3wqYJSSrbTEwi/ul+SJTUEaESowVuOHXUiGXnJ6oVRLTP50XkGREcp8M41GzpcPjycZICOJPdfzvXhf0a8+GGWnhwfAUdJVtvo/IhnAphAQOJ2Uh2lQrROgzlJsQRmHwFsQrRWQ8wOzJoljG03b97kjMzIyMDWrVu5XaypqcGWLVsQGxsLo9E43dmZzY1n64Ey4Ha9XcP7DFAG4qGT5/BqzSUcenI5Dm3L5+dqyA4yUPPpelZiFR7oozSov+7Cq+XXcKN/lBZbgfmxKchIzyEL74JIjqboVxIkBCAtnAAVj4Ek0SMvZnCxQrLqj6wRUhsJJK097rj8vK4hG+ghKX2fgGL9VanRXEb/i5jH+o/ON5LDI6G8Ve6LX2LuEgg8jVqFnjvD8Hh9s7KLkxzA5GR88cUXOH78OO8zz5W998mTJ9HZ2Ul+g8jlNfK+XwlkKPzIzc2d4U0aJtlVJqche8ecmRCgBZnJxNInZfDoJTItMSSxlSh6uxL1nRNOj9c2iLlaN9bnxeMHaxfC5qAQgZ6aGpeMs1tK8XD8CkhjTlpYGiSAA4LMQ84yr2qatPpD8uqPlFm55dIaBHLzPSZIPgksuls334CaW04MkcyKBOg6Au6znjH0EBtTSMbvn6NDzQ0HOUh+PofNjSzs3g7nOCwJsrnout0fTkR8qY2aAWSz2Qyn0ymHg8HS3NzMEwHDw8Nhh2fGhMBfUljcyexjcQSQjH0hqXz7Inmml3oJOBsHtDAzDYe3FfDz5ec6Z/RaS/YU4KHcxYgzi/DZmzA8dAZdl3uQnLEJ8YYEnNj0Ov7mvT34uLcaUhTJip88WWJWIKAIpyZC3ioHjR1JEZmdCImNZGTx4jiUXbWjMM0IA8lqxXUHD+hXpuoRr1Xil239fLGfINBEan9P7BQ4FQU+V3aOJc4+pVKBzu4+PLWpgI9/WPM5OTi6aVmYyDJ1XKvVchvIWNfa2gqbzYaYmBhcvHiRn3e5XOHMzyQb+U2A3PfudU7I3btXhMeYPczJSkOaRYNtOZnYW7A0bP8YsCWVsrQeICbOFEduLfg2nIONuHz8aZhxBUrVGJRuEZ3XDiHlwT/CGJuOfy3Yi7r/uIIRkmGFjxYnwLIItKi+CSC5LQy24TWakqbjqa/gcS45M0uTNBwoJpvH2x3cS348w8gX+Xib3P/+PTFw+wI41j7C+0voO9lcbt/tTjz+yHIUrs6Fj+59b/YCUpRR2Kk6yeFhVU92U6OO4naUybXb4+XjLHUXWZhkqlQqDhh7z7a2Np4AuHr1aohE4ViTpVfZpvxGQL5UeYfHkCxLFxlDMi/1Ur0cLx44Ws9ldlvOBLAhtvZ+SWbHHRhFa/VOpBvPw2RmwTUF/14JmsEm9NfthmH9CdwTfzcs0YkYcXXCz9ItBKKKHB+fT86weP3+PkLMEo4jg6yMBDEEZIgJbOdXbUjD65eHUHumD0PjPs7wJqsb/1TXh3aKU1MMKiwjb/bDNjtsJKkatYC3Hkrhc/kmXrscP3tmEy43dWJJlhyCMafnk3cO4sKVNlTXX+FMHbQ64HJ7OaCW+Bjk52by8cgyb948XkdGRnifAUjrzG0jT3oEgWN2NDIXq4w0ebMpDMTcXBZLFn9lnpUlAcoigC3Kz+GMZACHEgSRcaTH3g+97xY0qhiMkI0SfGQH6T112lj4XbcheEcxLkbD5RylhVaRrEaRnfSSp+oPhxIdbvezGqWyjEAyRUrWVCBd4+PSRbf79KaQTSL79/cUxtxf0SknSlmsfMUatmHLLDouq0eJrfPj1PjNymSYVBPuhdmkD4cgpz+7ircqqqEimd3+2Cqs/OtvIS87I3zt6JiLJxkYCMyeNkaYGZ5YINtYVVUVls6ysjJuGxn7WDl16hQHmkkua0MAh4H8lb0G+0wFM4PX0BBeBQZiza+2TEqaJ0eAGQpBJuUOYyZinpzkGHJyrNOeoY2ZB3XCGowOV0Cp0/HQQylEwT+ugHrOOrKLenz4+cfosfdCMJDdYZkZryh7qpKcXdnZ1VXBcg4/TkwUF2k0+00KxaNmhSJPIQiT/rLoaGv7/BeDgw+9HDGWpFOh5ckM/KFjBD+pv4MeZ5C19BOVMmiPLzDhlRXJaOwdxVxj9IR/8FE9zl9q5Uy7eq0LNvsoHz97oYXCEDOSE8xIosrklaX6HCNj6O4d4uHJ1MKcmhdeeAF2u5336+rqOOgh23jixAlcuXJlGiOFqX9jsfLpp59Kxz58jXutISCZB7Vq6WZsvdc0499Y1iDTmPe6sYAko09+cC8Ftb29cuBcUrQcyVoz8l+ZsJNmmhP+G2t0SLI1vg6l/QuI3jEEVBqoLQ9DsbgILT19+O4bu3BLHKDFoLCA7SOJZEZSQTpY86X+/TK9XvmEyfR30aK4MUWjyffpdM4NjY2RyaZpXgizsSPeAKxuOZwxq0Wyj360DpFtpsvvm6sPyypbwzXbn5eYTWS206jXUhCv4gLA7sOk1OX2kE1kGaEAv4Y5RVq6RqtR8+OP3vrnaX9jRXq1kvT1/0/8rwADAJ+LRelLmVNwAAAAAElFTkSuQmCC) !important;
}
#lleo_icons a:hover {
    opacity: 1 !important;
}
#lleo_icons a.lleo_google     {background-position:-34px 0 !important;}
#lleo_icons a.lleo_multitran  {background-position:-64px 0 !important;}
#lleo_icons a.lleo_lingvo     {background-position:-51px 0 !important; width: 12px !important;}
#lleo_icons a.lleo_dict       {background-position:-17px 0 !important;}
#lleo_icons a.lleo_linguee    {background-position:-81px 0 !important;}
#lleo_icons a.lleo_michaelis  {background-position:-98px 0 !important;}

#lleo_dialog #lleo_contextContainer {
    margin: 0 !important;
    padding: 3px 15px 8px 10px !important;
    background: #eee !important;
    background: -webkit-gradient(linear, left top, left bottom, from(#fff), to(#eee)) !important;
    background: -moz-linear-gradient(-90deg, #fff, #eee) !important;
    border-bottom: solid 1px #ddd !important;
    border-top-left-radius: 3px !important;
    border-top-right-radius: 3px !important;
    display: none !important;
    overflow: hidden !important;
}
#lleo_dialog .lleo_has_context #lleo_contextContainer {
    display: block !important;
}
#lleo_dialog #lleo_context {
    color: #444 !important;
    text-shadow: 1px 1px 0 #f4f4f4 !important;
    line-height: 12px !important;
    font-size: 11px !important;
    margin-left: 2px !important;
}
#lleo_dialog #lleo_context b {
    line-height: 12px !important;
    color: #000 !important;
    font-weight: bold !important;
    font-size: 11px !important;
}
/*#lleo_dialog #lleo_gBrand {
    color: #aaa !important;
    font-size: 10px !important;
    *//*padding-right: 52px !important;*//*
    padding-bottom: 14px !important;
    margin: -3px 4px 0 4px !important;
    background: left bottom url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAPCAYAAABJGff8AAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAcVSURBVHja3FZrbFTHFT4z97W++/KatfHGNrFjMNjFLQ24iiVIFBzCD1SFqj/aRlCUCvjRKlVatUFJVJJGNKUtoRVqgZZWKWCVOEqKQxsaUoypaWzclNgGI9sLtndZv9beh/d133ems3ZAvKTGkfqnZ3U1d++9M+d88535zkGUUsjbpl/PgixiEEz05aHLIzsjo9cwIrrEy4EA7ypLm8rMAX2q850cYGMtmoD3tKOgYwF0QDAUjcFwwoLG33ih5hkZIJwFGjMA8QDRaQuCIzb0ZtbCMe00oCRbwUIwU7EHwo4jYFs6VASWPb3cv+yP7SfO9RCNNFIByLMpB+ybKIRoLgeXZhKweYrAfzP+1h3CABY90n/unafCwSs/xJK7BfMOzVZjq2w92WJlbhyzLeWSyXuCTXgMOKDsh2Dhlp9HoF57DdzTX4H4kteh5iHtzcRo8ph9XQ+DwZFGJME+RQYq5b/99HYLjNch7gi2t35roOONNQX+mh4kF7GnGDjnA70sgCe0eG+tIlcGX3F0wwtSN+gqBwJGvEXBumdVti9ImB/vNcT2DQHBGriMBkh17QZH7dFCgetBbIcywOa9Cm4QecSYx3dsV3Nz8x3Ytm7dio4fP063bNmC4HZ3BWrqpyN950d5qaDHVqeA2gZw8mLgRA9YBCKGDR+8zF2E3eg8AOdoCFuo+YpitswiboAFtwvNb/qcaTmy5+qg3XwjQi7YBLUjBCXsmmMSIbrZUJKHBWr2muZYRyo0vSfWV+YkyMx/YTTZPDyBCh68QeAP/ap5WuX4fobrsZvB3z7mgdyXmeRUvEjTjE5O8gIlBmDRC2LRKigp8QClOSguRfCj0PcZatejHYb455ORxPZaEf5azaOXRET3ahQWUQk9r+fMjgOHVFvg6FN11dhbGYB+SuBaVud8HhHvGx88tT6RMp6JzXxhmZ6OrqfGwC98KyZT0excfPqLgs8R5jwdhyMTr22Q8W+9Dn4kTLi/s3fi3RzfZOa2hJi3gZCKBLnIxzmK2Mb7GRgPEGqBIIpQXl4OevVGeEt+EqDI/7v3QxPaoGa38hxn1RRwP17sdk/lOP67KpiPDX6YXXuxj758I4rSdVUQKSuGnU4ZPMkk3u3Skjsmr3V/bKszPQW+qiZPcSWxcvHtlpJJ2wyLm6DMGm9g54V4ungltj+u9chHuhRytU0hz88Rz8Qqn1J3j/cwkzF4Q3AvedhWoiyneeCdFWy2hU1d28YU5nFJkMUDeN17681gqUPJqH6OvRYlKA34wXR5O1EytDkXy2xi5wgFSpDM0p2RiMBVAmcWpYAmppOrr03FbVxY2+T2+WFJpQ/S4YgWSV8PIsEp2jr7HsAmNl7m0BVp2rbrT0TTb4YNu83xKXXmFjPsjJzmPVUyO/B7BV8dcAV+luGUnwr1jWcS0Wh8bORryvC7Femh/qElmCwu5ZHopDZjTgC5QMJjBNRYkrQWOimw1Pp6KdMP4mCIy0QlqWM6Ebp+fna8+3uUcwcKS1e0SJA7ef1fred8n1NfKFwqFCMm12lKudDw8PulShbnCC0ux7TtG4US7PDghYGxlcltQEiMd5bt4pyB/VhwA5aKDW9p/QfVdStPg5mBYZ1a/0yYO/xg05US6lhOdNlOxus+ikw29s5mfjadQJ1ZBf5dXQFbH6lHG3wcOIwkPnyqjUYsPXvI70dviCKDL8o0MtS/WbeLXi1cvdrSxLTTMgykPcDV/bwq027o6vgKgdtbJ6L9tRK31oXhyQVJM2MmTW2tiuiJvyB1+jvUSD+NJX+fDtLkR13dZZNXT13NYv5iO//g5U1a/7o4gV8FLTgRiqu5M+nULpuQoyYTpFSWNiTT8HtVh59Ajx0cGNazlwfg8/rqXyqLH9pW4ghNfns2HiWZWNx2V6zqivWHvho50zKk902eRYQzTnwRL60ds2r8YfLuoE2+KepGk0DooYaFgMnrP9PNLLXVx830iGzMXGpkuexVxMKJuGUErVQkgbAEBpkTlc4khS/N6hREU2PPWIlAedllVLNLN2H7xAyFmQSBVAbBbP1+sKufexRGPzw52vW34xZFe4Cil6TihzshLv4JTq5zEmfrBjYTwMRAWFQKhQ1X9HzRNKFeRAsrmncUNcQrFKG2ucrAOgOOF8BmopCvI+iTYpLPT475EBgCfJevPCieoyCxIxP2vQIZx7MQ0FKv9/VdELRc/DlP5UZwuIqgYNHSjYmBtzvpoOqSXI9k9eWd833FnJ/82vPx4IV2APcDBZ+pXflkYUxhXK+BsxOb2L8eiFLrHyq3ZI1nacNBuaT+oNPBs7oZfdFIDbeAhLOcUQZcrhwIGv3Mfnn4H1k+HMVwQTY1zdoelj6U/MA2ZmcBcVu0xOAazUiMqTN9Z3U1cRALMiBbuF9dXJjPm13z/4P9R4ABANu4bb16FOo4AAAAAElFTkSuQmCC) no-repeat !important;
    display: inline-block !important;
    float: right !important;
}
#lleo_dialog #lleo_gBrand.hidden {
    display: none !important;
}*/
#lleo_dialog #lleo_translateContextLink {
    color: #444 !important;
    text-shadow: 1px 1px 0 #f4f4f4 !important;
    background: -webkit-gradient(linear, left top, left bottom, from(#f4f4f4), to(#ddd)) !important;
    background: -moz-linear-gradient(-90deg, #f4f4f4, #ddd) !important;
    border: solid 1px !important;
    box-shadow: 1px 1px 0 #f6f6f6 !important;
    border-color: #999 #aaa #aaa #999 !important;
    -moz-border-radius: 2px !important;
	-webkit-border-radius: 2px !important;
	border-radius: 2px !important;
    padding: 0 3px !important;
    font-size: 11px !important;
    text-decoration: none !important;
    margin: 1px 5px 0 !important;
    display: inline-block !important;
    white-space: nowrap !important;
}
#lleo_dialog #lleo_translateContextLink:hover {
    background: #f8f8f8 !important;
}
#lleo_dialog #lleo_translateContextLink.hidden {
    visibility: hidden !important;
}

#lleo_dialog #lleo_setTransForm {
    display: block !important;
    margin-top: 3px !important;
    padding-top: 5px !important;
    /* Set position and background because the form might be overlapped by an image when no translations */
    position: relative !important;
    background: #fff !important;
    z-index: 10 !important;
    padding-bottom: 10px !important;
    padding-left: 16px !important;
}
#lleo_dialog .lleo-custom-translation {
    padding: 4px 5px !important;
    border: solid 1px #ddd !important;
	border-radius: 2px !important;
    width: 90% !important;
    min-width: 270px !important;
    background: -webkit-gradient(linear, 0 0, 0 20, from(#f1f1f1), to(#fff)) !important;
    background: -moz-linear-gradient(-90deg, #f1f1f1, #fff) !important;
	font: normal 13px Arial, Helvetica !important;
	line-height: 15px !important;
}
#lleo_dialog .lleo-custom-translation:hover {
    border: solid 1px #aaa !important;
}
#lleo_dialog .lleo-custom-translation:focus {
    background: #FFFEC9 !important;
}

#lleo_dialog *.hidden {
    display: none !important;
}

#lleo_dialog .infinitive{
    color: #D56E00 !important;
    text-decoration: none;
    border-bottom: 1px dotted #D56E00 !important;
}
#lleo_dialog .infinitive:hover{
    border: none !important;
}

#lleo_dialog .lleo_separator {
    height: 1px !important;
    background: #eee;
    margin-top: 10px !important;
    background: -webkit-linear-gradient(left, rgba(255,255,255,1) 0%,#eee 8%,rgba(255,255,255,1) 80%) !important;
    background: -moz-linear-gradient(left, rgba(255,255,255,1) 0%, #eee 8%, rgba(255,255,255,1) 80%) !important;
    background: -ms-linear-gradient(left, rgba(255,255,255,1) 0%,#eee 8%,rgba(255,255,255,1) 80%) !important;
    background: linear-gradient(to right, rgba(255,255,255,1) 0%,#eee 8%,rgba(255,255,255,1) 80%) !important;
}
#lleo_dialog #lleo_trans {
    /*border-top: 1px solid #eeeeee !important;*/
    padding: 5px 30px 0 14px !important;
    zoom: 1;
}

#lleo_dialog .lleo_clearfix {
	display: block !important;
	clear: both !important;
	visibility: hidden !important;
	height: 0 !important;
	font-size: 0 !important;
}


#lleo_dialog #lleo_picOuter table {
    width: 44px !important;
    position: absolute !important;
    right: 0 !important;
    top: 0 !important;
    vertical-align: middle !important;
}

#lleo_dialog #lleo_picOuter td {
    width: 38px !important;
    height: 38px !important;
    /*border: 1px solid #eeeeee !important;*/
    vertical-align: middle !important;
    text-align: center !important;
}

#lleo_dialog #lleo_picOuter td div {
	height: 38px !important;
	overflow: hidden !important;
}

#lleo_dialog .lleo_empty {
    margin: 0 5px 7px !important;
}

#lleo_youtubeExportBtn {
    margin-left: 10px;
    height: 24px;
}
    #lleo_youtubeExportBtn i {
        display: inline-block;
        width: 16px;
        height: 16px;
        background: 0 0 url(https://d144fqpiyasmrr.cloudfront.net/plugins/all/images/i16.png) !important;
    }
    #lleo_youtubeExportBtn .yt-uix-button-content {
        font-size: 12px;
        line-height: 2px;
    }


/*** Parsed Lyrics Content *****************************/

.lleo_lyrics tran {
    background: transparent !important;
    border-radius: 2px !important;
    text-shadow: none !important;
    cursor: pointer !important;
}
    .lleo_lyrics tran:hover {
        color: #fff !important;
        background: #C77213 !important;
        -webkit-transition: all 0.1s !important;
        -moz-transition: all 0.1s !important;
        -ms-transition: all 0.1s !important;
        -o-transition: all 0.1s !important;
        transition: all 0.1s !important;
    }

.lleo_songName {
    border: solid 1px #ffd47c;
    background: #fff1c2;
    border-radius: 2px;
}</style></head>

  <body><style type="text/css">#navbar .nav_panel .tab.tab_print:hover path,#navbar .nav_panel .tab.tab_print:hover text { fill: #00abeb; } </style>
    <div id="TMpanel">
  <div class="container">
    <div class="menu">
      <a href="http://tmfeed.ru/?utm_source=tm_habrahabr&utm_medium=tm_top_panel&utm_campaign=tm_promo">TM Feed</a>
      <a href="http://habrahabr.ru/?utm_source=tm_habrahabr&utm_medium=tm_top_panel&utm_campaign=tm_promo" class="current">Хабрахабр</a>
      <a href="http://megamozg.ru/?utm_source=tm_habrahabr&utm_medium=tm_top_panel&utm_campaign=tm_promo">Мегамозг</a>
      <a href="http://geektimes.ru/?utm_source=tm_habrahabr&utm_medium=tm_top_panel&utm_campaign=tm_promo">Geektimes</a>
      <a href="http://toster.ru/?utm_source=tm_habrahabr&utm_medium=tm_top_panel&utm_campaign=tm_promo">Тостер</a>
      <a href="http://brainstorage.me/?utm_source=tm_habrahabr&utm_medium=tm_top_panel&utm_campaign=tm_promo">Brainstorage</a>
      <a href="http://freelansim.ru/?utm_source=habrahabr&utm_medium=referral&utm_campaign=mainpage&utm_content=head_link">Фрилансим</a>
    </div>
      <div class="menu special"><a href="http://ad.adriver.ru/cgi-bin/click.cgi?sid=1&ad=515993&bt=21&pid=1917943&bid=3778789&bn=3778789&rnd=870000703" target="_blank" style="color: red">Работа в Intel</a><a href="http://ad.adriver.ru/cgi-bin/click.cgi?sid=1&ad=515412&bt=21&pid=1914775&bid=3829257&bn=3829257&rnd=923038699" target="_blank" style="color: black">Плюшки от Microsoft</a></div>
  </div>
</div>


    <div id="layout">
      <div id="navbar_overlay" class="hidden"></div>
<div id="navbar" style="bottom: 0px;" class="fixed">
    <div class="nav_panel">
        <a href="http://habrahabr.ru/" class="logo"></a>
            <a href="http://habrahabr.ru/users/smartbye/" class="tab tab_user" data-tab="user_tab" title="SmartBye">
                <img src="./tutorial_files/stub-user-middle.gif" alt="">
                <span class="count navbar_count_new_messages"></span>
            </a>
            <a href="http://habrahabr.ru/tracker/" class="tab tab_tracker" data-tab="tracker_tab" title="Трекер">
                <span class="g-icon g-icon-alarm"></span>
                <span class="count navbar_count_tracker_total">59</span>
            </a>

            <a href="http://habrahabr.ru/posts/" class="tab tab_menu" data-tab="menu_tab" title="Меню"><span class="g-icon g-icon-burger"></span></a>
                <a href="http://habrahabr.ru/topic/add" class="tab tab_add_post" title="Новая публикация"><span class="g-icon g-icon-write"></span></a>
            <a href="http://habrahabr.ru/auth/settings/profile/" class="tab tab_settings " data-tab="settings_tab" title="Настройки"><span class="g-icon g-icon-gear"></span></a>


        <a href="http://ad.adriver.ru/cgi-bin/click.cgi?sid=1&ad=511994&bt=21&pid=1890375&bid=3829148&bn=3829148&rnd=1702963146" class="tab tab_print tab_print_for_habrauser" id="print_tab" target="_blank" data-post-id="243471"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 600 600" enable-background="new 0 0 600 600" xml:space="preserve">
<path fill-rule="evenodd" clip-rule="evenodd" fill="#C0C0C0" d="M445.7,244.4c1,1.5,28.3,31.8,12.9,64.6
	c-14.4,30.3-80,94.4-82.5,97.4c-1,0.5-2,1-3.5,1c-0.5,0-1.5,0-2-0.5c-2-0.5-3-2.5-3-4.5l-1.7-64.1c-7.2,4.4-14.1,7-20.8,8
	c2,7,4,20.3,0.1,39.9c-2,10.1-8,14.6-12.4,16.2c-1.2,0.4-2.3,0.7-3.4,0.9c-3.2,7.2-25.1,51.4-60.2,56.7c-9.9,1.5-18.9,2-27.3,2.5
	c-20.4,1-36.3,2-58.6,18.2c-0.5,1-2,1-3,1c-1,0-1.5,0-2.5-0.5c-1.5-1-2.5-3-2.5-5l1.8-19.9L145,467.6c-0.5,0.5-1,0.5-1.5,0.5
	c-1.5,0-3-1-4-2c-1.5-2-1-4.5,0.5-6.1c25.8-29.8,24.9-53,23.9-80.3c-0.5-8.6-0.5-17.7,0-27.3c3-40.9,33.3-51,34.8-51
	c0.4-0.2,0.9-0.2,1.3-0.2c-1-3-1.7-5.8-1.8-8.4c-0.5-5.6,2-9.1,4-11.1c11.3-11.4,34.9-12,45.6-11.5c-1-7-0.3-14.5,2.2-22.8
	l-57.3,10.1c-1.5,0-2,0-2,0c-1.5,0-3-1-4-2c-1-1.5-1-4,0-5.6c2-3.5,50.2-81.8,76.5-102.5c25.1-19.7,55.6-5.7,63.3-1.5
	c50.2-38.1,100.3-33.3,100.7-33.3c9.9,1,17.4,7.6,17.9,7.6c0.5,0.4,0.9,1,1.2,1.6c2.5,2.5,7,7.5,9.2,14.5
	c0,0.4,15.3,49.5-10.9,107.4C445.1,244,445.4,244.1,445.7,244.4z M377.1,390.8c18.4-18.2,61.6-63.6,72.6-86.3
	c10.3-21.8-4.3-43.9-9.6-51.1c-4.7,8.8-10.3,17.8-17.2,26.8c-18,23.5-33.3,40.3-47.1,51.2L377.1,390.8z M201.2,311.1
	c-1,0.5-25.3,8.6-27.8,42.4c-0.5,9.1-0.5,17.7,0,26.3c1,22.7,1.5,46.5-15.9,73.2l21.3-7.8c1-1.4,2.6-2.2,4.5-1.8
	c0.1,0,0.2,0.1,0.3,0.1l33.5-12.2c2.5-1,5.5,0.5,6.5,3s-0.5,5.6-3,6.6l-33.1,11.7l-1.2,14c20.4-12.6,36.3-13.1,55.2-14.1
	c8-0.5,16.4-1,26.3-2.5c25.9-3.6,44.5-34.2,50.8-46.5c-25-3.9-57.9-30.3-65.7-36.3c-12.4-10.2-37.9-36.3-49.1-57.6
	C203.1,310.3,202.3,310.9,201.2,311.1z M209.1,288.9c0,0-1,1-1,3.5c0.5,15.1,31.3,50.5,51.2,67.2c24.9,20.7,57.2,38.9,70.1,33.8
	c2-1,5-2.5,6-8.6c4.1-21.7,0.4-34.4-1-38.2c-7.5-0.8-15-3.8-22.9-8.8c-4.2-2.8-7.9-5.3-11.3-7.7c-0.3-0.1-0.7-0.2-1.2-0.4
	c-0.3-0.3-4.9-3.1-13.9-10.7c-8.3-6.6-11.7-10.2-12-10.5c-0.3-0.3-0.4-0.6-0.5-0.9c-3-2.9-6.3-6.1-9.9-9.7
	c-5.5-5.6-9.5-11.2-12.1-17.3C241,279.8,218.2,280.1,209.1,288.9z M269.8,155.6c-19.9,15.1-54.2,68.2-68.1,89.9l52.2-9.1
	c0.1,0,0.2,0,0.4,0c7.5-16.6,21.1-36.3,41.4-60.6c7.1-8.6,14.5-16,21.9-22.5C307.5,149,286.6,142.5,269.8,155.6z M446.2,139.4
	c-1.6-5.3-5.8-9.6-7.4-11.1c0,0-0.1,0-0.1,0c0,0-6-4.5-12.9-5.6c-0.5,0-68.1-6.6-123.3,59.1c-59.6,71.2-49.7,91.9-33.3,108.6
	c7.9,8.2,14.4,14.3,19.6,18.9c5.7,4.7,14.8,11.7,28.2,20.5c12.5,8.1,26.3,13.3,49.5-3.8c0.6-0.9,1.4-1.6,2.6-1.9
	c12.3-9.6,27.2-25.3,45.8-49.8C466.6,206.1,446.2,140.4,446.2,139.4z M363.2,266.6c-8.9,0-17.4-3-24.4-8.6
	c-8-6.6-12.9-16.2-14.4-26.8c-1-10.6,2-20.7,8.4-28.8c7.5-9.1,18.4-14.6,30.3-14.6c8.9,0,17.4,3,24.4,8.6c8,6.6,12.9,16.2,14.4,26.8
	c1,10.6-2,20.7-8.4,28.8C386.1,261.1,375.1,266.6,363.2,266.6z M393,224.2c-1-7.6-4.5-14.6-10.4-19.7c-6-4.5-12.4-6.6-18.9-6.6
	c-8.9,0-16.9,4-22.4,11.1c-9.9,12.6-8,31.3,4.5,41.4c5,4,11.4,6.6,18.4,6.6c8.9,0,16.9-4,22.4-11.1
	C391.5,239.9,393.5,232.3,393,224.2z M203.7,367.1c-4,14.1-5,26.8-6,35.8c-1,8.6-1.5,14.1-3.5,18.2c-0.5,2-2.5,3-4,3
	c-1,0-1.5,0-2.5-0.5c-2.5-1.5-3-4.5-2-7.1c1-1.5,1.5-8.1,2-14.1c1-9.6,2.5-23.2,6.5-37.9c3-11.1,13.9-23.2,14.4-23.7c2-2,5-2,7,0
	c2,2,2,5,0,7.1C215.6,347.9,206.2,358,203.7,367.1z"></path>
</svg></a>

        <a href="http://habrahabr.ru/post/243471/#" class="scroll_to_up" id="scroll_to_top" title="Наверх"></a>
    </div>
    <div class="nav_tabs_content ">

        <div class="nav_tab hidden" id="menu_tab">
            <div class="title">Разделы</div>
            <form action="http://habrahabr.ru/search/" method="get" class="global_search_form">
                <div>
                    <input type="text" name="q" placeholder="Поиск">
                </div>
            </form>
            <div class="menu">
                <a href="http://habrahabr.ru/posts/top/">Публикации</a>
                <a href="http://habrahabr.ru/hubs/">Хабы</a>
                <a href="http://habrahabr.ru/companies/">Компании</a>
                <a href="http://habrahabr.ru/users/">Пользователи</a>
                <a href="http://toster.ru/" class="new_window">Q&amp;A</a>
                <a href="http://habrahabr.ru/sandbox/">Песочница</a>
                <a href="http://habrahabr.ru/exchange/">Биржа авторов</a>



            </div>

                

                        <div class="line"></div>
                        <div class="title">Спецпроекты</div>
                        <div class="menu">

                        <a href="http://ad.adriver.ru/cgi-bin/click.cgi?sid=1&ad=482836&bt=21&pid=1730497&bid=3502321&bn=3502321&rnd=124687018" target="_blank">AZURE бесплатно</a>

                        <a href="http://ad.adriver.ru/cgi-bin/click.cgi?sid=1&ad=506846&bt=21&pid=1853254&bid=3754276&bn=3754276&rnd=190963099" target="_blank">Простое SEO</a>

                        <a href="http://ad.adriver.ru/cgi-bin/click.cgi?sid=1&ad=521150&bt=21&pid=1948643&bid=3829267&bn=3829267&rnd=1368140591" target="_blank">Все в Ажуре</a>
                        </div>


        </div>

            <div class="nav_tab hidden" id="user_tab">
                <div class="title"><a href="http://habrahabr.ru/users/smartbye/">SmartBye</a></div>
                    <div class="text">У вас недостаточно кармы для голосования. <a href="http://habrahabr.ru/info/help/karma/">Как поднять карму?</a></div>
                <div class="menu">
                    <a href="http://habrahabr.ru/feed/">Моя лента</a>
                    <a href="http://habrahabr.ru/users/smartbye/">Мой профиль</a>
                    <a href="http://habrahabr.ru/users/smartbye/topics/">Мои публикации</a>
                    <a href="http://habrahabr.ru/users/smartbye/comments/">Мои комментарии</a>
                        <a href="http://habrahabr.ru/conversations/">Мои диалоги <span class="count navbar_count_new_messages"></span></a>
                    <a href="http://habrahabr.ru/users/SmartBye/favorites/">Моё избранное</a>
                </div>

                    

                            <div class="line"></div>
                            <div class="title">Спецпроекты</div>
                            <div class="menu">

                        <a href="http://ad.adriver.ru/cgi-bin/click.cgi?sid=1&ad=482836&bt=21&pid=1730497&bid=3502321&bn=3502321&rnd=124687018">AZURE бесплатно</a>

                        <a href="http://ad.adriver.ru/cgi-bin/click.cgi?sid=1&ad=506846&bt=21&pid=1853254&bid=3754276&bn=3754276&rnd=190963099">Простое SEO</a>

                        <a href="http://ad.adriver.ru/cgi-bin/click.cgi?sid=1&ad=521150&bt=21&pid=1948643&bid=3829267&bn=3829267&rnd=1368140591">Все в Ажуре</a>
                            </div>


            </div>
            <div class="nav_tab hidden" id="tracker_tab">
                <div class="title">Трекер</div>
                <div class="menu">
                    <a href="http://habrahabr.ru/tracker/">Публикации <span class="count navbar_count_tracker_posts">59</span></a>
                    <a href="http://habrahabr.ru/tracker/subscribers/">Подписчики <span class="count navbar_count_tracker_followers"></span></a>
                    <a href="http://habrahabr.ru/tracker/mentions/">Упоминания <span class="count navbar_count_tracker_mentions"></span></a>
                    <a href="http://habrahabr.ru/tracker/apps/">Приложения <span class="count navbar_count_tracker_apps"></span></a>
                </div>

                    

                            <div class="line"></div>
                            <div class="title">Спецпроекты</div>
                            <div class="menu">

                        <a href="http://ad.adriver.ru/cgi-bin/click.cgi?sid=1&ad=482836&bt=21&pid=1730497&bid=3502321&bn=3502321&rnd=124687018">AZURE бесплатно</a>

                        <a href="http://ad.adriver.ru/cgi-bin/click.cgi?sid=1&ad=506846&bt=21&pid=1853254&bid=3754276&bn=3754276&rnd=190963099">Простое SEO</a>

                        <a href="http://ad.adriver.ru/cgi-bin/click.cgi?sid=1&ad=521150&bt=21&pid=1948643&bid=3829267&bn=3829267&rnd=1368140591">Все в Ажуре</a>
                            </div>


            </div>
            <div class="nav_tab hidden" id="settings_tab">
                <div class="title">Настройки</div>
                <div class="menu">
                    <a href="https://habrahabr.ru/auth/settings/profile/">Профиль</a>
                    <a href="https://habrahabr.ru/auth/settings/account/" class="new_window">Аккаунт</a>
                    <a href="https://habrahabr.ru/auth/settings/privacy/">Приватность</a>
                    <a href="https://habrahabr.ru/auth/settings/notifications/">Уведомления</a>
                    <a href="https://habrahabr.ru/auth/apps/">Приложения</a>
                    <a href="https://habrahabr.ru/auth/settings/others/">Разное</a>
                    <a href="http://habrahabr.ru/logout/SmartBye/498235055/" class="exit">Выйти</a>
                </div>
            </div>

    </div>
</div>

      <div class="inner">
        

        

        
    <div class="user_header">

	<a class="avatar" href="http://habrahabr.ru/users/eliotik/"><img src="./tutorial_files/stub-user-middle.gif" alt="avatar"></a>
	<h2 class="username"><a href="http://habrahabr.ru/users/eliotik/">eliotik</a></h2>



	<div class="karma">
		<div class="label">карма</div>
		<div class="score">
				 
					<a href="http://habrahabr.ru/post/243471/#up" onclick="return karma_vote(this, 198466, 1, 1);" class="vote_plus " title="Повысить карму"></a>
				 

				<div class="num">30,0</div>

				 
					<a href="http://habrahabr.ru/post/243471/#down" onclick="return karma_vote(this, 198466, 1, -1);" class="vote_minus " title=" Понизить карму"></a>
				 
		</div>
		<div class="votes">32 голоса</div>
	</div>
	<div class="rating">
		<div class="label">рейтинг</div>
		<div class="num">3,0</div>
	</div>

					<!--a href="/users/SmartBye/mail/write/eliotik/sendmail/" class="send_mail" title="Написать письмо"></a-->
					<a href="http://habrahabr.ru/conversations/eliotik/" class="send_mail" title="Написать письмо"></a>


	<div class="clear"></div>
</div>

  <div class="content_left">
  	
<table class="menu">
    <tbody><tr>
        <td class="item ">
            <a href="http://habrahabr.ru/users/eliotik/"><span class="name">Профиль</span></a>
        </td>
        <td class="item  active">
            <a href="http://habrahabr.ru/users/eliotik/topics/"><span class="name">Публикации (<span class="count">2</span>)</span></a>
        </td>
        <td class="item ">
            <a href="http://habrahabr.ru/users/eliotik/comments/"><span class="name">Комментарии (<span class="count">6</span>)</span></a>
        </td>
        <td class="item ">
            <a href="http://habrahabr.ru/users/eliotik/favorites/"><span class="name">Избранное (<span class="count">33</span>)</span></a>
        </td>
    </tr>
</tbody></table>
<div class="submenu ">

</div>
<div class="clear"></div>



    <div class="post_show">
  	  
  <div class="post translation shortcuts_item" id="post_243471">
  	<div class="published">18 ноября 2014 в 01:45</div>  
    <h1 class="title">
	      
      


        <span class="post_title">[LibGDX] Создаем клон Flappy Bird — Zombie Bird</span>

			<span class="flag flag_translation">перевод</span>
			
			<span class="flag flag_tutorial" title="Обучающий материал">tutorial</span>
			
			

  	</h1>
  	
  	<div class="hubs">
		<a href="http://habrahabr.ru/hub/gdev/" class="hub " title="Вы не подписаны на этот хаб">Game Development</a><span class="profiled_hub" title="Профильный хаб">*</span>, 
		<a href="http://habrahabr.ru/hub/java/" class="hub " title="Вы не подписаны на этот хаб">JAVA</a><span class="profiled_hub" title="Профильный хаб">*</span>
</div>

  	
    <div class="content html_format">
      <img src="./tutorial_files/0d8a7f6e45cf481bac6c2a057877916b.png" hspace="8" vspace="8" align="left"> Доброго времени суток %username%. Не давно наткнулся на хороший туториал по созданию клона игры Flappy Bird используя LibGDX и этот туториал мне понравился своей простотой и детализацией.<br>
<br>
Я отдаю себе отчет, что тема создания клонов данной игрушки изъела себя, но возможно кому-то пригодится еще один хороший туториал. <br>
<br>
Туториал разбит на 12 дней, содержит множество картинок, полотен кода и исходный код разбит по дням. Кому интересно, добро пожаловать под кат.<br>
<a name="habracut"></a><br>
<a name="ContentList"></a><h1>Содержание</h1><hr><ol>
<li><a href="http://habrahabr.ru/post/243471/#Day1">День 1 — Flappy Bird — Глубокий анализ</a><br>
</li>
<li><a href="http://habrahabr.ru/post/243471/#Day2">День 2 — Подготавливаем и настраиваем libGDX</a><br>
</li>
<li><a href="./tutorial_files/tutorial.html">День 3 — Разбираемся с чем едят libGDX</a><br>
</li>
<li><a href="http://habrahabr.ru/post/243471/#Day4">День 4 — GameWorld, GameRenderer и Orthographic камера</a><br>
</li>
<li><a href="http://habrahabr.ru/post/243471/#Day5">День 5 — Полет мертвеца — Добавляем птицу</a><br>
</li>
<li><a href="http://habrahabr.ru/post/243471/#Day6">День 6 — Добавляем графические элементы — Добро пожаловать в Некрополис</a><br>
</li>
<li><a href="http://habrahabr.ru/post/243471/#Day7">День 7 — Трава, Птица и Труба с черепом</a><br>
</li>
<li><a href="http://habrahabr.ru/post/243471/#Day8">День 8 — Обнаружение коллизий и звуковые эффекты</a><br>
</li>
<li><a href="http://habrahabr.ru/post/243471/#Day9">День 9 — Завершаем Игровой процесс и базовый UI</a><br>
</li>
<li><a href="http://habrahabr.ru/post/243471/#Day10">День 10 — GameStates и Лучший результат</a><br>
</li>
<li><a href="http://habrahabr.ru/post/243471/#Day11">День 11 — Добавляем поддержку iOS/Android + SplashScreen, Меню и Tweening</a><br>
</li>
<li><a href="http://habrahabr.ru/post/243471/#Day12">День 12 — Конечный вариант UI и Исходный код</a><br>
</li>
</ol><br>
<br>
<a name="Day1"></a><h1><img src="./tutorial_files/4e55852eb2a04db2a1200c031304129c.png"> День 1 — Flappy Bird — Глубокий анализ</h1><hr><br>
Чтобы скопировать игру, мы должны отлично понимать ее логику, поведение. В этой секции мы разберем различные игровые механики и процессы Flappy Bird, чтобы мы могли сэмулировать игровой процесс достаточно точно.<br>
<br>
Я собираюсь определить и расписать каждый элемент игрового процесса. Конечно, это все довольно приблизительно и в целом я могу полностью ошибаться, но опять-таки, мы должны очень точно описать игровой процесс, чтобы наша эмуляция удалась. Если будут происходить какие-то серьезные изменения по ходу пъесы — я уведомлю о них.<br>
<br>
<h2>Все об игровом процессе — GamePlay</h2><br>
Чтобы повторить Flappy Bird или сделать даже лучше — нам стоит сфокусировать на геймплее. Два главных элемента геймплея, с которыми нам предстоит разобраться, это Птица и Трубы. Наша птица должна двигаться как Flappy Bird, а трубы должны генериться и двигаться как их зеленые «прародители».<br>
<br>
<h2>Птиц</h2><br>
<img src="./tutorial_files/4a2925ca64c148baa7b3c9c82a5d3f0f.png" hspace="8" vspace="8" align="left"> После быстрого анализа птицы, видно, что размеры оной 17 пикселей (ширина) х 12 пикселей (высота). Так же птичка использует всего 7 цветов и занимает всего 1/8 от ширины игрового экрана (на глаз ширина экрана примерно 135-136 пикселей). Так же птичка масштабируется, чтобы хорошо выглядеть на девайсах с различной шириной экрано. Еще у птицы есть три разные цветовые схемы, которые используется случайным образом.<br clear="all">
<br clear="all">
<h2>Физика птицы</h2><br>
Сложновато было поэксперементировать с физикой в этой игре без множества смертей, но в итоге я выяснил следующее:<br>
<ol>
<li>Во время падения — птица ускоряется.</li>
<li>Но есть ограничение — птица не может падать быстрее выставленного ограничителя.</li>
<li>Если тыкнуть по экрану — птица подпрыгнет на одно и тоже значение по высоте, вне зависимости от скорости падения.</li>
<li>Птица повернута в соответствующую сторону движения, т.е. падая — птица смотрит внизу, взлетая — вверх. Анимация (взмах крыльями) присутствует только когда птица летит вверх.</li>
</ol><br>
Нашей главной целью будет создание всего, и вся как можно близким к оригинальной игре. Весь геймплей зависит в основном от физики.<br>
<br>
<h2>Обнаружение коллизий</h2><br>
Какие условия смерти нашей птицы? Я без понятия как это было реализовао в ориганальной игре. Но из того что я вижу, проверка коллизий по пикселям — это наш вариант. Мы создадим «hit box» для нашей птицы, и будем использовать его для определения коллизий с трубами.<br>
<br>
Если сделать хит бокс слишком маленьким — игра будет очень легкой, а если большим, то люди будут злится из-за безосновательных смертей птички.<br>
<br>
<img src="./tutorial_files/b7eb2dd2c22541238e4db1cca28466fd.png" hspace="8" vspace="8" align="left"> Я сделаю хитбокс с помощью Rectangle. <br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<h2>Трубы</h2><br>
<img src="./tutorial_files/48b66be68b514538ba154763703d019f.png" hspace="8" vspace="8" align="left">Трубы, наверное, самая сложная часть которую нужно сделать должным образом, очень важно чтобы мы сделали все правильно.<br>
<br>
Большая часть привлекательности этой игрушки — ее сложность. Если сложность нашего клона каким-то образом будет не такой же как в ориганальной игре, не правильно расчитанная скорость или непоследовательно сгенерированы трубы, у игрока будет отрицательные эмоции от игры. Не будет эффекта: разочарование-награда-зависимость.<br>
<br>
В один момент времени мы должны генерировать 6 труб, в оригинальной игре никогда не видно более 6-ти труб. Трубы появляются с одним и тем же интервалом, так что растояние между трубами будет константой. Как только один набор труб скроется за левой границей экрана, мы переопределим высоту (подробнее — далее) труб и переместим их за правую границу экрана в правильное положение в очереди следующих труб.<br>
<br>
Пустое пространство между трубами имеет разную позицию по высоте, но всегда один и тот же размер. Самый легкий способ — это реализовать — мы будем смещать по Y трубу на случайное значение, когда происходит перемещение по Х. Когда мы доберемся до создания логики наших труб, я более детально изучу паттерн, действительно ли труба смещается на случайное значение и на сколько сдвиг может быть вверх и вниз.<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<h2>Анимации</h2><br>
Это невероятно простая игра. Статические элементы в ней — это задний фон и песок. Они никогда не меняются. Птица зафиксирована горизонтально, примерно 1/3 от ширины экрана. Трава(?) и трубы — это единственные элементы в игре которые необходимо скролить горизонтально, и они скролятся с одинаковой скоростью. Создать траву будет самым легким этапом, мы не будем обсуждать это тут.<br>
<br>
<h2>Проблема с разными размерами экрана</h2><br>
<img src="./tutorial_files/52c4f43458da4ca0832db733bca91fbe.png" hspace="8" vspace="8" align="left">На моем устройстве, птица отцентрирована вертикально (обратите внимание на красную линию на картинке слева). Смотря на это, я предположил, что игра растягивается равномерно вверх и вниз, так что размер (или соотношение) игрового пространства остается одним и тем же. <br>
<br>
Я протестировал игру на iPhone с экраном 3,5 дюйма, я полагаю, что игра была изначально сделана под этот размер, и размер игровой зоны был такой же как на картинке слева. Так что, мы реализуем поддержку различных размеров экрана по следующим принципам:<br>
<ul>
<li>Как стандарт для нашего приложения, мы будем использовать Retina iPhone с экраном 3,6 дюйма</li>
<li>Весь игровой процесс будет происходить в прямоугольнике, полученном из расчета используемого экрана</li>
<li>Размер Птицы — 17 пикселей (масштабируется пропорционально)</li>
<li>Ширина игры ~135 пикселей, пропорционально масштабируется (на коэффициент 4,75х на iPhone)</li>
<li>Высота игры будет изменятся взависимости от устройства, но высота игрового поля (где происходит весь игровой процесс) будет (960/640) * 135 = 203 пикселей.</li>
</ul><br>
<br>
<img src="./tutorial_files/4f355491bc81468cbcb05427325b49ca.png"> <a href="http://habrahabr.ru/post/243471/#ContentList">К Оглавлению</a><br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<a name="Day2"></a><h1><img src="./tutorial_files/4e55852eb2a04db2a1200c031304129c.png"> День 2 — Подготавливаем и настраиваем libGDX</h1><hr><br>
<img src="./tutorial_files/0d8a7f6e45cf481bac6c2a057877916b.png" hspace="8" vspace="8" align="left"> В этой секции, мы настроим фреймворк libGDX, который в целом будет выполнять за нас кучу низко-уровненых задач, так что мы сможешь больше сфокусироваться на игровом процессе.<br>
<br>
Перед тем как продолжить, посмотрите на Zombie Bird слева, творчество отдела художников Kilobolt. Zombie Bird — главный персонаж нашей игры. Как всегда, установка/настройка — самая скучная часть любого руководства. Спасибо команде libGDX, этот процесс быстрый и легкий! <br>
<br>
<h2>Установите Java, скачайте ADT</h2><br>
Если у васне установлена Java и у вас нет Eclipse с Android Development Tools, заходим <a href="http://www.kilobolt.com/day-3-the-development-machine.html">сюда</a> и устанавливаем их (прим. пер.: в рамках данного перевода — статья по указанной ссылке не будет переведена).<br>
<br>
<h2>Скачиваем libGDX и создаем проекты</h2><br>
LibGDX предоставляет кросс-платформенную разработку, так что мы пишем код единожды, а используем на множестве платформ. Это возможно благодаря архитектуре libGDX, у вас в наличии один главный Java проект, в котором вы пишите весь ваш первоклассный код (в частности используя разного рода интерфейсы).<br>
<br>
Чтобы настроить главный Java проект и вспомогательные проекты для каждоый из платформ — выполним действия по списку:<br>
<ol>
<li>Намите <a href="http://libgdx.badlogicgames.com/download.html">сюда</a>, чтобы скачать установку libGDX.<br>
<br>
</li>
<li>Как скачается, нужно будет установить одним из следующих способов:</li>
<li><ol>
<li>На Mac — попробуйте дважду кликнуть на jar файл.</li>
<li>На PC, скопируйте скачанный файл на рабочий стол и открой Терминал/Консоль. Наберите следующее:<br>
<pre><code class="bash">cd path_to_desktop
java -jar gdx-setup.jar
</code></pre><br>
</li>
</ol><br>
<br>
</li>
<li>Как только вы это проделаете, появится следующее окошко:<br>
<img src="./tutorial_files/17b1ba1a61e64f4abc88ef8da7942f00.png"><br>
<br>
</li>
<li>Введите информацию, указанную ниже (так она присутствует и на картинке выше), вы можете сменить путь к папке проекта на любой другой:<br>
<br>
<b>Name</b>: ZombieBird<br>
<b>Package</b>: com.kilobolt.zombiebird<br>
<b>Game class</b>: ZBGame<br>
<b>Destination</b>: Ваш выбор. Запомните только этот путь.<br>
<b>Android SDK</b>: Расположение <b>Android SDK</b>. Если вы используете ADT Bundle (<b>Android Developer Tools</b>: Eclipse + Android SDK) то <b>sdk</b> расположено внутри <b>adt-bundle</b> папки.<br>
<br>
Убедитесь, что проекты Desktop, Android, iOS и HTML выбраны, и отмените выбор всех Extensions (дополнительные классы с различной вспомогательной функкциональностью для libGDX).<br>
<br>
Данная инсталяция автоматически создаст 5 Java проектов в папке, путь к которой вы указали в параметре Destination. <b>Главный проект (core project)</b> — это проект где мы будет писать весь код для нашей игры. Android, iOS и HTML проекты получат доступ к нашему главному проекту и выполнять его со специфической для каждой платформы имплементацией, это нужно, чтобы наша игра работала на всех платформах.<br>
<br>
</li>
<li>Мы сгенерим Eclipse проект, нажав на Advanced и выбрав Eclipse<br>
<img src="./tutorial_files/77fca9f9709943f5b923a805df52e9de.png"><br>
<b>На заметку:</b> libGDX использует сборщик который называется Gradle. Этот сборщик автоматизирует сборку вашего проекта, управление .JAR зависимостями, а также упрощает совместную работу с другими людьми над проектом. Grandle — это отдельная большая тема, вам необходимо иметь опыт работы с такими сборщиками как Ant и Maven. Как-нибудь позже, мы возможно опубликуем статью о работе с Gradle, но не в рамках этой статьи.<br>
<br>
</li>
<li>Как только вы будете готовы, со словами «Понеслось!», нажмите кнопку Generate<br>
<br>
</li>
<li>Установщик скачает все необходимые файлы и сконфигурирует ваши проекты. Как только вы увидите следующее сообщение, вы можете закрыть Установщик.<br>
<img src="./tutorial_files/f874e744c875497c9d85dde657ff6759.png"><br>
<br>
</li>
<li>Теперь в папке, которую вы указали в настройках Установщика, появились 5 проектов, мы можем импортировать их в Eclipse. Откройте ваш Eclipse.<br>
<img src="./tutorial_files/0b7dde848fad4629846c63a07721d204.png"><br>
<br>
</li>
<li>Кликните правой кнопкой мышки в Package Explorer и выберите Import, как показано ниже.<br>
<img src="./tutorial_files/d7dfd75f8cac4e4bbd8ce06060a0765c.png"><br>
<br>
</li>
<li>Выберите General &gt; Existing Projects into Workspace<br>
<img src="./tutorial_files/ef85c2d4ceb6481e812df85e5af20e41.png"><br>
<br>
</li>
<li>Кликните на Browse правее от «select root directory»:<br>
<img src="./tutorial_files/d86a847758e644e2a16d2fd69470d17e.png"><br>
<br>
</li>
<li>Перейдите в папку проекта (путь который указывали на шестом шаге) и нажмите Open.<br>
<img src="./tutorial_files/1dc71b9006564a699e18fe0fd456400c.png"><br>
<br>
</li>
<li>Выберите все 5 проектов и нажмите «Finish»<br>
<img src="./tutorial_files/8dab606b108d473c87cca0e7a317cc2d.png"><br>
<br>
</li>
<li>Ну все, мы импортировали наши проекты в Eclipse и теперь мы готовы начать писать код.<br>
<br>
<b>Появились сообщения об ошибках? </b><br>
Если у вас Eclipse ругается на ошибки в ANDROID проекте, кликните правой кнопкой мышки на этом проекте, выберите Properties, кликниет Android и убедитесь, что у вас есть установленная версия Android. Если нет, кликните <a href="http://www.kilobolt.com/day-3-the-development-machine.html">сюда</a> и перейдите на шаг в котором написано:<br>
<b>II. Installing the Bundle: Eclipse/Android SDK/Eclipse ADT Plugin</b>,<br>
перед тем как продолжить с текущим уроком.<br>
<br>
</li>
<li>Чтобы убедиться, что у нас все верно настроено, откройте ZombieBird — desktop проект и перейдите в класс DesktopLauncher.java. Обновите его следующим образом:<br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.zombiebird.desktop;

<span class="keyword">import</span> com.badlogic.gdx.backends.lwjgl.LwjglApplication;
<span class="keyword">import</span> com.badlogic.gdx.backends.lwjgl.LwjglApplicationConfiguration;
<span class="keyword">import</span> com.kilobolt.zombiebird.ZBGame;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DesktopLauncher</span> {</span>
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main (String[] arg) {
        LwjglApplicationConfiguration config = <span class="keyword">new</span> LwjglApplicationConfiguration();
        config.title = <span class="string">"Zombie Bird"</span>;
        config.width = <span class="number">480</span>;
        config.height = <span class="number">320</span>;
        <span class="keyword">new</span> LwjglApplication(<span class="keyword">new</span> ZBGame(), config);
    }
}
</code></pre><br>
<br>
</li>
<li>Кликаем правой кнопкой мышки по desktop проекту, выбираем Run и выбираем класс DesktopLauncher,<br>
<img src="./tutorial_files/8c5ee78404274c83a9bca51047f2908b.png"><br>
если все верно, вы увидите следующее:<br>
<img src="./tutorial_files/2bbb6908b55b44e1876f82cd57699dc9.png"> <br>
<br>
</li>
<li>Если вы добрались до этого пункта — значит libGDX работает у вас корректно и мы можем продолжить дальше.</li>
</ol><br>
<br>
<img src="./tutorial_files/4f355491bc81468cbcb05427325b49ca.png"> <a href="http://habrahabr.ru/post/243471/#ContentList">К Оглавлению</a><br>
<br>
<br>
<a name="Day3"></a><h1><img src="./tutorial_files/4e55852eb2a04db2a1200c031304129c.png"> День 3 — Разбираемся с чем едят libGDX</h1><hr><br>
В данной секции мы создадим вспомогательные классы и методы которые будем использовать во время создания нашей игры. Но прежде чем начать писать код, вы должны быть в курсе следующих технических нюансов.<br>
<br>
libGDX используем лицензию Apache 2.0, которая позволяет вам свободно изменять и распространять код, с упоминанием автора оригинала. Все встроенные классы в libGDX имеют комментарий о лицензии Apache 2.0. Так как мы не собираемся в рамках данного урока модифицировать оригинальные файлы, а также файл с описанием лицензии включен уже в проект, нам не нужно беспокоиться о лицензии как таковой.<br>
<br>
Но на всякий случай ознакомьтесь с лицензией тут (данный файлик присутствует в проекте): <a href="http://www.apache.org/licenses/LICENSE-2.0.html">http://www.apache.org/licenses/LICENSE-2.0.html</a><br>
<br>
<h2>Базовая структура (как мы будем проектировать, а так же создавать нашу игру)</h2><br>
Давайте потратим не много времени и обсудим, как мы будем создавать нашу игру. Ниже приведена диаграмма, которая в целом отображает наш проект.<br>
<br>
<img src="./tutorial_files/66c58bce828f4f33904ade5fb7b914c0.png"><br>
<br>
Мы начнем работать с веткой ZBGame на диаграмме. Создадим Framework Helpers и Screen Classes (на диаграмме GameScreen).<br>
<br>
GameScreen зависит от двух вспомогательных классов: World и Renderer. World будет взаимодействовать с Gameplay классами и по ходу пъесы будет создать объекты нашей игры.<br>
<br>
Если все выше сказанное понятно — поехали дальше.<br>
<br>
<b>Внимание! Далее будет самая концептуально сложная часть во всем уроке.<br>
<br>
Но… вы можете ее пропустить. </b><br>
<br>
Можно вскольз просмотреть и попытаться понять максимум сколько сможете, задать вопросы и продолжить далее. Не задумывайтесь над данной частью урока, так как большая часть информации в данной секции — не важная. Нет смысла застопыриваться на не важных вещах.<br>
<br>
Если вас что-то озадачивает, пролистывайте смело далее к "<a href="http://habrahabr.ru/post/243471/#Day3WritingCodeFinally">Пишем код</a>" части. Мы все равно сможем создать нашу Zombie Bird игру.<br>
<br>
Чувствуете себя уверенным? Продолжайте читать. Нервничаете? Пролистайте далее.<br>
<br>
<h2>Расширяем и имплементируем (Можно пропустить)</h2><br>
Если вам необходимо освежить в памяти, что такое наследование, переходим <a href="http://www.kilobolt.com/day-10-inheritance-interface.html">сюда</a>.<br>
Напомню, что Interface — это список requirements, название методов без имплементации. Interface перечисляет список всех методов, которые какой то класс должен реализовать (предоставить описание метода, тело метода), в случае если этот класс должен стать такого же типа как Interface. Java библиотека содержит интерфейс с именем List, который сам по себе не предоставляет ни какой функциональности. Интерфейс List — это файл, в котором перечислены методы, которые другой класс должен реализовать, с целью быть причисленным к категории List объектов.<br>
<br>
Например, среди всех методов интерфейса List есть следующие:<br>
<ol>
<li>list.get(int index), который возвращает item с указанным index.</li>
<li>list.add(), который добавляет item в конец List.</li>
<li>list.isEmpty(), который возвращает true, если List пустой.</li>
</ol><br>
<br>
Давайте создадим новый класс, который назовем ArrayList. Данный класс имплементирует интерфейс List, т.е. он должен реализовать все методы интерфейса List, такие как list.add() и list.get(int index). <br>
<br>
После того как мы добавим реализацию методов интерфейса List в класс ArrayList, наш класс может образаться к себе как-будто бы он класс List, как показано ниже:<br>
<pre><code class="java">List&lt;String&gt; strings = <span class="keyword">new</span> ArrayList&lt;String&gt;();
</code></pre><br>
Заметьте, что переменная strings типа List, была созданна как ArrayList. Т.е. данная переменная может вести себя как List или как ArrayList взависимости от ваших нужд.<br>
<br>
Так как мы знаем, что strings — это реализация интерфейса List, мы можем быть уверены, что strings содержит все методы данного интерфейса. Благодаря этому, если нам когда-то понадобится передать в какой-то метод объект типа List, мы смело сможем передать наш объект типа ArrayList с именем strings (полиморфизм).<br>
<pre><code class="java"><span class="keyword">public</span> <span class="keyword">void</span> printLastWordFrom(List&lt;String&gt; someList) {
    
    <span class="keyword">if</span> (someList.isEmpty()) {
        System.out.println(<span class="string">"Your list is empty."</span>);
        <span class="keyword">return</span>;
    }

    String lastWord = someList.get(someList.size() - <span class="number">1</span>));
    System.out.println(<span class="string">"Your last word is"</span> + lastWord);
}
</code></pre><br>
Эти принципы необходимо знать и понимать, так как далее мы будем использовать их в процессе разработки.<br>
<br>
<h2>Соглашения используемые в данном туториале (Важно прочитать!)</h2><br>
В уроке будет несколько раз встречаться упоминание встроенных классов в бибилиотеку libGDX, к примеру класс Game приведенный ниже. Данные классы встроенны в библиотеку и вам НЕ НАДО писаь их самостоятельно. Просто ссылайтесь на класс который я упомяну. Все эти классы под лицензией Apache 2.0, все авторы перечислены тут: <a href="https://github.com/libgdx/libgdx/blob/master/gdx/AUTHORS">https://github.com/libgdx/libgdx/blob/master/gdx/AUTHORS</a>.<br>
<br>
Для встроенных классов я буду в заголовке кода, в комментарии писать Built-in.<br>
<br>
Просмотрите класс Game ниже, не надо его копировать или перенабирать, просто вскольз просмотрите его.<br>
<div class="spoiler spoiler_open"><b class="spoiler_title">Game Class</b><div class="spoiler_text" style="display: block;"><pre><code class="java"><span class="comment">//Built-in</span>

<span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Game</span> <span class="keyword">implements</span> <span class="title">ApplicationListener</span> {</span>
    <span class="keyword">private</span> Screen screen;

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> dispose () {
        <span class="keyword">if</span> (screen != <span class="keyword">null</span>) screen.hide();
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> pause () {
        <span class="keyword">if</span> (screen != <span class="keyword">null</span>) screen.pause();
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> resume () {
        <span class="keyword">if</span> (screen != <span class="keyword">null</span>) screen.resume();
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> render () {
        <span class="keyword">if</span> (screen != <span class="keyword">null</span>) screen.render(Gdx.graphics.getDeltaTime());
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> resize (<span class="keyword">int</span> width, <span class="keyword">int</span> height) {
        <span class="keyword">if</span> (screen != <span class="keyword">null</span>) screen.resize(width, height);
    }

    <span class="javadoc">/** Sets the current screen. {<span class="javadoctag">@link</span> Screen#hide()} is called on any old screen, and {<span class="javadoctag">@link</span> Screen#show()} is called on the new
     * screen, if any.
     * <span class="javadoctag">@param</span> screen may be {<span class="javadoctag">@code</span> null}
     */</span>
    <span class="keyword">public</span> <span class="keyword">void</span> setScreen (Screen screen) {
        <span class="keyword">if</span> (<span class="keyword">this</span>.screen != <span class="keyword">null</span>) <span class="keyword">this</span>.screen.hide();
        <span class="keyword">this</span>.screen = screen;
        <span class="keyword">if</span> (<span class="keyword">this</span>.screen != <span class="keyword">null</span>) {
            <span class="keyword">this</span>.screen.show();
            <span class="keyword">this</span>.screen.resize(Gdx.graphics.getWidth(), Gdx.graphics.getHeight());
        }
    }

    <span class="javadoc">/** <span class="javadoctag">@return</span> the currently active {<span class="javadoctag">@link</span> Screen}. */</span>
    <span class="keyword">public</span> Screen getScreen () {
        <span class="keyword">return</span> screen;
    }
}
</code></pre><br>
</div></div><br>
<h2>Исследуем класс Game (Можно пропустить)</h2><br>
Класс Game — это реализация интерфейса ApplicationListener, данный класс будет интерфейсом между нашим кодом и платформо-зависимым приложением, которое будет запускаться непосредственно на устройстве.<br>
<br>
Например, когда Android запускает наш app, он будет проверит на наличие ApplicationListener. Мы со своей стороны может предоставить Game объект который реализует необходимый интерфейс.<br>
<br>
Есть только маленькая особенность. Заметьте, что класс Game — абстрактный. Это значит, что класс Game реализует далеко не все методы из интерфейса ApplicationListener и нам придется сами это сделать.<br>
<br>
Мы можем скопировать содержимое класса Game и реализовать отсутствующие методы, не хватает только метода create(). Но, чтоюбы этого не делать, мы создадим свой класс который наследует класс Game.<br>
<br>
Наследование куда проще вещь, чем реализация интерфейсов. Мы просто берем абстрактный класс Game и создаем саб-класс, который наследует все публичные методы и переменные из класса Game, как будто бы они часть нашего саб-класса. И далее мы можем добавить наши собственные методы в наш саб-класс.<br>
<br>
Давайте создадим наш класс.<br>
<br>
<a name="Day3WritingCodeFinally"></a><h2>Пишем код! (Наконецто!)</h2><br>
<img src="./tutorial_files/77acc96dbdd9447387baebedf2268ab0.png" hspace="8" vspace="8" align="left"> Откройте ZBGame.java который мы создали во время второго дня. Удалите все методы и все переменные внутри класса. Ваш код теперь должен выглядеть так:<br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.zombiebird;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ZBGame</span> {</span>

}
</code></pre><br>
<br>
<br>
<h2>Расширим класс Game</h2><br>
Мы собираемся расширить базовый класс Game, который будет мостом между нашим кодом и плафтормо-независимым кодом (на iOS, Android и т.д.).<br>
<br>
<ol>
<li>Добавьте extends Game</li>
<li>Добавьте следующий импорт:<br>
import com.badlogic.gdx.Game;<br>
</li>
</ol><br>
<br>
Импорт — означает следующее: «Эй, Компилятор, вот тебе полный адрес к классу Game на который я ссылаюсь». Необходимо это сделать, потому как может присутствовать множество классов с именем Game, и мы хотим указать какой именно класс с именем Game использовать.<br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.ZombieBird;
<span class="keyword">import</span> com.badlogic.gdx.Game;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ZBGame</span> <span class="keyword">extends</span> <span class="title">Game</span> {</span>

}
</code></pre><br>
Eclipse выдаст следующее предупреждение:<br>
<img src="./tutorial_files/58b76c4a75a64d76af6f9eff870ae1fc.png"><br>
<br>
Это означает, что для того, чтобы наш класс ZBGame смог стать классом Game, существует требование: наш класс должен реализовать метод create(). Просто кликните на «Add unimplemented methods,» и этот методо автоматически добавится в наш класс. Давайте добавим строчку кода в наш новый метод:<br>
<br>
(На заметку, мы будем использовать Gdx.app.log вместо System.out.println(). Метод Gdx.app.log используется для вывода значений в консоль, и данный метод реализован под каждую платформу по-своему (на Android, этот метод будет использовать Log класс. На Java, он использует System.out.println(). В роли параметров для этого метода могут быть имя класса и тело сообщения)).<br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.zombiebird;

<span class="keyword">import</span> com.badlogic.gdx.Game;
<span class="keyword">import</span> com.badlogic.gdx.Gdx;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ZBGame</span> <span class="keyword">extends</span> <span class="title">Game</span> {</span>
    
    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> create() {
        Gdx.app.log(<span class="string">"ZBGame"</span>, <span class="string">"created"</span>);
    }
}
</code></pre><br>
<br>
<h2>Давайте не много сбавим обороты на пару минут...</h2><br>
Для чего нам надо, чтобы наш класс ZBGame был объектом типа Game?<br>
<br>
<b>Причина #1</b>:<br>
Как я ранее упоминал, libGDX прячет от нас реализацию платформо-зависимого кода. Весь код, который мы должны были бы написать для iOS/Android/HTML/Windows/Mac уже написан за нас. Как разработчики игры, мы должны позаботится о нашей бизнес логике, и мы делаем это создав ApplicationInterface.<br>
<br>
Расширяя класс Game (саб-класс ApplicationInterface), ZBGame становится интерфейсом между нашим кодом и платформой на которой будет работать наше приложение. Теперь весь код за сценой для Android, iOS, HTML и т.д. может общаться с нашим классом ZBGame и творить чудеса вместе.<br>
<br>
<b>Причина #2</b>:<br>
В дополнение к выше сказанному, ZBGame получает доступ ко всем полезным методам из класса Game (пролистайте выше, если запамятовали).<br>
В общем то, это относится к первой причине. Эти методы будут дергаться кроссплатформенным кодом.<br>
<br>
Теперь, когда мы запустим наше приложение на одной из платформ, кроссплатформенный код запустит метод create(), и «created.» выведется в консоли.<br>
<br>
<b>Давайте разберемся, что все это значит.</b><br>
Мы собираемся создать наш первый Screen (который в дальнейшем станет нашим GameScreen из диаграммы) и используем его в ZBGame.<br>
<br>
<h2>Создание GameScreen</h2><br>
Кликните правой кнопкой мышки на папке src внутри главного (CORE) проекта ZombieBird и создайте новый Java пакет с именем com.kilobolt.screens.<br>
<br>
Внутри него, создайте новый класс и импортируйте Screen класс:<br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.screens;

<span class="keyword">import</span> com.badlogic.gdx.Screen;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameScreen</span> <span class="keyword">implements</span> <span class="title">Screen</span> {</span>

}
</code></pre><br>
Мы дожлны реализовать методы из интерфейса Screen. Вы можете использовать авто-генерацию (как мы уже делали в ZBGame) нажав на «Add unimplemented methods,» или добавить методы как я это сделал ниже. Добавьте в каждый метод Gdx.app.log():<br>
<div class="spoiler spoiler_open"><b class="spoiler_title">GameScreen</b><div class="spoiler_text" style="display: block;"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.screens;

<span class="keyword">import</span> com.badlogic.gdx.Gdx;
<span class="keyword">import</span> com.badlogic.gdx.Screen;
<span class="keyword">import</span> com.badlogic.gdx.graphics.GL20;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameScreen</span> <span class="keyword">implements</span> <span class="title">Screen</span> {</span>
    
    <span class="keyword">public</span> GameScreen() {
        Gdx.app.log(<span class="string">"GameScreen"</span>, <span class="string">"Attached"</span>);
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> render(<span class="keyword">float</span> delta) {
        <span class="comment">// Sets a Color to Fill the Screen with (RGB = 10, 15, 230), Opacity of 1 (100%)</span>
        Gdx.gl.glClearColor(<span class="number">10</span>/<span class="number">255.0</span>f, <span class="number">15</span>/<span class="number">255.0</span>f, <span class="number">230</span>/<span class="number">255.0</span>f, <span class="number">1</span>f);
        <span class="comment">// Fills the screen with the selected color</span>
        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> resize(<span class="keyword">int</span> width, <span class="keyword">int</span> height) {
        Gdx.app.log(<span class="string">"GameScreen"</span>, <span class="string">"resizing"</span>);
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> show() {
        Gdx.app.log(<span class="string">"GameScreen"</span>, <span class="string">"show called"</span>);
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> hide() {
        Gdx.app.log(<span class="string">"GameScreen"</span>, <span class="string">"hide called"</span>);     
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> pause() {
        Gdx.app.log(<span class="string">"GameScreen"</span>, <span class="string">"pause called"</span>);        
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> resume() {
        Gdx.app.log(<span class="string">"GameScreen"</span>, <span class="string">"resume called"</span>);       
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> dispose() {
        <span class="comment">// Leave blank</span>
    }

}
</code></pre><br>
</div></div><br>
<br>
<h2>Добавим использование GameScreen в наш ZBGame класс</h2><br>
Сделаем наш текущий screen в классе ZBGame объектом класса GameScreen, который мы только, что создали. Для этого вернемся в файл ZBGame.java.<br>
<ol>
<li>Добавим следующее в метод create():<br>
<pre><code class="java">setScreen(<span class="keyword">new</span> GameScreen());
</code></pre><br>
На заметку: Метод setScreen() доступен благодаря наследованию!<br>
<br>
</li>
<li> Импортируем класс GameScreen:<br>
<pre><code class="java"><span class="keyword">import</span> com.kilobolt.screens.GameScreen;
</code></pre><br>
</li>
</ol><br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.zombiebird;

<span class="keyword">import</span> com.badlogic.gdx.Game;
<span class="keyword">import</span> com.badlogic.gdx.Gdx;
<span class="keyword">import</span> com.kilobolt.screens.GameScreen;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ZBGame</span> <span class="keyword">extends</span> <span class="title">Game</span> {</span>
    
    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> create() {
        Gdx.app.log(<span class="string">"ZBGame"</span>, <span class="string">"created"</span>);
        setScreen(<span class="keyword">new</span> GameScreen());
    }
}
</code></pre><br>
<br>
Теперь мы можем запустить нашу игру (для этого, как всегда, перейдем в проект ZombieBird — desktop и выполним DesktopLauncher). Вы увидите красивое синее окно.<br>
<br>
Гляньте, что у нас вывелось в консоль:<br>
<img src="./tutorial_files/9e42f8401a8d4e608625810171c21f71.png"><br>
<br>
Я понимаю, что это был не самый крутой урок, но пожалуйста, потратьте еще не много времени, и просмотрите ваш код, пройдя по всем строкам.<br>
<br>
Важной вещью является то, что мы не вызываем эти методы сами. Мы предоставили эту работу libGDX сделать за нас.<br>
<br>
Очень важно, чтобы вы понимали порядок выполнения каждого метода, так, что мы сможем создавать объекты в правильном отрезке времени и плавные переходы в нашей игре.<br>
<br>
Если вы готовы, поехали дальше. В следующей части, мы начнем создавать игровой процесс.<br>
<br>
<h2>Исходный код за день</h2><br>
Если вы вне настроения писать код самостоятельно, скачайте его отсюда:<br>
<img src="./tutorial_files/e273ed1a4ed342abb148c53ad824d8f3.png" hspace="4" vspace="4" align="left"><a href="http://www.kilobolt.com/uploads/1/2/5/7/12571940/zombiebird_day_3.zip">zombiebird_day_3.zip</a><br>
<br>
<br>
<br>
<img src="./tutorial_files/4f355491bc81468cbcb05427325b49ca.png"> <a href="http://habrahabr.ru/post/243471/#ContentList">К Оглавлению</a><br>
<br>
<br>
<br>
<br>
<br>
<br>
<a name="Day4"></a><h1><img src="./tutorial_files/4e55852eb2a04db2a1200c031304129c.png"> День 4 — GameWorld, GameRenderer и Orthographic камера</h1><hr><br>
Добро пожаловать в Четвертый День! В данной секции, мы создадим два вспомогательных класса для нашего GameScreen, так, что мы сможем приступить к созданию игрового процесса. После мы добавим orthographic камеру и несколько фигур в нашу игру!<br>
<br>
<h2>Быстрая напоминалка</h2><br>
У нас пять Java проектов, которые мы сгенерировали используя libGDX установщик. Но в целом мы будем использовать только три из них во время создания нашей игры:<br>
<ol>
<li>Если я прошу вас открыть класс или создать новый пакет, сделайте это в рамках проекта ZombieBird.</li>
<li>Если я прошу запустить проект, вы откроете ZombieBird-desktop проект и выполните класс DesktopLauncher</li>
<li>Если нам надо добавить картинки или звуки, мы добавим их в ZombieBird-android проект в папку assets. Все остальные проекты получат копию содержимого этой папки.</li>
</ol><br>
<br>
<h2>Исследуем класс GameScreen</h2><br>
Запустите Eclipse и откройте класс GameScreen. В третьем дне, мы обсуждали, как и когда каждый из методов этого класса запускается. Давайте внесем мелкие изменения в этот класс. Посмотрите на метод render(). У него один аргумент delta, тип float. Чтобы понять зачем он нужен, добавим в метод следующую строчку: <b>Gdx.app.log(«GameScreen FPS», (1 / delta) + " ");</b>:<br>
<pre><code class="java"><span class="annotation">@Override</span>
<span class="keyword">public</span> <span class="keyword">void</span> render(<span class="keyword">float</span> delta) {
    <span class="comment">// установим цвет бэкграцнда нашего экрана (RGB = 10, 15, 230), с прозрачностью 1 (100%)</span>
    Gdx.gl.glClearColor(<span class="number">10</span>/<span class="number">255.0</span>f, <span class="number">15</span>/<span class="number">255.0</span>f, <span class="number">230</span>/<span class="number">255.0</span>f, <span class="number">1</span>f);

    <span class="comment">// заполним экран указанным цветом</span>
    Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);

    <span class="comment">// выведем в консоль количество кадров в секунду</span>
    Gdx.app.log(<span class="string">"GameScreen FPS"</span>, (<span class="number">1</span>/delta) + <span class="string">""</span>);
}
</code></pre><br>
Попробуйте запустить игру (DesktopLauncher.java внутри вашего desktop проекта). Вы увидите следующее:<br>
<div style="text-align:center;"><img src="./tutorial_files/f280fe99ad1845568a91de83b8ddb23a.png"></div><br>
<br>
Float <b>delta </b>это количество секунд (обычно очень маленькое значение) которое прошло после последнего запуска метода render. Когда я попросил вас вывести в консоль значение 1/delta, это означало вывести сколько раз метод render будет вызван в течении одной секунды. Это значение равнозначно нашему FPS.<br>
<br>
Такс, думаю теперь ясно, что наш метод <b>render </b> можно расценивать как наш <b>игровой цикл</b>. А в игровом цикле, мы будем делать две вещи:<br>
<br>
Во-первых, мы будем обновлять все наши игровые объекты. Во-вторых, мы будет отрисовывать эти объекты.<br>
<br>
Чтобы использовать ООП принципы и патерны проектирования, мы должны следовать следующим принципам:<br>
<ol>
<li>GameScreen должен делать <b>одну вещь</b>, так что… </li>
<li>Обновление игровых объектов должно лежать на плечах <b>вспомогательного класса</b>.</li>
<li>Отрисовка игровых объектов должно входить в обязанности <b>другого вспомогательного класса</b>.</li>
</ol><br>
<br>
Хорошо! Нам нужны два вспомогательных класса. Мы дадим им наглядные имена: <b>GameWorld </b>и <b>GameRenderer</b>.<br>
Создайте новый пакет с именем <b>com.kilobolt.gameworld</b> и в нем создайте эти два класса. Оставим на время их пустыми:<br>
<table>
<tbody><tr>
<td><b>GameWorld.java</b><br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.gameworld;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameWorld</span> {</span>

}
</code></pre><br>
</td>
<td><b>GameRenderer.java</b><br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.gameworld;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameRenderer</span> {</span>

}
</code></pre><br>
</td>
</tr>
</tbody></table><br>
<br>
В нашем <b>GameScreen</b>, мы делегируем <b>обновление </b>и <b>отрисовку </b>нашим классам GameWorld и GameRenderer, соответственно. Чтобы это провернуть, сделаем следующее:<br>
<ol>
<li>Во время создания GameScreen, мы должны создать два новых объекта типа GameWorld и GameRenderer. </li>
<li>Внутри <b>render </b>метода класса GameScreen, мы должны запросить выполнить <b>обновление </b>и <b>отрисовку </b>у классов GameWorld и GameRenderer соответственно.</li>
</ol><br>
<br>
Я попрошу вас сейчас сделать это самостоятельно, если вы застрянете на этом — пролистайте ниже.<br>
<br>
<h2>1. Создание GameWorld и GameRenderer</h2><br>
Откройте GameScreen. Мы создадим объекты GameWorld и GameRenderer в конструкторе класса. Их методы мы будем вызывать в методе render(). Чтобы это сделать:<br>
<ul>
<li>Нам нужны две переменные для экземляров объектов (эти переменные должны быть доступны где угодно внутри нашего класса). Объявите следующее в заголовке нашего класса:<br>
<pre><code class="java"><span class="keyword">private</span> GameWorld world;
<span class="keyword">private</span> GameRenderer renderer;
</code></pre><br>
</li>
<li> GameScreen создан в конструкторе. Добавьте следующие строчки внутрь нашего конструктора, чтобы инициализировать наши переменные:<br>
<pre><code class="java">world = <span class="keyword">new</span> GameWorld(); <span class="comment">// initialize world</span>
renderer = <span class="keyword">new</span> GameRenderer(); <span class="comment">// initialize renderer</span>
</code></pre><br>
</li>
<li>Добавьте необходимые иморты:<br>
<pre><code class="java"><span class="keyword">import</span> com.kilobolt.gameworld.GameRenderer;
<span class="keyword">import</span> com.kilobolt.gameworld.GameWorld;
</code></pre><br>
</li>
</ul><br>
<br>
<h2>2. Запросим GameWorld обновиться и GameRenderer отрисовать</h2><br>
Вся суть наличия классов <b>GameWorld </b>и <b>GameRenderer</b> в том, что <b>GameScreen </b>не должен делать обновления и отрисовку самолично. Он может запросить наши вспомогательные классы сделать это за него.<br>
<br>
Замените весь код в методе render на следующий:<br>
<pre><code class="java"><span class="comment">// Мы передаем delta в update метод, для того, чтобы мы могли сделать фреймо-зависимые вычисления</span>
world.update(delta); <span class="comment">// GameWorld updates </span>
renderer.render(); <span class="comment">// GameRenderer renders</span>
</code></pre><br>
<br>
Ваш GameScreen должен теперь выглядеть так:<br>
<div class="spoiler"><b class="spoiler_title">GameScreen.java</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.screens;

<span class="keyword">import</span> com.badlogic.gdx.Gdx;
<span class="keyword">import</span> com.badlogic.gdx.Screen;
<span class="keyword">import</span> com.badlogic.gdx.graphics.GL20;
<span class="keyword">import</span> com.kilobolt.gameworld.GameRenderer;
<span class="keyword">import</span> com.kilobolt.gameworld.GameWorld;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameScreen</span> <span class="keyword">implements</span> <span class="title">Screen</span> {</span>
    
    <span class="keyword">private</span> GameWorld world;
    <span class="keyword">private</span> GameRenderer renderer;
    
    <span class="keyword">public</span> GameScreen() {
        Gdx.app.log(<span class="string">"GameScreen"</span>, <span class="string">"Attached"</span>);
        world = <span class="keyword">new</span> GameWorld();
        renderer = <span class="keyword">new</span> GameRenderer();
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> render(<span class="keyword">float</span> delta) {
        world.update(delta);
        renderer.render();
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> resize(<span class="keyword">int</span> width, <span class="keyword">int</span> height) {
        
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> show() {
        Gdx.app.log(<span class="string">"GameScreen"</span>, <span class="string">"show called"</span>);
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> hide() {
        Gdx.app.log(<span class="string">"GameScreen"</span>, <span class="string">"hide called"</span>);     
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> pause() {
        Gdx.app.log(<span class="string">"GameScreen"</span>, <span class="string">"pause called"</span>);        
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> resume() {
        Gdx.app.log(<span class="string">"GameScreen"</span>, <span class="string">"resume called"</span>);       
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> dispose() {
        <span class="comment">// Оставьте пустым</span>
    }

}
</code></pre><br>
</div></div><br>
Eclipse ругнется что у вас не объявлены методы update в <b>GameWorld </b>и render в <b>GameRenderer</b>. Давайте сделаем это:<br>
<table>
<tbody><tr>
<td><b>GameWorld</b><br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.gameworld;

<span class="keyword">import</span> com.badlogic.gdx.Gdx;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameWorld</span> {</span>
    
    <span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {
        Gdx.app.log(<span class="string">"GameWorld"</span>, <span class="string">"update"</span>);
    }
}
</code></pre><br>
</td>
<td><b>GameRenderer</b><br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.gameworld;

<span class="keyword">import</span> com.badlogic.gdx.Gdx;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameRenderer</span> {</span>

    <span class="keyword">public</span> <span class="keyword">void</span> render() {
        Gdx.app.log(<span class="string">"GameRenderer"</span>, <span class="string">"render"</span>);
    }
}
</code></pre><br>
</td>
</tr>
</tbody></table><br>
<br>
Попробуйте запустить игру (<b>DesktopLauncher </b>класс в desktop проекте).<br>
<b>Внимание</b>: ваша игра может мерцать (мы ведь ничего не рисуем).<br>
<br>
В консоли мы увидим следующее:<br>
<img src="./tutorial_files/e4b7f5818c1748e1a2cbf8eb0924c35e.png"><br>
<br>
Великолепно. Подведем итоги, что мы сделали: мы делегировали два задания (обновление и отрисовку игры), так что наш <b>GameScreen </b>не должен беспокоиться об этом. Давайте глянем опять на нашу диаграмму (вы видите, где мы сейчас?):<br>
<div style="text-align:center;"><img src="./tutorial_files/0fa0f767c2b94d0dbd15bfb821c96adc.png"></div><br>
<br>
Нам необходимо внести мелкие изменения. Наш <b>GameRenderer </b> должен иметь доступ к <b>GameWorld</b>, который он будет отрисовывать. Чтобы это сделать, спросим себя, «Кто имеет доступ к обоим: <b>GameRenderer </b> и <b>GameWorld</b>?». Если посмотреть на диаграмму, то видно, что это <b>GameScreen</b>. Давайте его откроем и внесем следующие изменения в его констуктор:<br>
<pre><code class="java"><span class="comment">// Это конструктор, не объявление класса</span>
    <span class="keyword">public</span> GameScreen() {
        Gdx.app.log(<span class="string">"GameScreen"</span>, <span class="string">"Attached"</span>);
        world = <span class="keyword">new</span> GameWorld();
        renderer = <span class="keyword">new</span> GameRenderer(world);
    }
</code></pre><br>
<br>
Упс, Eclipse ругается на не верное использование конструктора класса <b>GameRenderer</b>. Давайте его изменим.<br>
<img src="./tutorial_files/67912e24bcb444919d45fc5829a3e9fe.png"><br>
<br>
Откройте <b>GameRenderer </b>класс. Нам необходимо сохранить <b>world </b> как переменную внутри нашего <b>GameRenderer</b> класса, так что в будущем, когда нам понадобится объект из <b>GameWorld </b> мы сможем использовать переменную <b>world</b>.<br>
<br>
<ul>
<li> Создайте переменную:<br>
<pre><code class="java"><span class="keyword">private</span> GameWorld myWorld;
</code></pre><br>
<br>
</li>
<li>Внутри конструктора, добавьте новый аргумент и его значение присвойте нашей переменной <b>myWorld</b>:<br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.gameworld;

<span class="keyword">import</span> com.badlogic.gdx.Gdx;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameRenderer</span> {</span>

    <span class="keyword">private</span> GameWorld myWorld;
    
    <span class="keyword">public</span> GameRenderer(GameWorld world) {
        myWorld = world;
    }
    
    <span class="keyword">public</span> <span class="keyword">void</span> render() {
        Gdx.app.log(<span class="string">"GameRenderer"</span>, <span class="string">"render"</span>);
    }
}
</code></pre></li>
</ul><br>
<br>
<h2>Отвлечемся от написания код на минутку</h2><br>
Потратьте не много времени, чтобы понять, что мы только, что сделали. Просмотрите ваш код и убедитесь, что вы видите 3-х сторонюю взаимосвязь между тремя классами, с которыми работали. Я надеюсь, вы поняли роли классов <b>GameScreen</b>, <b>GameWorld</b> и <b>GameRenderer </b> и как они вместе работают.<br>
<br>
<h2>Готовы продолжить?</h2><br>
Мы сделаем еще кое, что в этом уроке, чтобы показать вам как мы можем создавать <b>GameObjects </b>и как их реализовать. Но прежде всего мы поговорим об <b>Orthographic Camera</b>.<br>
<br>
<h2>Orthographic Camera</h2><br>
libGDX — это фреймворк для создания 3D игр. Но, наша игра будет в 2D. Что это все значит для нас? В целом ничего, потому что мы сможем задействать одну вещь, которая называется <b>orthographic camera</b>.<br>
<br>
Множество 2D игр, которые вы могли видеть, в реальности сделаны в 3D. Множество современных платформеров (даже те которые используют pixel art) отрисованы с помощью 3D движка, на котором разработчики создают сцены больше в 3D пространстве, чем в 2D.<br>
<br>
На пример, посмотрите на Mario сделанную ее фанатом, в этой игре весь мир был построен используя <b>3D </b> модели.<br>
<img src="./tutorial_files/e991ea9951e14eccaf60b27cb3e421dd.jpg"> <br>
<br>
Играясь с Mario 2.5D выше, становится ясно, что игра в 3D. У персонажей есть «глубина». <br>
<br>
Чтобы сделать эту игру в 2D, мы, возможно, должны повернуть камеру таким образом, чтобы мы смотрели на игру с лицевой стороны. Верьте мне или нет, но игра все равно останется в 3D. Попробуйте поиграться сами.<br>
<img src="./tutorial_files/d3f3a67f2bf8432688095504f50a2386.png"><br>
<br>
Почему так? Потому что в 3D окружении (осмотритесь вокруг), объекты которые отдалены выглядят маленькими для наблюдателя. Не смотря на это, в Mario мы смотрим с перпендикулярного угла, некоторые объекты в этом 3D мире, к примеру кирпичи/блоки, будут меньше чем те блоки, что ближе к нам (к камере).<br>
<br>
Вот как раз в таких случаях и появляется на сцене <b>orthographic camera</b>. Когда мы используем ортографическую проекцию, все объекты на сцене, не зависимо от их отдаленности, спроекцированы под одну планку. Представьте себе большое полотно которым накрыли все объекты на сцене, и это объекты от соприкосновения с полотном станут плоскими, с зафиксированным размером изображения. Это то, что предоставляет для нас orthographic camera, и это то как мы можем создавать 2D игру в 3D пространстве.<br>
<br>
А вот как игра выглядела, если бы использовали <b>orthographic camera</b>:<br>
<img src="./tutorial_files/a9fea445aed74cd0864f78e21fef41cf.png"><br>
Используя <b>orthographic camera</b>, мы можем проецировать 3D в единую для просмотра плоскость.<br>
<br>
Я надеюсь не испугал вас этими разговорами про 3D пространство и проекцию камеры. Вы все поймете, когда мы будем писать код, на самом деле все очень просто. Так что давайте добавим камеру в нашу игру.<br>
<br>
Давайте добавим еще одно изменение в наш DesktopLauncher.java в Desktop Project (который мы используем, чтобы запускать игру). Мы изменим разрешение экрана:<br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.zombiebird.desktop;

<span class="keyword">import</span> com.badlogic.gdx.backends.lwjgl.LwjglApplication;
<span class="keyword">import</span> com.badlogic.gdx.backends.lwjgl.LwjglApplicationConfiguration;
<span class="keyword">import</span> com.kilobolt.zombiebird.ZBGame;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DesktopLauncher</span> {</span>
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main (String[] arg) {
        LwjglApplicationConfiguration config = <span class="keyword">new</span> LwjglApplicationConfiguration();
        config.title = <span class="string">"Zombie Bird"</span>;
        config.width = <span class="number">272</span>;
        config.height = <span class="number">408</span>;
        <span class="keyword">new</span> LwjglApplication(<span class="keyword">new</span> ZBGame(), config);
    }
}
</code></pre><br>
<br>
<h2>Создание нашей Камеры</h2><br>
Откройте наш класс <b>GameRenderer</b>. В нем мы создадим новый объект <b>Orthographic Camera</b>.<br>
<br>
<ul>
<li>Объявите переменную в классе:<br>
<pre><code class="java"><span class="keyword">private</span> OrthographicCamera cam;
</code></pre><br>
<br>
</li>
<li>Добавьте импорт:<br>
<pre><code class="java"><span class="keyword">import</span> com.badlogic.gdx.graphics.OrthographicCamera;
</code></pre><br>
<br>
</li>
<li>Создайте экземляр объекта внутри конструктора:<br>
<pre><code class="java">cam = <span class="keyword">new</span> OrthographicCamera();
cam.setToOrtho(<span class="keyword">true</span>, <span class="number">136</span>, <span class="number">204</span>);
</code></pre></li>
</ul><br>
<br>
Три аргумента означают следующее:<br>
<ol>
<li>Хотим ли использовать <b>Orthographic</b> проекцию (мы хотим) </li>
<li>Какая должна быть ширина</li>
<li>Какой должна быть высота</li>
</ol><br>
Это размер нашего игрового мира. Позже мы внесем изменения в этой части кода. Пока, что этот код мы написали для примера. Помните, мы задали разешение для нашей игры в DesktopLauncher.java следующее 272 x 408. Это значит, что все что будет в нашей игре, мы будем масштабировать на коэфициент 2х в момент отрисовки.<br>
<br>
<h2>Создание ShapeRenderer</h2><br>
Чтобы протестировать нашу камеру, мы создадим объект типа <b>ShapeRenderer</b>, который будет рисовать формы и линии для нас. Эта функциональность предоставлена libGDX!<br>
<br>
Внутри GameRenderer:<br>
<ul>
<li>Объявите в классе переменную:<br>
<pre><code class="java"><span class="keyword">private</span> ShapeRenderer shapeRenderer;
</code></pre><br>
<br>
</li>
<li>Добавьте импорт:<br>
<pre><code class="java"><span class="keyword">import</span> com.badlogic.gdx.graphics.glutils.ShapeRenderer;
</code></pre><br>
<br>
</li>
<li>Инициализируйте <b>shapeRenderer </b> и привяжите его к нашей камере внутри конструктора класса:<br>
<pre><code class="java">shapeRenderer = <span class="keyword">new</span> ShapeRenderer();
shapeRenderer.setProjectionMatrix(cam.combined);
</code></pre> </li>
</ul><br>
<br>
В итоге у вас должно было получиться следующее:<br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.gameworld;

<span class="keyword">import</span> com.badlogic.gdx.Gdx;
<span class="keyword">import</span> com.badlogic.gdx.graphics.OrthographicCamera;
<span class="keyword">import</span> com.badlogic.gdx.graphics.glutils.ShapeRenderer;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameRenderer</span> {</span>

    <span class="keyword">private</span> GameWorld myWorld;
    <span class="keyword">private</span> OrthographicCamera cam;
    <span class="keyword">private</span> ShapeRenderer shapeRenderer;

    <span class="keyword">public</span> GameRenderer(GameWorld world) {
        myWorld = world;
        cam = <span class="keyword">new</span> OrthographicCamera();
        cam.setToOrtho(<span class="keyword">true</span>, <span class="number">136</span>, <span class="number">204</span>);
        shapeRenderer = <span class="keyword">new</span> ShapeRenderer();
        shapeRenderer.setProjectionMatrix(cam.combined);
    }

    <span class="keyword">public</span> <span class="keyword">void</span> render() {
        Gdx.app.log(<span class="string">"GameRenderer"</span>, <span class="string">"render"</span>);
    }
}
</code></pre><br>
Наш <b>ShapeRenderer </b> готов, давайте создадим что-то, что сможем отрисовать! Мы можем создать квадратный объект внутри нашего <b>GameRenderer</b>, но это нарушает наши принципы проектирования. Мы должны создавать все <b>Game Objects</b> внутри нашего <b>GameWorld</b> и отрисовывать их в <b>GameRenderer</b>.<br>
Откройте GameWorld и внесите следующие изменения:<br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.gameworld;

<span class="keyword">import</span> com.badlogic.gdx.Gdx;
<span class="keyword">import</span> com.badlogic.gdx.math.Rectangle;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameWorld</span> {</span>

    <span class="keyword">private</span> Rectangle rect = <span class="keyword">new</span> Rectangle(<span class="number">0</span>, <span class="number">0</span>, <span class="number">17</span>, <span class="number">12</span>);

    <span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {
        Gdx.app.log(<span class="string">"GameWorld"</span>, <span class="string">"update"</span>);
        rect.x++;
        <span class="keyword">if</span> (rect.x &gt; <span class="number">137</span>) {
            rect.x = <span class="number">0</span>;
        }
    }

    <span class="keyword">public</span> Rectangle getRect() {
        <span class="keyword">return</span> rect;
    }
}
</code></pre><br>
Мы создали новый <b>Rectangle </b>и назвали его <b>rect</b>, а так же добавили импорт: <b> import.com.badlogic.gdx.math.Rectangle</b>. Заметьте, что мы не используем Java Rectangle, потому как он не доступен на некоторых платформах (реализация <b>gdx.math.Rectangle</b> создает правильный <b>Rectangle </b> в зависимости от платформы).<br>
<br>
Так же мы добавили private видимость нашему Rectangle, и добавили <b>get </b> метод, для доступа к нашему Rectangle вне <b>GameWorld</b> объекта (хорошее пояснение, почему мы использовали getter можно прочитать <a href="http://stackoverflow.com/questions/1568091/why-use-getters-and-setters">тут</a>).<br>
<br>
Далее мы добавили код, который перемещает наш <b>rect </b> вправо (и возвращает на стартовую позицию)!<br>
<br>
Теперь мы можем вернуться в наш GameRenderer, так как наш Rectangle готов, чтобы его отрисовали. Откройте <b>GameRenderer </b> и добавьте изменения в <b>render </b> метод (я разбил метод на три главные секции. Пожалуйста, прочтите комментарии, чтобы понять, что происходит):<br>
<div class="spoiler spoiler_open"><b class="spoiler_title">GameRenderer.java</b><div class="spoiler_text" style="display: block;"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.gameworld;

<span class="keyword">import</span> com.badlogic.gdx.Gdx;
<span class="keyword">import</span> com.badlogic.gdx.graphics.GL20;
<span class="keyword">import</span> com.badlogic.gdx.graphics.OrthographicCamera;
<span class="keyword">import</span> com.badlogic.gdx.graphics.glutils.ShapeRenderer;
<span class="keyword">import</span> com.badlogic.gdx.graphics.glutils.ShapeRenderer.ShapeType;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameRenderer</span> {</span>

    <span class="keyword">private</span> GameWorld myWorld;
    <span class="keyword">private</span> OrthographicCamera cam;
    <span class="keyword">private</span> ShapeRenderer shapeRenderer;

    <span class="keyword">public</span> GameRenderer(GameWorld world) {
        myWorld = world;
        cam = <span class="keyword">new</span> OrthographicCamera();
        cam.setToOrtho(<span class="keyword">true</span>, <span class="number">136</span>, <span class="number">204</span>);
        shapeRenderer = <span class="keyword">new</span> ShapeRenderer();
        shapeRenderer.setProjectionMatrix(cam.combined);
    }

    <span class="keyword">public</span> <span class="keyword">void</span> render() {
        Gdx.app.log(<span class="string">"GameRenderer"</span>, <span class="string">"render"</span>);

        <span class="comment">/*
         * 1. Мы рисуем черный задний фон, чтобы избавится от моргания и следов от передвигающихся объектов
         */</span>

        Gdx.gl.glClearColor(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);
        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);

        <span class="comment">/*
         * 2. Мы отрисовываем однотонный квадрат
         */</span>

        <span class="comment">// Говорим shapeRenderer начинать отрисовывать формы</span>
        shapeRenderer.begin(ShapeType.Filled);

        <span class="comment">// Выбираем RGB Color 87, 109, 120, не прозрачный</span>
        shapeRenderer.setColor(<span class="number">87</span> / <span class="number">255.0</span>f, <span class="number">109</span> / <span class="number">255.0</span>f, <span class="number">120</span> / <span class="number">255.0</span>f, <span class="number">1</span>);

        <span class="comment">// Отрисовываем квадрат из myWorld (Используем ShapeType.Filled)</span>
        shapeRenderer.rect(myWorld.getRect().x, myWorld.getRect().y,
                myWorld.getRect().width, myWorld.getRect().height);

        <span class="comment">// говорим shapeRenderer прекратить отрисовку</span>
        <span class="comment">// Мы ДОЛЖНЫ каждый раз это делать</span>
        shapeRenderer.end();

        <span class="comment">/*
         * 3. Мы отрисовываем рамку для квадрата
         */</span>

        <span class="comment">// Говорим shapeRenderer нарисовать рамку следующей формы</span>
        shapeRenderer.begin(ShapeType.Line);

        <span class="comment">// Выбираем цвет RGB Color 255, 109, 120, не прозрачный</span>
        shapeRenderer.setColor(<span class="number">255</span> / <span class="number">255.0</span>f, <span class="number">109</span> / <span class="number">255.0</span>f, <span class="number">120</span> / <span class="number">255.0</span>f, <span class="number">1</span>);

        <span class="comment">// Отрисовываем квадрат из myWorld (Using ShapeType.Line)</span>
        shapeRenderer.rect(myWorld.getRect().x, myWorld.getRect().y,
                myWorld.getRect().width, myWorld.getRect().height);

        shapeRenderer.end();
    }
}
</code></pre><br>
</div></div><br>
Нет ошибок? Великолепно! Вы должны увидеть нечто, как на картинке ниже:<br>
<div style="text-align:center;"><img src="./tutorial_files/4e0b18621d67432cb41defea99595075.png"></div><br>
<br>
Потратьте не много времени, поэкспериментируйте с кодом. Если вы научились рисовать формы, значит вы можете рисовать картинки, чем мы и займемся далее.<br>
<br>
Я знаю, прогресс очень медленный, но поверьте, мы наращиваем темп разработки нашей игры, теперь у нас есть базовый GameScreen!<br>
<br>
<h2>Исходный код за день</h2><br>
Если вы вне настроения писать код самостоятельно, скачайте его отсюда:<br>
<img src="./tutorial_files/e273ed1a4ed342abb148c53ad824d8f3.png" hspace="4" vspace="4" align="left"><a href="http://www.kilobolt.com/uploads/1/2/5/7/12571940/zombiebird_day_4.zip">zombiebird_day_4.zip</a><br>
<br>
<br>
<br>
<img src="./tutorial_files/4f355491bc81468cbcb05427325b49ca.png"> <a href="http://habrahabr.ru/post/243471/#ContentList">К Оглавлению</a><br>
<br>
<br>
<br>
<br>
<br>
<br>
<a name="Day5"></a><h1><img src="./tutorial_files/4e55852eb2a04db2a1200c031304129c.png"> День 5 — Полет мертвеца — Добавляем птицу</h1><hr><br>
В данной секции мы добавим Птичку в нашу игру.<br>
<div style="text-align:center;"><img src="./tutorial_files/b3a4f619a5af41e2ab0bfb57520e8dec.png"></div> <br>
<br>
Поговорим не много про нашего главного персонажа. Flaps — веселая красная птичка, которая летает по своим делам туда-сюда, пока кто-то ее не стукнул о канализационную трубу. Но сейчас, Flapps вернулся, и смотрит очень пристально за тобой! (Извини Kyle, я все еще считаю, что это самая уродская птица, которую я когда-либо видел).<br>
<br>
Теперь вы знакомы с нашим главным персонажем, давайте научим его летать.<br>
<br>
<h2>Освежим нашу память</h2><br>
У нас пять Java проектов, которые мы сгенерировали используя libGDX установщик. Но всю магию мы будем делать только в трех проектах:<br>
<ol>
<li>Если я когда-либо попрошу открыть класс или создать новый пакет, делаем это в ZombieBird проекте. </li>
<li>Если я попрошу запустить ваш код, откройте проект ZombieBird <b>desktop </b> и запустите <b>DesktopLauncher.java</b>. </li>
<li>Если мы добавляем картинки или звуки, мы добавляем их в проект ZombieBird-<b>android </b>в папку assets. Все остальные проекты имеют указатель на эту папку. </li>
</ol><br>
<br>
<h2>Система координат</h2><br>
Я забыл упомянуть (вы скорее всего уже и сами поняли), что мы будем использовать <b>Y-Вниз</b> систему координат. Это значит, что левый верзний угол имеет координаты (0, 0).<br>
<br>
Что это значит? Если у нашей птички будет положительное ускорение по Y, то она будет лететь <b>вниз</b>.<br>
<br>
<h2>Разрешение экрана</h2><br>
Наша игра будет работать на чем угодно, от iPhone до iPad и на многочисленных Android устройствах. Нам необходимо корректно обрабатывать разрешение экрана.<br>
<br>
Чтобы этого добиться, мы установим для игры фиксированную ширину в 136 пикселей. Высота будет определяться динамически! После определения разрешения экрана для устройства, мы зададим высоту для нашей игры.<br>
<br>
<h2>Создание класса Bird.java</h2><br>
Наш Flaps должен иметь свой собственный класс. Давайте этим и займемся.<br>
<br>
Создайте новый пакет и назовите его <b>com.kilobolt.gameobjects</b>, а в нем создайте класс <b>Bird</b>.<br>
<img src="./tutorial_files/cff6cac07167483189b95de4d427b5aa.png"><br>
<br>
Переменные в классе:<br>
Наш Bird должен иметь следующие переменные: позиция, скорость и ускорение (подробнее об этом далее). Нам так же нужно хранить значение угла поворота нашей птички, а также ширну и высоту.<br>
<pre><code class="java"><span class="keyword">private</span> Vector2 position;
<span class="keyword">private</span> Vector2 velocity;
<span class="keyword">private</span> Vector2 acceleration;

<span class="keyword">private</span> <span class="keyword">float</span> rotation; <span class="comment">// Для обработки поворота птицы</span>
<span class="keyword">private</span> <span class="keyword">int</span> width;
<span class="keyword">private</span> <span class="keyword">int</span> height;
</code></pre><br>
<b>Vector2 </b>очень мощный класс, встроеный в libGDX. Если вы не сильны с векторами в математике — не переживайте! Тут мы будем использовать <b>Vector2</b>, как контейнер для двух переменных: x и y.<br>
<br>
<b>position.x</b> — определяет позицию по оси X, а <b>velocity.y</b> отвечает за скорость по оси Y. <b>acceleration</b> — данный параметр управляет нашей velocity, чем больше acceleration, тем больше velocity.<br>
<br>
Вся эта каша станет более прозрачной чуть позже.<br>
<br>
<h2>Конструктор</h2><br>
Что нам необходимо для создания нашей Птички? Нам необходимы значения позиции, а также размеры нашей птички.<br>
<pre><code class="java"><span class="keyword">public</span> Bird(<span class="keyword">float</span> x, <span class="keyword">float</span> y, <span class="keyword">int</span> width, <span class="keyword">int</span> height) {
        <span class="keyword">this</span>.width = width;
        <span class="keyword">this</span>.height = height;
        position = <span class="keyword">new</span> Vector2(x, y);
        velocity = <span class="keyword">new</span> Vector2(<span class="number">0</span>, <span class="number">0</span>);
        acceleration = <span class="keyword">new</span> Vector2(<span class="number">0</span>, <span class="number">460</span>);
}
</code></pre><br>
<br>
Наш Bird объект будет храниться в <b>GameWorld</b>. Нам необходимы следующие методы:<br>
<ol>
<li>Методе update, который будет запускать во время обновления GameWorld</li>
<li>onClick метод, который будет отрабатывать клики/касания по экрану</li>
</ol><br>
<br>
Так же нам необходимо создать методы доступа к некоторым переменным нашего <b>Bird </b> объекта:<br>
<div class="spoiler spoiler_open"><b class="spoiler_title">Bird.java</b><div class="spoiler_text" style="display: block;"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.gameobjects;

<span class="keyword">import</span> com.badlogic.gdx.math.Vector2;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bird</span> {</span>

    <span class="keyword">private</span> Vector2 position;
    <span class="keyword">private</span> Vector2 velocity;
    <span class="keyword">private</span> Vector2 acceleration;

    <span class="keyword">private</span> <span class="keyword">float</span> rotation; <span class="comment">// For handling bird rotation</span>
    <span class="keyword">private</span> <span class="keyword">int</span> width;
    <span class="keyword">private</span> <span class="keyword">int</span> height;

    <span class="keyword">public</span> Bird(<span class="keyword">float</span> x, <span class="keyword">float</span> y, <span class="keyword">int</span> width, <span class="keyword">int</span> height) {
        <span class="keyword">this</span>.width = width;
        <span class="keyword">this</span>.height = height;
        position = <span class="keyword">new</span> Vector2(x, y);
        velocity = <span class="keyword">new</span> Vector2(<span class="number">0</span>, <span class="number">0</span>);
        acceleration = <span class="keyword">new</span> Vector2(<span class="number">0</span>, <span class="number">460</span>);
    }

    <span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {

        velocity.add(acceleration.cpy().scl(delta));

        <span class="keyword">if</span> (velocity.y &gt; <span class="number">200</span>) {
            velocity.y = <span class="number">200</span>;
        }

        position.add(velocity.cpy().scl(delta));

    }

    <span class="keyword">public</span> <span class="keyword">void</span> onClick() {
        velocity.y = -<span class="number">140</span>;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getX() {
        <span class="keyword">return</span> position.x;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getY() {
        <span class="keyword">return</span> position.y;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getWidth() {
        <span class="keyword">return</span> width;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getHeight() {
        <span class="keyword">return</span> height;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getRotation() {
        <span class="keyword">return</span> rotation;
    }

}
</code></pre><br>
</div></div><br>
Логика для описанного выше очень простая. Каждый раз, когда метод update нашего класса <b>Bird </b> выполняется, мы делаем две вещи:<br>
<ol>
<li>Мы добавляем отмасштабированый вектор ускорения (мы к этому вернемся) к нашему вектору скорости. Так мы получаем нашу новую скорость. Так в принципе работает гравитация. Скорость притяжения увеличивается на 9,8 м/с каждумаю секунду. </li>
<li>Помните, что физика Flappy Bird имеет ограничение по максимальной скорости. После экспериментов, я установил максимум для <b>velocity.y</b> в 200. </li>
<li>Мы добавляем обновленное смасштабированное значение скорости к позиции нашей птицы (так мы получем новую позицию). </li>
</ol><br>
<br>
Что я подразумеваю под "<b>отмасштабированый</b>" в пунктах 1 и 3? Мы будем умножать наши ускорение и скорость на дельту, которая представляет из себя, сколько прошло времени, с прошлого раза, когда запускался метод update. Это эффект нормализации.<br>
<br>
Если ваша игра, по каким-то причинам, начнем тормозить, ваша delta увеличится (ваш процессор выполнил прошлый цикл, или повторение, или итерацию за большее время). Масштабируя наши Vector'ы с помощью delta, мы можем добиться независимости от частоты кадров. Если метод update выполнялся вдвое больше, значит мы просто смещаем нашего персонажа на скорость увеличенную на 2 и так далее.<br>
<br>
Мы применим эти принципы немного позже!<br>
<br>
Наша птичка готова, выпустим ее в <b>GameWorld</b>!<br>
<br>
<h2>Внимание</h2><br>
Каждый раз, как вы создаете новый <b>Object</b>, вы выделяете не много памяти в <b>RAM </b> для этого объекта (если быть точнее, то в <b>Heap</b>). Как только ваш <b>Heap </b> переполняется, подпрограмма, которая называется <b>Garbage Collector</b> (далее GC, Мусоросборщик/Сборщик), выходит на сцену и чистит вашу память, чтобы избежать ситуации с нехваткой памяти. Это круто, но не, когда вы создаете игру. Во время работы <b>GC</b>, ваша игра начинает притормаживать на несколько значительных милисекунд. Чтобы избежать частой работы <b>GC</b>, вам надо избегать создания новых объектов, по возможности.<br>
<br>
Я недавно открыл для себя, что метод <b>Vector2.cpy() </b> создает новый экземляр типа <b>Vector2</b>, вместо того чтобы повторно использовать существующий экземпляр. Это означает, что при <b>60 FPS</b>, вызывая Vector2.cpy(), вы создадите <b>60 </b><b>новых </b>объектов типа Vector2 каждую секунду, что в свою очеред заставить Java GC появляться на сцене очень часто.<br>
<br>
Просто держите это в памяти. Мы решим эту проблему немного позже.<br>
<br>
<h2>Откройте GameWorld класс</h2><br>
Давайте удалим Rect объект, который мы создали ранее. Вот, что у вас должно быть:<br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.gameworld;


<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameWorld</span> {</span>

    <span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {

    }
}
</code></pre><br>
Если вы хотите, вы так же можете удалить логику отрисовки <b>Rect </b> объекта в <b>GameRenderer</b>, чтобы избавиться от ошибок в Eclipse. Мы это сделаем в слудющем дне.<br>
<br>
Давайте сначала создадим конструктор нашего класса <b>GameWorld</b>:<br>
<pre><code class="java"><span class="keyword">public</span> GameWorld() { }
</code></pre><br>
Импортируйте класс <b>Bird </b> и создайте новую переменную типа Bird в классе <b>GameWorld </b>(не инициализируйте пока что ее). Вызовите метод <b>update </b> нашей птички в <b>GameWorld.update(float delta) </b>. Вот что мы получили:<br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.gameworld;

<span class="keyword">import</span> com.kilobolt.gameobjects.Bird;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameWorld</span> {</span>
    <span class="keyword">private</span> Bird bird;

    <span class="keyword">public</span> GameWorld() {
        <span class="comment">// инициализируйте Bird тут</span>
    }

    <span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {
        bird.update(delta);
    }

    <span class="keyword">public</span> Bird getBird() {
        <span class="keyword">return</span> bird;

    }
}
</code></pre><br>
Теперь нам необходимо создать нашу птичку. Какая информация нам понадобится? Координаты и размер (<b>x, y, width, height </b> — это те 4 переменные которые нам нужны, чтобы вызвать конструктор класса Bird).<br>
<br>
Значение по X должно быть 33 (это то место, где птичка остается на протяжении всего игрового времени). Ширина должна быть 17. Высота 12.<br>
<br>
А что насчет Y? Из моих соображений, это должно быть значение равное 5 пикселям над вертикальной серединой экрана (Помните, что мы масштабируем все до 137 х ??? разрешения экрана, где высота определяется с помощью коэффициента между высотой и шириной экрана, умножая его на 137).<br>
<br>
Добавьте эту строчку в конструктор:<br>
<pre><code class="java">bird = <span class="keyword">new</span> Bird(<span class="number">33</span>, midPointY - <span class="number">5</span>, <span class="number">17</span>, <span class="number">12</span>);
</code></pre><br>
Как мы получим <b>midPointY</b>? Мы запросим это значение из нашего <b>GameScreen</b>. Помните, что конструктор <b>GameWorld </b> вызван когда <b>GameScreen </b>создает объект типа <b>GameWorld</b>. Так что мы можем добавить новый аргумент в конструктор класса GameWorld и в GameScreen передать его.<br>
<br>
Добавьте это в конструктор <b>GameWorld</b>: <b> (int midPointY) </b><br>
<br>
Вот, что у вас должно было получиться:<br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.gameworld;

<span class="keyword">import</span> com.kilobolt.gameobjects.Bird;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameWorld</span> {</span>
    <span class="keyword">private</span> Bird bird;

    <span class="keyword">public</span> GameWorld(<span class="keyword">int</span> midPointY) {
        bird = <span class="keyword">new</span> Bird(<span class="number">33</span>, midPointY - <span class="number">5</span>, <span class="number">17</span>, <span class="number">12</span>);
    }

    <span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {
        bird.update(delta);
    }

    <span class="keyword">public</span> Bird getBird() {
        <span class="keyword">return</span> bird;

    }
}
</code></pre><br>
Теперь нам необходимо внести изменения в наш класс <b>GameScreen</b>. Давайте откроем его:<br>
<img src="./tutorial_files/9b8a9e7f444f4b359cac4b6964d2e8eb.png"><br>
<br>
Как и ожидалось, у нас тут ошибка, в строке, где происзодит вызов конструктора <b>GameWorld</b>. Ошибка говорит следующее: "<b>to create a new GameWorld, you must give us an integer</b>"(чтобы создать новый GameWorld, вы должны передать integer), давайте это сделаем!<br>
<br>
Но сначала, давайте расчитаем <b>midPointY </b> нашего экрана и после передадим это значение в конструктор <b>GameWorld</b>.<br>
<br>
Когда я говорю midPointY, это то, что я имею ввиду. Помните, что наша игра будет иметь 136 единиц в ширину. Наш экран может быть 1080 пикселей в ширину, так что мы отмасштабируем все на 1/8. Чтобы получить высоту игры, мы должны взять высоту экрана и отмасштабировать ее на тот же фактор!<br>
<br>
Чтобы получить высоту и ширину нашего экрана, мы можем использовать следующие методы: <b>Gdx.graphics.getWidth() </b> и <b>Gdx.graphics.getHeight()</b>.<br>
<br>
Давайте используем эту информацию, чтобы реализовать логику нашего конструктора:<br>
<div class="spoiler spoiler_open"><b class="spoiler_title">GameScreen.java</b><div class="spoiler_text" style="display: block;"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.screens;

<span class="keyword">import</span> com.badlogic.gdx.Gdx;
<span class="keyword">import</span> com.badlogic.gdx.Screen;
<span class="keyword">import</span> com.kilobolt.gameworld.GameRenderer;
<span class="keyword">import</span> com.kilobolt.gameworld.GameWorld;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameScreen</span> <span class="keyword">implements</span> <span class="title">Screen</span> {</span>

    <span class="keyword">private</span> GameWorld world;
    <span class="keyword">private</span> GameRenderer renderer;

    <span class="comment">// This is the constructor, not the class declaration</span>
    <span class="keyword">public</span> GameScreen() {

        <span class="keyword">float</span> screenWidth = Gdx.graphics.getWidth();
        <span class="keyword">float</span> screenHeight = Gdx.graphics.getHeight();
        <span class="keyword">float</span> gameWidth = <span class="number">136</span>;
        <span class="keyword">float</span> gameHeight = screenHeight / (screenWidth / gameWidth);

        <span class="keyword">int</span> midPointY = (<span class="keyword">int</span>) (gameHeight / <span class="number">2</span>);

        world = <span class="keyword">new</span> GameWorld(midPointY);
        renderer = <span class="keyword">new</span> GameRenderer(world);

    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> render(<span class="keyword">float</span> delta) {
        world.update(delta);
        renderer.render();
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> resize(<span class="keyword">int</span> width, <span class="keyword">int</span> height) {

    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> show() {
        Gdx.app.log(<span class="string">"GameScreen"</span>, <span class="string">"show called"</span>);
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> hide() {
        Gdx.app.log(<span class="string">"GameScreen"</span>, <span class="string">"hide called"</span>);
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> pause() {
        Gdx.app.log(<span class="string">"GameScreen"</span>, <span class="string">"pause called"</span>);
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> resume() {
        Gdx.app.log(<span class="string">"GameScreen"</span>, <span class="string">"resume called"</span>);
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> dispose() {
        <span class="comment">// Leave blank</span>
    }

}
</code></pre><br>
</div></div><br>
Теперь, когда мы создали нашу птицу, мы должны научиться контролировать ее. Давайте создадим наш <b>input handler</b>!<br>
<br>
<h2>Создадим ZBHelpers</h2><br>
<img src="./tutorial_files/02da8c093fb74979a95b6d94eeba12da.png" align="left"> Диаграмма наносит ответный удар! Сейчас мы уделим больше внимания <b>Framework Helpers</b> на третьем уровне. ZBGame нуждается в функционале для работы с вводом, картинками, звуками и т.д. <br>
<br>
Мы создадим два класса прямо сейчас.<br>
<br>
Первым классом будет <b>InputHandler</b>, который, как предполагает имя, будет рагировать на различного рода входных действий, единственное за что мы должны беспокоиться это <b>touch </b> (касание) (на PC/Mac все клики конвертируются в касания).<br>
<br>
Второй класс — это <b>AssetLoader </b>. Этот класс загрузит для нас картинки, анимации, звуки и т.д.<br>
<br>
Мы вернемся к AssetLoader очень скоро. Для начала давайте реализуем нам <b>InputHandler</b>.<br>
<br>
<br>
<br>
<br>
<br>
<br>
Создайте новый пакет <b>com.kilobolt.zbHelpers</b>, а в нем создайте новый класс <b>InputHandler</b>.<br>
<img src="./tutorial_files/038ff4dbe4db4e51a5c16d91745b2f6a.png"><br>
<br>
InputHandler очень легко реализовать. Нам всего лишь необходимо реализовать <b>InputProcessor</b>, который является интерфейсом между нашим кодом и кросплатформенным кодом. Когда наша платформа (Android, iOS, и т.д.) получает некий input, к примеру касание (touch), она вызовет метод в InputProcessor, который мы предоставим реализовав его. <br>
<br>
Добавьте «implements InputProcessor» в строку объявления класса (а так же импортируйте этот класс). Появится ошибка, что нам необходимо добавить нереализованные методы. Давайте сделаем это:<br>
<div style="text-align:center;"><img src="./tutorial_files/c597d1b3a25344b6b3ef03e2356a4e16.png"></div><br>
<br>
У вас должно было получиться следующее:<br>
<div class="spoiler spoiler_open"><b class="spoiler_title">InputHandler.java</b><div class="spoiler_text" style="display: block;"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.ZBHelpers;

<span class="keyword">import</span> com.badlogic.gdx.InputProcessor;
<span class="keyword">import</span> com.kilobolt.GameObjects.Bird;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InputHandler</span> <span class="keyword">implements</span> <span class="title">InputProcessor</span> {</span>

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> touchDown(<span class="keyword">int</span> screenX, <span class="keyword">int</span> screenY, <span class="keyword">int</span> pointer, <span class="keyword">int</span> button) {
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> keyDown(<span class="keyword">int</span> keycode) {
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> keyUp(<span class="keyword">int</span> keycode) {
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> keyTyped(<span class="keyword">char</span> character) {
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> touchUp(<span class="keyword">int</span> screenX, <span class="keyword">int</span> screenY, <span class="keyword">int</span> pointer, <span class="keyword">int</span> button) {
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> touchDragged(<span class="keyword">int</span> screenX, <span class="keyword">int</span> screenY, <span class="keyword">int</span> pointer) {
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> mouseMoved(<span class="keyword">int</span> screenX, <span class="keyword">int</span> screenY) {
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> scrolled(<span class="keyword">int</span> amount) {
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

}
</code></pre><br>
</div></div><br>
Как видите, у нас повилось много новых методов с которыми мы можем работать. Пока что, нам нужно позаботиться о методе <b>touchDown()</b>. <br>
<br>
TouchDown должен вызывать метод <b>onClick </b>в нашем классе <b>Bird</b>, но мы не добавили ссылку на наш объект Bird. Мы не сможем вызвать ни один метод из объекта Bird пока не будет ссылки на этот объект. Давайте спросим себя: кто имеет ссылку на объект нашей птички? Конечно же GameWorld, который принадлежит GameScreen! Так что мы попросим GameScreen передать Bird в InputHandler для нас. <br>
<br>
Перед тем как вернуться в GameScreen, давайте закончим сначала наш класс InputHandler:<br>
<ol>
<li>Создайте переменную в классе InputHandler, чтобы хранить в ней ссылку на нашу птицу:<br>
<pre><code class="java"><span class="keyword">private</span> Bird myBird;
</code></pre></li>
<li>Нам необходимо запросить ссылку на Bird внутри конструктора InputHandler:<br>
<pre><code class="java"><span class="keyword">public</span> InputHandler(Bird bird) {
   myBird = bird;
}
</code></pre></li>
<li>Теперь мы можем вызывать onClick нашей птички в методе touchDown:<br>
<pre><code class="java">myBird.onClick()
</code></pre></li>
</ol><br>
<div class="spoiler spoiler_open"><b class="spoiler_title">InputHandler.java</b><div class="spoiler_text" style="display: block;"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.zbhelpers;

<span class="keyword">import</span> com.badlogic.gdx.InputProcessor;
<span class="keyword">import</span> com.kilobolt.gameobjects.Bird;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InputHandler</span> <span class="keyword">implements</span> <span class="title">InputProcessor</span> {</span>

    <span class="keyword">private</span> Bird myBird;

    <span class="comment">// запрашиваем ссылку на Bird когда InputHandler создан.</span>
    <span class="keyword">public</span> InputHandler(Bird bird) {
        <span class="comment">// myBird является ссылкой на  bird в gameWorld.</span>
        myBird = bird;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> touchDown(<span class="keyword">int</span> screenX, <span class="keyword">int</span> screenY, <span class="keyword">int</span> pointer, <span class="keyword">int</span> button) {
        myBird.onClick();
        <span class="keyword">return</span> <span class="keyword">true</span>; <span class="comment">// Вернем true чтобы сообщим, что мы обработали касание.</span>
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> keyDown(<span class="keyword">int</span> keycode) {
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> keyUp(<span class="keyword">int</span> keycode) {
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> keyTyped(<span class="keyword">char</span> character) {
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> touchUp(<span class="keyword">int</span> screenX, <span class="keyword">int</span> screenY, <span class="keyword">int</span> pointer, <span class="keyword">int</span> button) {
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> touchDragged(<span class="keyword">int</span> screenX, <span class="keyword">int</span> screenY, <span class="keyword">int</span> pointer) {
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> mouseMoved(<span class="keyword">int</span> screenX, <span class="keyword">int</span> screenY) {
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> scrolled(<span class="keyword">int</span> amount) {
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

}
</code></pre><br>
</div></div><br>
Теперь нам необходимо вернуться в GameScreen и создать новый InputHandler, а также прикрутить его к нашей игре!<br>
<br>
Откройте <b>GameScreen</b>. Обновите конструктор следующим образом: В конце, мы говорим <b>libGDX </b> использовать наш новый <b>InputHandler </b> как его же собственный процессор.<br>
<pre><code class="java"><span class="keyword">public</span> GameScreen() {
        
        <span class="keyword">float</span> screenWidth = Gdx.graphics.getWidth();
        <span class="keyword">float</span> screenHeight = Gdx.graphics.getHeight();      
        <span class="keyword">float</span> gameWidth = <span class="number">136</span>;
        <span class="keyword">float</span> gameHeight = screenHeight / (screenWidth / gameWidth);
        
        <span class="keyword">int</span> midPointY = (<span class="keyword">int</span>) (gameHeight / <span class="number">2</span>);

        world = <span class="keyword">new</span> GameWorld(midPointY);
        renderer = <span class="keyword">new</span> GameRenderer(world);
        
        Gdx.input.setInputProcessor(<span class="keyword">new</span> InputHandler(world.getBird()));
        
    }
</code></pre><br>
<b>Gdx.input.setInputProcessor()</b> принимает на вход объект типа <b>InputProcessor</b>. Так как мы реализовали InputProcessor в нашем <b>InputHandler</b>, мы можем передать наш InputHandler на вход.<br>
<br>
Заметьте, что мы вызываем конструкторв, передавая ссылку на наш объект <b>Bird</b>, который мы получаем из World. Это упрощенное пояснение следующего:<br>
<pre><code class="java">Bird bird = world.getBird();
InputHandler handler = <span class="keyword">new</span> InputHandler(bird);
Gdx.input.setInputProcessor(handler);
</code></pre><br>
<br>
<h2>На каком свете мы сейчас?</h2><br>
Мы создали наш класс <b>Bird</b>, создали объект типа Bird внутри нашего <b>GameWorld</b>, и создали <b>InputHandler </b> который будет вызывать метод <b>onClick </b> в нашем классе Bird, благодаря этому наша птица будет взлетать вверх!<br>
Присоединяйтесь ко мне в следующей части, в которой мы отрисуем нашу птичку и ее родной Некрополис.<br>
<br>
<h2>Исходный код за день</h2><br>
Если вы вне настроения писать код самостоятельно, скачайте его отсюда:<br>
<img src="./tutorial_files/e273ed1a4ed342abb148c53ad824d8f3.png" hspace="4" vspace="4" align="left"><a href="http://www.kilobolt.com/uploads/1/2/5/7/12571940/zombiebird_day_5.zip">zombiebird_day_5.zip</a><br>
<br>
<br>
<br>
<br>
<img src="./tutorial_files/4f355491bc81468cbcb05427325b49ca.png"> <a href="http://habrahabr.ru/post/243471/#ContentList">К Оглавлению</a><br>
<br>
<br>
<br>
<br>
<br>
<br>
<a name="Day6"></a><h1><img src="./tutorial_files/4e55852eb2a04db2a1200c031304129c.png"> День 6 — Добавляем графические элементы — Добро пожаловать в Некрополис</h1><hr><br>
<img src="./tutorial_files/4ff008b318004404a12123e445d5d470.png" align="left"><br>
<br>
 Спасибо, что присоединились ко мне в шестом дне. Вы проделали большую работу настраивая framework, но после этой секции, вы увидите, что это стоило того.<br>
<br>
<br>
Пришло время перевести Flaps в его родную среду обитания. В этом уроке мы создадим наш объект <b>AssetLoader</b>, загрузим анимацию и кучу текстур, а также используем наш <b>Renderer</b>, чтобы отрисовать птичку и ее зловещий город.<br>
<br>
<br>
<br>
<br>
<br>
<h2>Класс AssetLoader</h2><br>
Мы начнем с создания класса <b>AssetLoader</b> в пакете <b>com.kilobolt.zbhelpers</b> (у вас должны быть ошибки в GameRenderer).<br>
<img src="./tutorial_files/0a14cad5be85478cb63183dc38d0cc9e.png"><br>
<br>
Мы создадим объекты следующих типов (все они входят в <b>libGDX</b>):<br>
<ul>
<li><b>Texture </b> — считайте, что это файл с картикной. Мы объединим множество картинок в один файл и будем работать с этим файлом. </li>
<li><b>TextureRegion </b> — это квадратная область нашей <b>Texture</b>. Посмотрите на картинку ниже. На картинке присутствует множество областей с текстурами, включая задний фон, траву, Flaps и череп. </li>
<li><b>Animation </b> — мы можем взять множество областей с текстурами и создать объект <b>Animation</b>, который будет знать, как анимировать нашу птицу. </li>
</ul><br>
<br>
Не скачивайте картинку ниже! Она была увеличена в 4-ре раза, так что она не будет работать с нашим кодом. Вместо нее, скачайте файл, который я ниже укажу (спасибо художникам из Kilobolt за предоставленные изобрадения).<br>
<div style="text-align:center;"><img src="./tutorial_files/c4d500413a684b2fba934125fd4416ca.png"></div><br>
<br>
Полноценный <b>AssetLoader </b> класс:<br>
<div class="spoiler spoiler_open"><b class="spoiler_title">AssetLoader.java</b><div class="spoiler_text" style="display: block;"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.zbhelpers;

<span class="keyword">import</span> com.badlogic.gdx.Gdx;
<span class="keyword">import</span> com.badlogic.gdx.graphics.Texture;
<span class="keyword">import</span> com.badlogic.gdx.graphics.Texture.TextureFilter;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.Animation;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.TextureRegion;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AssetLoader</span> {</span>

    <span class="keyword">public</span> <span class="keyword">static</span> Texture texture;
    <span class="keyword">public</span> <span class="keyword">static</span> TextureRegion bg, grass;

    <span class="keyword">public</span> <span class="keyword">static</span> Animation birdAnimation;
    <span class="keyword">public</span> <span class="keyword">static</span> TextureRegion bird, birdDown, birdUp;

    <span class="keyword">public</span> <span class="keyword">static</span> TextureRegion skullUp, skullDown, bar;

    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> load() {

        texture = <span class="keyword">new</span> Texture(Gdx.files.internal(<span class="string">"data/texture.png"</span>));
        texture.setFilter(TextureFilter.Nearest, TextureFilter.Nearest);

        bg = <span class="keyword">new</span> TextureRegion(texture, <span class="number">0</span>, <span class="number">0</span>, <span class="number">136</span>, <span class="number">43</span>);
        bg.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        grass = <span class="keyword">new</span> TextureRegion(texture, <span class="number">0</span>, <span class="number">43</span>, <span class="number">143</span>, <span class="number">11</span>);
        grass.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        birdDown = <span class="keyword">new</span> TextureRegion(texture, <span class="number">136</span>, <span class="number">0</span>, <span class="number">17</span>, <span class="number">12</span>);
        birdDown.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        bird = <span class="keyword">new</span> TextureRegion(texture, <span class="number">153</span>, <span class="number">0</span>, <span class="number">17</span>, <span class="number">12</span>);
        bird.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        birdUp = <span class="keyword">new</span> TextureRegion(texture, <span class="number">170</span>, <span class="number">0</span>, <span class="number">17</span>, <span class="number">12</span>);
        birdUp.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        TextureRegion[] birds = { birdDown, bird, birdUp };
        birdAnimation = <span class="keyword">new</span> Animation(<span class="number">0.06</span>f, birds);
        birdAnimation.setPlayMode(Animation.PlayMode.LOOP_PINGPONG);

        skullUp = <span class="keyword">new</span> TextureRegion(texture, <span class="number">192</span>, <span class="number">0</span>, <span class="number">24</span>, <span class="number">14</span>);
        <span class="comment">// Create by flipping existing skullUp</span>
        skullDown = <span class="keyword">new</span> TextureRegion(skullUp);
        skullDown.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        bar = <span class="keyword">new</span> TextureRegion(texture, <span class="number">136</span>, <span class="number">16</span>, <span class="number">22</span>, <span class="number">3</span>);
        bar.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

    }

    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> dispose() {
        <span class="comment">// Мы должны избавляться от текстур, когда заканчивает работать с объектом в котором есть текстуры</span>
        texture.dispose();
    }

}
</code></pre><br>
</div></div><br>
Давайте пройдемся по коду. Как вы видите, у нас множество статических методов и переменных, это значит, что мы не будем создавать экземляры класса <b>Asset </b> — у нас будет только одна копия.<br>
<br>
Так же у нас есть два метода: <b>load </b> и <b>dispose</b>.<br>
<br>
Метод <b>load </b> будет вызван, когда наша игра запускается, а метод dispose, когда игру закрывают.<br>
<br>
<h2> Инспектируем метод load() </h2><br>
Texture<br>
Метод load начинается с создания нового объекта типа <b>Texture </b> используя файл <b>texture.png</b>, который я предоставлю вам чуть ниже. Далее выставляются фильтры уменьшения и увеличения (используются, когда картинку увеличивают или уменьшают) используя <b>enum </b> константы: <b>TextureFilter.Nearest</b>. Это важно, потому что когда наша маленькая пиксель-арт картинка растягивается на больший размер, каждый пиксель сохранит свою форму, а не будет размытым!<br>
<br>
<b>TextureRegion</b><br>
Мы можем использовать нашу текстуру, чтобы создать объекты типа <b>TextureRegion</b>, нам необходимы 5 аргументов: подходящий объект типа <b>Texture </b> и квадратные рамки необходимой области на этой текстуре. Мы передаем <b>x, y, width</b> и <b>height </b> начиная с левого верхнего угла нашей картинки, на пример задний фон будет иметь следующие параметры: 0, 0, 136, 43.<br>
Все <b>TextureRegion </b> должны быть перевернуты, так как libGDX использует <b>Y-вверх</b> координаты по умолчанию. Мы используем <b>Y-вниз</b> систему координат, и должны переворачивать каждую картинку (за исключением skullUp, который может остаться вверх-ногами)!<br>
<br>
<b>Animation</b><br>
Мы можем создать массив из объектов типа <b>TextureRegion </b> и передать его в конструктор нового объекта типа <b>Animation</b>:<br>
<pre><code class="java">TextureRegion[] birds = { birdDown, bird, birdUp }; <span class="comment">// создаем массив из объектов TextureRegion</span>
birdAnimation = <span class="keyword">new</span> Animation(<span class="number">0.06</span>f, birds); <span class="comment">// Создаем новый объект типа Animation в котором каждый фрейм длиться 0.06 секунд, используя созданный массив.</span>
birdAnimation.setPlayMode(Animation.PlayMode.LOOP_PINGPONG); <span class="comment">// Выставляем режим проигрывания типа ping pong, анимация будет проигрываться вперед-назад.</span>
</code></pre><br>
Мы выделили на <b>Animation </b>3 кадра. Смена кадров будет происходить каждые <b>0,06</b> секунд (вниз, середина, вверх, середина, вниз, ...).<br>
<br>
<h2>Скачать файл с текстурой</h2><br>
Скачайте предоставленную нижу текстуру и поместите ее внутри ZombieBird-android проекта, в папку assets/data/! Это очень важно.<br>
<br>
Заметка об использовании картинок: если вы будете когда-либо обновлять картинки (а вы будете, если испольуете свои собственные), вам необходимо почистить проект в Eclipse, чтобы обновления вступили в силу. Сделайте это сейчас, сразу после того как добавите скачанную текстуру, <b>Project &gt; Clean &gt; Clean all projects</b>.<br>
<br>
<img src="./tutorial_files/3c9e7121586d47549026adcfd9963c7f.png"><br>
<b>Скачать файл</b><br>
<img src="./tutorial_files/daf5c5cb31c146edab32c17ae2d570c8.png" align="left"><a href="http://www.kilobolt.com/uploads/1/2/5/7/12571940/texture.png">texture.png</a><br>
<br>
<br>
<br>
<hr><br>
<br>
<img src="./tutorial_files/c5def657d59a4dfc94083b4ffc420942.png" align="left"> Убедитесь, что вы поместили вашу картинку в правильную папку, как показано слева (заметьте, что мы внутри <b>ZombieBird-android</b> проекта. Вы можете удалить libgdx.png файл, который по умолчанию идет вместе с libGDX).<br>
<br>
Если все правильно, не забудьте почистить проект и продолжим дальше.<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<h2>Вызовем Load метод</h2><br>
Наш <b>AssetLoader </b> готов (и вы скачали картинку и поместили ее в правильную папку, а также почистили проект), мы откроем класс <b>ZBGame</b>, так что мы сможем добавить загруку всех картинок до инициализации <b>GameScreen</b>. Мы добавим следующую строчку в методе create (перед строчкой создания GameScreen):<br>
<pre><code class="java">AssetLoader.load(); (Import com.kilobolt.zbhelpers.AssetLoader)
</code></pre><br>
Мы так же должны вызывать <b>AssetLoader.dispose()</b> когда метод dispose нашего класса ZBGame вызывается кроссплатформенным кодом. Чтобы это сделать, мы должны добавить переопределение существующего метода dispose в наш класс.<br>
<br>
Кажется, не много запутанным и сложным, но на самом деле нам нужно сделать всего лишь следующее (полный пример кода):<br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.zombiebird;

<span class="keyword">import</span> com.badlogic.gdx.Game;
<span class="keyword">import</span> com.badlogic.gdx.Gdx;
<span class="keyword">import</span> com.kilobolt.screens.GameScreen;
<span class="keyword">import</span> com.kilobolt.zbhelpers.AssetLoader;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ZBGame</span> <span class="keyword">extends</span> <span class="title">Game</span> {</span>

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> create() {
        Gdx.app.log(<span class="string">"ZBGame"</span>, <span class="string">"created"</span>);
        AssetLoader.load();
        setScreen(<span class="keyword">new</span> GameScreen());
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> dispose() {
        <span class="keyword">super</span>.dispose();
        AssetLoader.dispose();
    }
}
</code></pre><br>
Теперь, когда все наши картинки загружены, мы можем начать отрисовывать их в <b>GameRenderer</b>!<br>
Давайте откроем его.<br>
<br>
Чтобы отрисовать <b>TextureRegion</b>, нам необходимо создать <b>SpriteBatch </b> (так же как мы это проделали с ShapeRenderer). SpriteBatch отрисовывает картинки за нас, используя переданные указатели (обычно это <b>x, y, width </b>и <b>height</b>). Давайте удалим весь не существенный код из GameRenderer и создадим SpriteBatch, как показано ниже.<br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.gameworld;

<span class="keyword">import</span> com.badlogic.gdx.Gdx;
<span class="keyword">import</span> com.badlogic.gdx.graphics.GL20;
<span class="keyword">import</span> com.badlogic.gdx.graphics.OrthographicCamera;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.SpriteBatch;
<span class="keyword">import</span> com.badlogic.gdx.graphics.glutils.ShapeRenderer;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameRenderer</span> {</span>

    <span class="keyword">private</span> GameWorld myWorld;
    <span class="keyword">private</span> OrthographicCamera cam;
    <span class="keyword">private</span> ShapeRenderer shapeRenderer;

    <span class="keyword">private</span> SpriteBatch batcher;

    <span class="keyword">public</span> GameRenderer(GameWorld world) {
        myWorld = world;
        cam = <span class="keyword">new</span> OrthographicCamera();
        cam.setToOrtho(<span class="keyword">true</span>, <span class="number">137</span>, <span class="number">204</span>);

        batcher = <span class="keyword">new</span> SpriteBatch();
        <span class="comment">// привяжите batcher к камере</span>
        batcher.setProjectionMatrix(cam.combined);

        shapeRenderer = <span class="keyword">new</span> ShapeRenderer();
        shapeRenderer.setProjectionMatrix(cam.combined);
    }

    <span class="keyword">public</span> <span class="keyword">void</span> render() {

        Gdx.gl.glClearColor(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);
        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);

    }

}
</code></pre><br>
Мы должны изменить ширину нашей камеры на <b>136</b>, а также изменить высоту на высоту игры определенную в <b>GameScreen</b>. Чтобы сделать это, мы изменим наш конструктор, чтобы получать на вход два аргумента <b>gameHeight </b> и <b>midPointY</b>.<br>
<br>
Добавьте эти две новые переменные в класс (не удаляйте старые четыре) и измените конструктор следующим обращом (убедитесь, что вы изменяете <b>width </b> и <b>height</b> на 136 и на значение из gameHeight соответственно):<br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.gameworld;

<span class="keyword">import</span> com.badlogic.gdx.Gdx;
<span class="keyword">import</span> com.badlogic.gdx.graphics.GL20;
<span class="keyword">import</span> com.badlogic.gdx.graphics.OrthographicCamera;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.SpriteBatch;
<span class="keyword">import</span> com.badlogic.gdx.graphics.glutils.ShapeRenderer;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameRenderer</span> {</span>

    <span class="keyword">private</span> GameWorld myWorld;
    <span class="keyword">private</span> OrthographicCamera cam;
    <span class="keyword">private</span> ShapeRenderer shapeRenderer;

    <span class="keyword">private</span> SpriteBatch batcher;

    <span class="keyword">private</span> <span class="keyword">int</span> midPointY;
    <span class="keyword">private</span> <span class="keyword">int</span> gameHeight;

    <span class="keyword">public</span> GameRenderer(GameWorld world, <span class="keyword">int</span> gameHeight, <span class="keyword">int</span> midPointY) {
        myWorld = world;

        <span class="comment">// слово this ссылается на экземляр текущего класса</span>
        <span class="comment">// мы задаем значения параметрам класса</span>
        <span class="comment">// полченные из GameScreen.</span>
        <span class="keyword">this</span>.gameHeight = gameHeight;
        <span class="keyword">this</span>.midPointY = midPointY;

        cam = <span class="keyword">new</span> OrthographicCamera();
        cam.setToOrtho(<span class="keyword">true</span>, <span class="number">136</span>, gameHeight);

        batcher = <span class="keyword">new</span> SpriteBatch();
        batcher.setProjectionMatrix(cam.combined);
        shapeRenderer = <span class="keyword">new</span> ShapeRenderer();
        shapeRenderer.setProjectionMatrix(cam.combined);
    }

    <span class="keyword">public</span> <span class="keyword">void</span> render() {

        Gdx.gl.glClearColor(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);
        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);

    }
}
</code></pre><br>
Далее, нам так же необходимо добавить аргумент в метод render:<br>
<pre><code class="java"><span class="keyword">public</span> <span class="keyword">void</span> render(<span class="keyword">float</span> runTime) {
   ...
}
</code></pre><br>
Этот аргумент необходим, чтобы определить какой фрейм из анимации птички нам следует отобразить. Объект <b>Animation </b> будет использовать это значение (и ранее заданное значение для длины кадра) чтобы определить какую область текстуры показать.<br>
<br>
Из-за изменений, внесенных в конструктор, нам необходимо исправить появившеся ошибки в GameScreen.<br>
Откройте класс <b>GameScreen </b> и замените следующую строчку:<br>
<pre><code class="java">renderer = <span class="keyword">new</span> GameRenderer(world);
</code></pre><br>
на эту:<br>
<pre><code class="java">renderer = <span class="keyword">new</span> GameRenderer(world, (<span class="keyword">int</span>) gameHeight, midPointY);
</code></pre><br>
Нам так же необходимо создать дополнительную переменную с именем <b>runTime</b>, в которой будет храниться значение как долго шла игра. Мы передадим это значение в <b>render </b> метод класса <b>GameRenderer</b>!<br>
<br>
Создайте переменную в классе с именем runTime и задайте ей стартовое значение <b>0</b>.<br>
<pre><code class="java"><span class="keyword">private</span> <span class="keyword">float</span> runTime = <span class="number">0</span>;
</code></pre><br>
Внутри метода <b>render(float delta)</b>, увеличьте значение runTime на значение из <b>delta </b>и передайте новое значение в метод render (где мы будем использовать полученное значение для отрисовки анимации):<br>
<pre><code class="java"><span class="annotation">@Override</span>
<span class="keyword">public</span> <span class="keyword">void</span> render(<span class="keyword">float</span> delta) {
    runTime += delta;
    world.update(delta);
    renderer.render(runTime);
}
</code></pre><br>
Ваш класс <b>GameScreen </b>должен был получиться следующим:<br>
<div class="spoiler"><b class="spoiler_title">GameScreen.java</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.screens;

<span class="keyword">import</span> com.badlogic.gdx.Gdx;
<span class="keyword">import</span> com.badlogic.gdx.Screen;
<span class="keyword">import</span> com.kilobolt.gameworld.GameRenderer;
<span class="keyword">import</span> com.kilobolt.gameworld.GameWorld;
<span class="keyword">import</span> com.kilobolt.zbhelpers.InputHandler;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameScreen</span> <span class="keyword">implements</span> <span class="title">Screen</span> {</span>

    <span class="keyword">private</span> GameWorld world;
    <span class="keyword">private</span> GameRenderer renderer;
    <span class="keyword">private</span> <span class="keyword">float</span> runTime;

    <span class="comment">// Это контруктор класса, не объявление класса</span>
    <span class="keyword">public</span> GameScreen() {

        <span class="keyword">float</span> screenWidth = Gdx.graphics.getWidth();
        <span class="keyword">float</span> screenHeight = Gdx.graphics.getHeight();
        <span class="keyword">float</span> gameWidth = <span class="number">136</span>;
        <span class="keyword">float</span> gameHeight = screenHeight / (screenWidth / gameWidth);

        <span class="keyword">int</span> midPointY = (<span class="keyword">int</span>) (gameHeight / <span class="number">2</span>);

        world = <span class="keyword">new</span> GameWorld(midPointY);
        renderer = <span class="keyword">new</span> GameRenderer(world, (<span class="keyword">int</span>) gameHeight, midPointY);

        Gdx.input.setInputProcessor(<span class="keyword">new</span> InputHandler(world.getBird()));

    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> render(<span class="keyword">float</span> delta) {
        runTime += delta;
        world.update(delta);
        renderer.render(runTime);
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> resize(<span class="keyword">int</span> width, <span class="keyword">int</span> height) {

    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> show() {
        Gdx.app.log(<span class="string">"GameScreen"</span>, <span class="string">"show called"</span>);
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> hide() {
        Gdx.app.log(<span class="string">"GameScreen"</span>, <span class="string">"hide called"</span>);
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> pause() {
        Gdx.app.log(<span class="string">"GameScreen"</span>, <span class="string">"pause called"</span>);
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> resume() {
        Gdx.app.log(<span class="string">"GameScreen"</span>, <span class="string">"resume called"</span>);
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> dispose() {
        <span class="comment">// оставьте пустым</span>
    }

}
</code></pre><br>
</div></div><br>
Я извиняюсь за все эти прыжки по файлам! Мы сфокусируемся на одном методе только чтобы вспомнить День 6. :)<br>
<br>
Вернитесь в класс GameRenderer и измените методо render следующим образом:<br>
<div class="spoiler"><b class="spoiler_title">GameRenderer.java</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.gameworld;

<span class="keyword">import</span> com.badlogic.gdx.Gdx;
<span class="keyword">import</span> com.badlogic.gdx.graphics.GL20;
<span class="keyword">import</span> com.badlogic.gdx.graphics.OrthographicCamera;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.SpriteBatch;
<span class="keyword">import</span> com.badlogic.gdx.graphics.glutils.ShapeRenderer;
<span class="keyword">import</span> com.badlogic.gdx.graphics.glutils.ShapeRenderer.ShapeType;
<span class="keyword">import</span> com.kilobolt.gameobjects.Bird;
<span class="keyword">import</span> com.kilobolt.zbhelpers.AssetLoader;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameRenderer</span> {</span>

    <span class="keyword">private</span> GameWorld myWorld;
    <span class="keyword">private</span> OrthographicCamera cam;
    <span class="keyword">private</span> ShapeRenderer shapeRenderer;

    <span class="keyword">private</span> SpriteBatch batcher;

    <span class="keyword">private</span> <span class="keyword">int</span> midPointY;
    <span class="keyword">private</span> <span class="keyword">int</span> gameHeight;

    <span class="keyword">public</span> GameRenderer(GameWorld world, <span class="keyword">int</span> gameHeight, <span class="keyword">int</span> midPointY) {
        myWorld = world;

        <span class="comment">// слово this ссылается на экземляр текущего класса</span>
        <span class="comment">// мы задаем значения параметрам класса</span>
        <span class="comment">// полченные из GameScreen.</span>
        <span class="keyword">this</span>.gameHeight = gameHeight;
        <span class="keyword">this</span>.midPointY = midPointY;

        cam = <span class="keyword">new</span> OrthographicCamera();
        cam.setToOrtho(<span class="keyword">true</span>, <span class="number">136</span>, gameHeight);

        batcher = <span class="keyword">new</span> SpriteBatch();
        batcher.setProjectionMatrix(cam.combined);
        shapeRenderer = <span class="keyword">new</span> ShapeRenderer();
        shapeRenderer.setProjectionMatrix(cam.combined);
    }

    <span class="keyword">public</span> <span class="keyword">void</span> render(<span class="keyword">float</span> runTime) {

        <span class="comment">// мы уберем это из цикла далее, для улучшения производительности</span>
        Bird bird = myWorld.getBird();

        <span class="comment">// Заполним задний фон одним цветом</span>
        Gdx.gl.glClearColor(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);
        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);

        <span class="comment">// Стартуем ShapeRenderer</span>
        shapeRenderer.begin(ShapeType.Filled);

        <span class="comment">// Отрисуем Background цвет</span>
        shapeRenderer.setColor(<span class="number">55</span> / <span class="number">255.0</span>f, <span class="number">80</span> / <span class="number">255.0</span>f, <span class="number">100</span> / <span class="number">255.0</span>f, <span class="number">1</span>);
        shapeRenderer.rect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">136</span>, midPointY + <span class="number">66</span>);

        <span class="comment">// Отрисуем Grass</span>
        shapeRenderer.setColor(<span class="number">111</span> / <span class="number">255.0</span>f, <span class="number">186</span> / <span class="number">255.0</span>f, <span class="number">45</span> / <span class="number">255.0</span>f, <span class="number">1</span>);
        shapeRenderer.rect(<span class="number">0</span>, midPointY + <span class="number">66</span>, <span class="number">136</span>, <span class="number">11</span>);

        <span class="comment">// Отрисуем Dirt</span>
        shapeRenderer.setColor(<span class="number">147</span> / <span class="number">255.0</span>f, <span class="number">80</span> / <span class="number">255.0</span>f, <span class="number">27</span> / <span class="number">255.0</span>f, <span class="number">1</span>);
        shapeRenderer.rect(<span class="number">0</span>, midPointY + <span class="number">77</span>, <span class="number">136</span>, <span class="number">52</span>);

        <span class="comment">// Заканчиваем ShapeRenderer</span>
        shapeRenderer.end();

        <span class="comment">// Стартуем SpriteBatch</span>
        batcher.begin();
        <span class="comment">// Отменим прозрачность</span>
        <span class="comment">// Это хорошо для производительности, когда отрисовываем картинки без прозрачности</span>
        batcher.disableBlending();
        batcher.draw(AssetLoader.bg, <span class="number">0</span>, midPointY + <span class="number">23</span>, <span class="number">136</span>, <span class="number">43</span>);

        <span class="comment">// Птичке нужна прозрачность, поэтому включаем ее</span>
        batcher.enableBlending();

        <span class="comment">// Отрисуем птичку на ее координатах. Получим Animation объект из AssetLoader</span>
        <span class="comment">// Передадим runTime переменную чтобы получить текущий кадр.</span>
        batcher.draw(AssetLoader.birdAnimation.getKeyFrame(runTime),
                bird.getX(), bird.getY(), bird.getWidth(), bird.getHeight());

        <span class="comment">// Заканчиваем SpriteBatch</span>
        batcher.end();

    }
}
</code></pre><br>
</div></div><br>
Попробуйте запустить ваш код (DesktopLauncher.java) и начните кликать (иначе ваша птичка улетит в небытие)! У вас должно было получиться следующее:<br>
<img src="./tutorial_files/20069469150c41b5a7d22aa573871623.png"><br>
<br>
Давайте вернемся обратно в наш render метод и посмотрим, что там за логика получилась. Мы всегда первым делом отрисовываем задний фон, потому что отрисовка всегда идет по слоям. Мы начинаем рисовать какие обычные цвета. Мы предпочли отрисовать заполненый одним цветом <b>Shape</b>, чем использовать <b>TextureRegion </b> для заполнения заднего фона.<br>
<br>
Мы отрисовываем временный зеленый прямоугольник, чтобы показать где должна быть трава, и коричневый прямоугольник, где у нас будет грязь.<br>
<br>
Далее мы стартуем <b>SpriteBatch</b>, опять-таки, начав отрисовывать картинку заднего фона — город. Далее мы получаем текущий <b>TextureRegion </b> из нашего объекта <b>Animation </b>используя <b>runTime </b>и отрисовываем птицу с включенным наложением(blending). Прочитайте комментарии которые я сделал внутри метода <b>render()</b>!<br>
Они важны для вашего понимая.<br>
<br>
Ну вот, можно сказать — мы начали! Наш персонаж Flaps опять летает, и игра начинает приобретать форму. Присоединяйтесь ко мне в следующем Дне 7, где мы добавим прокручиваемые элементы нашей игры: траву и трубы.<br>
<br>
<h2>Исходный код за день</h2><br>
Если вы вне настроения писать код самостоятельно, скачайте его отсюда:<br>
<img src="./tutorial_files/e273ed1a4ed342abb148c53ad824d8f3.png" hspace="4" vspace="4" align="left"><a href="http://www.kilobolt.com/uploads/1/2/5/7/12571940/day_6.zip">day_6.zip</a><br>
<br>
<br>
<br>
<br>
<img src="./tutorial_files/4f355491bc81468cbcb05427325b49ca.png"> <a href="http://habrahabr.ru/post/243471/#ContentList">К Оглавлению</a><br>
<br>
<br>
<br>
<br>
<br>
<br>
<a name="Day7"></a><h1><img src="./tutorial_files/4e55852eb2a04db2a1200c031304129c.png"> День 7 — Трава, Птица и Труба с черепом</h1><hr><br>
Добро пожаловать седьмой день! В сегодняшнем уроке мы изучим как вращать нашу птицу и как прокручивать траву и трубы с черепами. Нам предстоит внести изменения в класс <b>Bird </b>и создать новые классы, которые будут содержать логику для травы и труб.<br>
<br>
Давайте начнем!<br>
<br>
<h2>Вращая птицу</h2><br>
Прежде чем приступить к написанию кода, давайте исследуем как может вращаться наша птица. В Flappy Bird птичка имеет два главных состояния. Птица или взлетает после клика или падает. В этих двух состояних, птица вращается следующим образом:<br>
<img src="./tutorial_files/273d5e6d98b84caabb97e9379978532a.png"><br>
<br>
Вращение контролируется используя скорость по <b>Y</b>. В нашей игре, ускоряется книзу благодаря гравитации (это значит, что скорость увеличивается). Когда наша скорость отрисательная (это означает, что наша птица движется кверху), птица начнет вращаться против часовой стрелки. Когда наша скорость больше чем некое положительное значение, птица начнет вращаться по часовой стрелке (мы не начинаем вращать птицу пока она не начнет ускоряться).<br>
<br>
<h2>Анимации</h2><br>
Мы так же должны обратить внимание на анимацию. Птица не должна махать крыльями пока падает. Вместо этого, ее крылья должны вернуться на середину. Как только птица начнет взлетать, она опять начнет махать крыльями.<br>
<br>
Давайте реализуем это в нашем коде:<br>
<ul>
<li>Мы начнем с создания двух методов. Мы будем использовать полученный опытным путем значения в этих методах. Создайте эти методу, где-нибудь в классе <b>Bird</b>:<br>
<pre><code class="java"><span class="keyword">public</span> <span class="keyword">boolean</span> isFalling() {
    <span class="keyword">return</span> velocity.y &gt; <span class="number">110</span>;
}

<span class="keyword">public</span> <span class="keyword">boolean</span> shouldntFlap() {
    <span class="keyword">return</span> velocity.y &gt; <span class="number">70</span>;
}
</code></pre><br>
Мы будем использовать метод <b>isFalling</b>, чтобы определить следует ли повернуть птицу вниз.<br>
А метод <b>shouldntFlap</b>, чтобы определить, когда наша птица должна перестать махать крыльями.<br>
<br>
</li>
<li>Далее нам необходимо внести не много изменений в метод <b>update</b>. Помните, что у нас есть переменая типа float с именем rotation? Эта переменая будет хранить значение насколько наша птица должна быть повернута. Положительное значение — поворот по часовой стрелке, отрицательно — против часовой стрелки. </li>
</ul><br>
<br>
Добавьте эти два блока кода в конец метода <b>update</b>. Они позаботятся о часовом и противчасовом вращении (взлет и падение).<br>
<pre><code class="java">        <span class="comment">// повернуть против часовой стрелки</span>
        <span class="keyword">if</span> (velocity.y &lt; <span class="number">0</span>) {
            rotation -= <span class="number">600</span> * delta;

            <span class="keyword">if</span> (rotation &lt; -<span class="number">20</span>) {
                rotation = -<span class="number">20</span>;
            }
        }

        <span class="comment">// Повернуть по часовой стрелке</span>
        <span class="keyword">if</span> (isFalling()) {
            rotation += <span class="number">480</span> * delta;
            <span class="keyword">if</span> (rotation &gt; <span class="number">90</span>) {
                rotation = <span class="number">90</span>;
            }

        }
</code></pre><br>
Помните, мы увеличиваем наш <b>rotation </b>на <b>delta</b>, так что птица будет вращаться с той же скоростью, даже если игра начнет тормозить (или начнет работать быстрее).<br>
<br>
Обе эти проверки имеют своего рода ограничение по вращению. Если мы перестараемся с поворотом, наша игра исправит это для нас.<br>
<br>
Вот как должен выглядеть ваш <b>Bird </b>класс:<br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.gameobjects;

<span class="keyword">import</span> com.badlogic.gdx.math.Vector2;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bird</span> {</span>

    <span class="keyword">private</span> Vector2 position;
    <span class="keyword">private</span> Vector2 velocity;
    <span class="keyword">private</span> Vector2 acceleration;

    <span class="keyword">private</span> <span class="keyword">float</span> rotation; <span class="comment">// For handling bird rotation</span>
    <span class="keyword">private</span> <span class="keyword">int</span> width;
    <span class="keyword">private</span> <span class="keyword">int</span> height;

    <span class="keyword">public</span> Bird(<span class="keyword">float</span> x, <span class="keyword">float</span> y, <span class="keyword">int</span> width, <span class="keyword">int</span> height) {
        <span class="keyword">this</span>.width = width;
        <span class="keyword">this</span>.height = height;
        position = <span class="keyword">new</span> Vector2(x, y);
        velocity = <span class="keyword">new</span> Vector2(<span class="number">0</span>, <span class="number">0</span>);
        acceleration = <span class="keyword">new</span> Vector2(<span class="number">0</span>, <span class="number">460</span>);
    }

    <span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {

        velocity.add(acceleration.cpy().scl(delta));

        <span class="keyword">if</span> (velocity.y &gt; <span class="number">200</span>) {
            velocity.y = <span class="number">200</span>;
        }

        position.add(velocity.cpy().scl(delta));

        <span class="comment">// Повернуть против часовой стрелки</span>
        <span class="keyword">if</span> (velocity.y &lt; <span class="number">0</span>) {
            rotation -= <span class="number">600</span> * delta;

            <span class="keyword">if</span> (rotation &lt; -<span class="number">20</span>) {
                rotation = -<span class="number">20</span>;
            }
        }

        <span class="comment">// Повернуть по часовой стрелке</span>
        <span class="keyword">if</span> (isFalling()) {
            rotation += <span class="number">480</span> * delta;
            <span class="keyword">if</span> (rotation &gt; <span class="number">90</span>) {
                rotation = <span class="number">90</span>;
            }

        }

    }

    <span class="keyword">public</span> <span class="keyword">boolean</span> isFalling() {
        <span class="keyword">return</span> velocity.y &gt; <span class="number">110</span>;
    }

    <span class="keyword">public</span> <span class="keyword">boolean</span> shouldntFlap() {
        <span class="keyword">return</span> velocity.y &gt; <span class="number">70</span>;
    }

    <span class="keyword">public</span> <span class="keyword">void</span> onClick() {
        velocity.y = -<span class="number">140</span>;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getX() {
        <span class="keyword">return</span> position.x;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getY() {
        <span class="keyword">return</span> position.y;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getWidth() {
        <span class="keyword">return</span> width;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getHeight() {
        <span class="keyword">return</span> height;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getRotation() {
        <span class="keyword">return</span> rotation;
    }

}
</code></pre><br>
Великолепно. Когда мы это все добавили, нам остается только перейти в <b>GameRenderer </b>и использовать метод <b>shouldntFlap</b>, чтобы определить надо ли анимировать нашу птицу или нет.<br>
<br>
<h2>Внимание</h2><br>
Ранее упоминалось в Дне 5 (повторяется тут, потому что это важно!).<br>
<br>
Каждый раз, как вы создаете новый <b>Object</b>, вы выделяете не много памяти в <b>RAM </b> для этого объекта (если быть точнее, то в <b>Heap</b>). Как только ваш <b>Heap </b> переполняется, подпрограмма, которая называется <b>Garbage Collector</b> (далее GC, Мусоросборщик/Сборщик), выходит на сцену и чистит вашу память, чтобы избежать ситуации с нехваткой памяти. Это круто, но не, когда вы создаете игру. Во время работы <b>GC</b>, ваша игра начинает притормаживать на несколько значительных милисекунд. Чтобы избежать частой работы <b>GC</b>, вам надо избегать создания новых объектов, по возможности.<br>
<br>
Я недавно открыл для себя, что метод <b>Vector2.cpy()</b> создает новый экземляр типа <b>Vector2</b>, вместо того чтобы повторно использовать существующий экземпляр. Это означает, что при <b>60 FPS</b>, вызывая Vector2.cpy(), вы создадите <b>60 </b><b>новых </b>объектов типа Vector2 каждую секунду, что в свою очеред заставить Java GC появляться на сцене очень часто.<br>
<br>
Просто держите это в памяти. Мы решим эту проблему не много позже.<br>
<br>
<h2>Почистим GameRenderer</h2><br>
Чтобы достигнуть высокой производительности в играх, вы должны минимизировать работу которая выполняется в игровом цикле. В шестом дне, мы написали код который нарушает этот принцип. Посмотрите в метод <b>render</b>. У нас там следующая строка:<br>
<pre><code class="java">Bird bird = myWorld.getBird(); 
</code></pre><br>
<br>
Каждый раз как вызывается метод render (около <b>60 </b>раз в секунду), мы просим нашу игру найти наш <b>myWorld</b>, далее найти объект <b>Bird </b>и вернуть его в <b>GameRenderer </b>и поставить ее в стек как локальную переменную.<br>
<br>
Мы изменим этот код таким образом, чтобы получать объект Bird один раз, когда GameRenderer впервые создается и сохранить объект Bird как переменную класса GameRenderer.<br>
<br>
Мы собираемся это проделать так же с TextureRegions из AssetLoader и со всеми новыми объектами, которые мы когда-либо создадим.<br>
<br>
<ul>
<li>Начните с добавления следующих переменных в класс <b>GameRenderer </b>(так же сделайте импорт классов если необходимо, используйте для импорта анимации com.badlogic.gdx.graphics.g2d.Animation):<br>
<pre><code class="java"><span class="comment">// Game Objects</span>
<span class="keyword">private</span> Bird bird;

<span class="comment">// Game Assets</span>
<span class="keyword">private</span> TextureRegion bg, grass;
<span class="keyword">private</span> Animation birdAnimation; 
<span class="keyword">private</span> TextureRegion birdMid, birdDown, birdUp;
<span class="keyword">private</span> TextureRegion skullUp, skullDown, bar;
</code></pre><br>
Далее, мы их проинициализируем в конструкторе. Но лучше чем засорят конструктор, давайте создадим два вспомогательных метода, которые проинициализируют эти переменные. <br>
<br>
</li>
<li>Добавьте следующие два метода в GameRenderer:<br>
<pre><code class="java">    <span class="keyword">private</span> <span class="keyword">void</span> initGameObjects() {
        bird = myWorld.getBird();
    }

    <span class="keyword">private</span> <span class="keyword">void</span> initAssets() {
        bg = AssetLoader.bg;
        grass = AssetLoader.grass;
        birdAnimation = AssetLoader.birdAnimation;
        birdMid = AssetLoader.bird;
        birdDown = AssetLoader.birdDown;
        birdUp = AssetLoader.birdUp;
        skullUp = AssetLoader.skullUp;
        skullDown = AssetLoader.skullDown;
        bar = AssetLoader.bar;
    }
</code></pre></li>
</ul><br>
<br>
Далее мы вызовем эти методы в конструкторе:<br>
<pre><code class="java">    <span class="keyword">public</span> GameRenderer(GameWorld world, <span class="keyword">int</span> gameHeight, <span class="keyword">int</span> midPointY) {
        myWorld = world;

        <span class="keyword">this</span>.gameHeight = gameHeight;
        <span class="keyword">this</span>.midPointY = midPointY;

        cam = <span class="keyword">new</span> OrthographicCamera();
        cam.setToOrtho(<span class="keyword">true</span>, <span class="number">136</span>, gameHeight);

        batcher = <span class="keyword">new</span> SpriteBatch();
        batcher.setProjectionMatrix(cam.combined);
        shapeRenderer = <span class="keyword">new</span> ShapeRenderer();
        shapeRenderer.setProjectionMatrix(cam.combined);

        <span class="comment">// Вызовем вспомогательные методы, чтобы проиницилизировать переменные класса</span>
        initGameObjects();
        initAssets();
    }
</code></pre><br>
Наконец, мы должны внести изменения в <b>render </b>метод. А если быть точнее, то мы удалим все упоминания об <b>AssetLoader </b>и удалим строку:<br>
<pre><code class="java">Bird bird = myWorld.getBird().
</code></pre><br>
Далее мы модифицируем методы которые отрисовывают нашу птичку, так что мы сможем использовать <b>rotation</b>. Так же изменим все упоминания о AssetLoader (в частности AssetLoader.bg). Вот как должен выглядеть результат вашей работы:<br>
<pre><code class="java">    <span class="keyword">public</span> <span class="keyword">void</span> render(<span class="keyword">float</span> runTime) {

        Gdx.gl.glClearColor(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);
        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);

        shapeRenderer.begin(ShapeType.Filled);

        <span class="comment">// Заливаем задний фон</span>
        shapeRenderer.setColor(<span class="number">55</span> / <span class="number">255.0</span>f, <span class="number">80</span> / <span class="number">255.0</span>f, <span class="number">100</span> / <span class="number">255.0</span>f, <span class="number">1</span>);
        shapeRenderer.rect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">136</span>, midPointY + <span class="number">66</span>);

        <span class="comment">// Рисуем Grass</span>
        shapeRenderer.setColor(<span class="number">111</span> / <span class="number">255.0</span>f, <span class="number">186</span> / <span class="number">255.0</span>f, <span class="number">45</span> / <span class="number">255.0</span>f, <span class="number">1</span>);
        shapeRenderer.rect(<span class="number">0</span>, midPointY + <span class="number">66</span>, <span class="number">136</span>, <span class="number">11</span>);

        <span class="comment">// Рисуем Dirt</span>
        shapeRenderer.setColor(<span class="number">147</span> / <span class="number">255.0</span>f, <span class="number">80</span> / <span class="number">255.0</span>f, <span class="number">27</span> / <span class="number">255.0</span>f, <span class="number">1</span>);
        shapeRenderer.rect(<span class="number">0</span>, midPointY + <span class="number">77</span>, <span class="number">136</span>, <span class="number">52</span>);

        shapeRenderer.end();

        batcher.begin();
        batcher.disableBlending();
        batcher.draw(bg, <span class="number">0</span>, midPointY + <span class="number">23</span>, <span class="number">136</span>, <span class="number">43</span>);

        batcher.enableBlending();

        <span class="keyword">if</span> (bird.shouldntFlap()) {
            batcher.draw(birdMid, bird.getX(), bird.getY(),
                    bird.getWidth() / <span class="number">2.0</span>f, bird.getHeight() / <span class="number">2.0</span>f,
                    bird.getWidth(), bird.getHeight(), <span class="number">1</span>, <span class="number">1</span>, bird.getRotation());

        } <span class="keyword">else</span> {
            batcher.draw(birdAnimation.getKeyFrame(runTime), bird.getX(),
                    bird.getY(), bird.getWidth() / <span class="number">2.0</span>f,
                    bird.getHeight() / <span class="number">2.0</span>f, bird.getWidth(), bird.getHeight(),
                    <span class="number">1</span>, <span class="number">1</span>, bird.getRotation());
        }

        batcher.end();

    }
</code></pre><br>
А ваш класс <b>GameRenderer </b>должен выглядеть так:<br>
<div class="spoiler"><b class="spoiler_title">GameRenderer.java</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.gameworld;

<span class="keyword">import</span> com.badlogic.gdx.Gdx;
<span class="keyword">import</span> com.badlogic.gdx.graphics.GL20;
<span class="keyword">import</span> com.badlogic.gdx.graphics.OrthographicCamera;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.Animation;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.SpriteBatch;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.TextureRegion;
<span class="keyword">import</span> com.badlogic.gdx.graphics.glutils.ShapeRenderer;
<span class="keyword">import</span> com.badlogic.gdx.graphics.glutils.ShapeRenderer.ShapeType;
<span class="keyword">import</span> com.kilobolt.gameobjects.Bird;
<span class="keyword">import</span> com.kilobolt.zbhelpers.AssetLoader;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameRenderer</span> {</span>

    <span class="keyword">private</span> GameWorld myWorld;
    <span class="keyword">private</span> OrthographicCamera cam;
    <span class="keyword">private</span> ShapeRenderer shapeRenderer;

    <span class="keyword">private</span> SpriteBatch batcher;

    <span class="keyword">private</span> <span class="keyword">int</span> midPointY;
    <span class="keyword">private</span> <span class="keyword">int</span> gameHeight;

    <span class="comment">// Объеты игры</span>
    <span class="keyword">private</span> Bird bird;

    <span class="comment">// Assets игры</span>
    <span class="keyword">private</span> TextureRegion bg, grass;
    <span class="keyword">private</span> Animation birdAnimation;
    <span class="keyword">private</span> TextureRegion birdMid, birdDown, birdUp;
    <span class="keyword">private</span> TextureRegion skullUp, skullDown, bar;

    <span class="keyword">public</span> GameRenderer(GameWorld world, <span class="keyword">int</span> gameHeight, <span class="keyword">int</span> midPointY) {
        myWorld = world;

        <span class="keyword">this</span>.gameHeight = gameHeight;
        <span class="keyword">this</span>.midPointY = midPointY;

        cam = <span class="keyword">new</span> OrthographicCamera();
        cam.setToOrtho(<span class="keyword">true</span>, <span class="number">136</span>, gameHeight);

        batcher = <span class="keyword">new</span> SpriteBatch();
        batcher.setProjectionMatrix(cam.combined);
        shapeRenderer = <span class="keyword">new</span> ShapeRenderer();
        shapeRenderer.setProjectionMatrix(cam.combined);

        <span class="comment">// Вызовем вспомогательные методы, чтобы проиницилизировать переменные класса</span>
        initGameObjects();
        initAssets();
    }

    <span class="keyword">public</span> <span class="keyword">void</span> render(<span class="keyword">float</span> runTime) {

        Gdx.gl.glClearColor(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);
        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);

        shapeRenderer.begin(ShapeType.Filled);

        <span class="comment">// Заливаем задний фон</span>
        shapeRenderer.setColor(<span class="number">55</span> / <span class="number">255.0</span>f, <span class="number">80</span> / <span class="number">255.0</span>f, <span class="number">100</span> / <span class="number">255.0</span>f, <span class="number">1</span>);
        shapeRenderer.rect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">136</span>, midPointY + <span class="number">66</span>);

        <span class="comment">// Рисуем Grass</span>
        shapeRenderer.setColor(<span class="number">111</span> / <span class="number">255.0</span>f, <span class="number">186</span> / <span class="number">255.0</span>f, <span class="number">45</span> / <span class="number">255.0</span>f, <span class="number">1</span>);
        shapeRenderer.rect(<span class="number">0</span>, midPointY + <span class="number">66</span>, <span class="number">136</span>, <span class="number">11</span>);

        <span class="comment">// Рисуем Dirt</span>
        shapeRenderer.setColor(<span class="number">147</span> / <span class="number">255.0</span>f, <span class="number">80</span> / <span class="number">255.0</span>f, <span class="number">27</span> / <span class="number">255.0</span>f, <span class="number">1</span>);
        shapeRenderer.rect(<span class="number">0</span>, midPointY + <span class="number">77</span>, <span class="number">136</span>, <span class="number">52</span>);

        shapeRenderer.end();

        batcher.begin();
        batcher.disableBlending();
        batcher.draw(bg, <span class="number">0</span>, midPointY + <span class="number">23</span>, <span class="number">136</span>, <span class="number">43</span>);

        batcher.enableBlending();

        <span class="keyword">if</span> (bird.shouldntFlap()) {
            batcher.draw(birdMid, bird.getX(), bird.getY(),
                    bird.getWidth() / <span class="number">2.0</span>f, bird.getHeight() / <span class="number">2.0</span>f,
                    bird.getWidth(), bird.getHeight(), <span class="number">1</span>, <span class="number">1</span>, bird.getRotation());

        } <span class="keyword">else</span> {
            batcher.draw(birdAnimation.getKeyFrame(runTime), bird.getX(),
                    bird.getY(), bird.getWidth() / <span class="number">2.0</span>f,
                    bird.getHeight() / <span class="number">2.0</span>f, bird.getWidth(), bird.getHeight(),
                    <span class="number">1</span>, <span class="number">1</span>, bird.getRotation());
        }

        batcher.end();

    }

    <span class="keyword">private</span> <span class="keyword">void</span> initGameObjects() {
        bird = myWorld.getBird();
    }

    <span class="keyword">private</span> <span class="keyword">void</span> initAssets() {
        bg = AssetLoader.bg;
        grass = AssetLoader.grass;
        birdAnimation = AssetLoader.birdAnimation;
        birdMid = AssetLoader.bird;
        birdDown = AssetLoader.birdDown;
        birdUp = AssetLoader.birdUp;
        skullUp = AssetLoader.skullUp;
        skullDown = AssetLoader.skullDown;
        bar = AssetLoader.bar;
    }
}
</code></pre><br>
</div></div><br>
Попробуйте запустить ваш код! Ваша птица будет махать крыльями и крутиться, как мы и предполагали.<br>
<br>
<h2>Создаем класс Scrollable </h2><br>
Сейчас мы займемся созданием Травы и Труб в нашей игре:<br>
<img src="./tutorial_files/dd6c12701a81481e83a90bfbee4a7dc6.png"><br>
<br>
Трава и трубы имеют одинаковую скорость передвижения справа на лево. Мы будет работать со следующими параметрами:<br>
<ul>
<li>У нас будет 3 трубы (каждая колона – это одна труба) </li>
<li>Мы будем использовать две длинные полоски травы, соединенные друг с другом горизонтально (в длину) </li>
<li>Когда труба или трава оказываются полностью не видимыми – мы сбрасываем их положение</li>
<li>Чтобы сбросить положение травы, мы просто переместим ее вправо и присоединим к концу второй полосы с травой</li>
<li>Чтобы сбросить положение трубы, мы поместим ее в конец очереди труб, сразу после третьей трубы, а также мы изменим высоту трубы</li>
</ul><br>
<br>
Заметьте, что трубы и трава имеют одинаковое поведение. Мы выделим одинаковую логику в отдельный класс <b>Scrollable </b>и будем его наследовать дочерними классами, такими как <b>Pipe </b>и <b>Grass</b>.<br>
<br>
Часть, где мы сбрасываем параметры объектов может показаться не много запутанной.<br>
Вот пример логики, если у нас 3 трубы:<br>
<ul>
<li>Труба 1, при сбросе положения, должна вставть сразу после Трубы 3</li>
<li>Труба 2, при сбросе положения, должна вставть сразу после Трубы 1</li>
<li>Труба 3, при сбросе положения, должна вставть сразу после Трубы 2</li>
</ul><br>
<br>
Вместо того чтобы свзяывать объекты между собой, и четко знать какой объект встанет за каким объектом, мы создадим объект <b>ScrollHandler </b>который облегчит перемещение объектов. <br>
<br>
Мы начнем с создания класса <b>Scrollable </b>(внутри пакета <b>com.kilobolt.gameobjects</b>) который будет использовать доступные параметры объектов Pipe и Grass.<br>
Pipe и Grass будут иметь следующие параметры:<br>
Параметры класса<br>
<b>position, velocity, width, height </b>и <b>isScrolledLeft </b>типа boolean, чтобы определить когда объект типа <b>Scrollable </b>более не виден и его параметры нужно сбросить.<br>
<br>
Методы:<br>
<b>update </b>и <b>reset </b>и методы доступа к различным переменым класса.<br>
<br>
Полный пример кода (он очень прост и прямолинеен). В нем нет ничего нового, чего мы не видели ранее, за исключением метода reset. Пожалуйста, прочтите комментарии:<br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.gameobjects;

<span class="keyword">import</span> com.badlogic.gdx.math.Vector2;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Scrollable</span> {</span>

    <span class="comment">// Protected похож private, но позволяет наследоваться в дочерних классах.</span>
    <span class="keyword">protected</span> Vector2 position;
    <span class="keyword">protected</span> Vector2 velocity;
    <span class="keyword">protected</span> <span class="keyword">int</span> width;
    <span class="keyword">protected</span> <span class="keyword">int</span> height;
    <span class="keyword">protected</span> <span class="keyword">boolean</span> isScrolledLeft;

    <span class="keyword">public</span> Scrollable(<span class="keyword">float</span> x, <span class="keyword">float</span> y, <span class="keyword">int</span> width, <span class="keyword">int</span> height, <span class="keyword">float</span> scrollSpeed) {
        position = <span class="keyword">new</span> Vector2(x, y);
        velocity = <span class="keyword">new</span> Vector2(scrollSpeed, <span class="number">0</span>);
        <span class="keyword">this</span>.width = width;
        <span class="keyword">this</span>.height = height;
        isScrolledLeft = <span class="keyword">false</span>;
    }

    <span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {
        position.add(velocity.cpy().scl(delta));

        <span class="comment">// Если объект Scrollable более не виден:</span>
        <span class="keyword">if</span> (position.x + width &lt; <span class="number">0</span>) {
            isScrolledLeft = <span class="keyword">true</span>;
        }
    }

    <span class="comment">// Reset: Нужно переопределять в дочернем классе, если необходимо описать</span>
    <span class="comment">// другое поведение</span>
    <span class="keyword">public</span> <span class="keyword">void</span> reset(<span class="keyword">float</span> newX) {
        position.x = newX;
        isScrolledLeft = <span class="keyword">false</span>;
    }

    <span class="comment">// Методы доступа к переменым класса</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> isScrolledLeft() {
        <span class="keyword">return</span> isScrolledLeft;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getTailX() {
        <span class="keyword">return</span> position.x + width;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getX() {
        <span class="keyword">return</span> position.x;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getY() {
        <span class="keyword">return</span> position.y;
    }

    <span class="keyword">public</span> <span class="keyword">int</span> getWidth() {
        <span class="keyword">return</span> width;
    }

    <span class="keyword">public</span> <span class="keyword">int</span> getHeight() {
        <span class="keyword">return</span> height;
    }

}
</code></pre><br>
Теперь, как у нас есть базовый класс Scrollable, мы можем создать дочерние классы, чтобы наследовать его. Создайте следующие два класса, так же в пакете com.kilobolt.gameobjects:<br>
<b>Pipe</b><br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.gameobjects;

<span class="keyword">import</span> java.util.Random;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Pipe</span> <span class="keyword">extends</span> <span class="title">Scrollable</span> {</span>

    <span class="keyword">private</span> Random r;

    <span class="comment">// Когда констуктор Pipe вызван – вызовите конструтор родителя (Scrollable)</span>
    <span class="keyword">public</span> Pipe(<span class="keyword">float</span> x, <span class="keyword">float</span> y, <span class="keyword">int</span> width, <span class="keyword">int</span> height, <span class="keyword">float</span> scrollSpeed) {
        <span class="keyword">super</span>(x, y, width, height, scrollSpeed);
        <span class="comment">// Иницилизируйте объект типа Random для генерации случайных чисел</span>
        r = <span class="keyword">new</span> Random();
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> reset(<span class="keyword">float</span> newX) {
        <span class="comment">// вызовите reset метод в родительском классе (Scrollable)</span>
        <span class="keyword">super</span>.reset(newX);
        <span class="comment">// Измените высоту на случайное значение</span>
        height = r.nextInt(<span class="number">90</span>) + <span class="number">15</span>;
    }

}
</code></pre><br>
<b>Grass</b><br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.gameobjects;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Grass</span> <span class="keyword">extends</span> <span class="title">Scrollable</span> {</span>

    <span class="comment">// Когда констуктор Grass вызван – вызовите конструтор родителя (Scrollable)</span>
    <span class="keyword">public</span> Grass(<span class="keyword">float</span> x, <span class="keyword">float</span> y, <span class="keyword">int</span> width, <span class="keyword">int</span> height, <span class="keyword">float</span> scrollSpeed) {
        <span class="keyword">super</span>(x, y, width, height, scrollSpeed);

    }

}
</code></pre><br>
Оба приведеных выше класса, будут использовать в качестве родителя класс <b>Scrollable </b>(благодаря <b>наследованию</b>), они так же добавят свои параметры и методы (в случае с Pipe – новый аргумент в конструкторе и новый метод). <br>
<br>
Что такое <b><a href="http://habrahabr.ru/users/override/" class="user_link">Override</a></b> и <b>super</b>?<br>
В наследовании, дочерние классы имеют доступ к методам родительского класса. Это значит, что Pipe и Grass смогут использовать метод reset даже не переопределяя его у себя. Это потому, что они, дочерние классы, являются свеого рода расширителями функционала для класса Scrollable, который уже имеет метод reset.<br>
<br>
Например, мы можем сделать, что-то в этом духе:<br>
<pre><code class="java">Grass g = <span class="keyword">new</span> Grass(...);
g.reset(); <span class="comment">// метод reset вызыван из Scrollable.</span>
</code></pre><br>
Если нам понадобится более специфическая логика для какого-то метода из родительского класса, мы можем использовать <a href="http://habrahabr.ru/users/override/" class="user_link">Override</a>, который говорит компилятору следующее: используй этот метод reset из дочернего класса, вместо метода reset в родительском классе. Мы переопределяем метод reset в дочернем классе Pipe. <br>
<br>
Так что когда мы делаем это:<br>
<pre><code class="java">Pipe p = <span class="keyword">new</span> Pipe(...);
p.reset(); <span class="comment">// метод reset вызван из класса Pipe.</span>
</code></pre> <br>
<br>
А что же такое слово <b>super</b>?<br>
Даже во время переопределения, дочерний класс имеет доступ к оригинальному методу в родительском классе. Вызывая super.reset(...) внутри переопределенного метода reset, означает, что оба метода, переопределеный и родительский, будут вызываны.<br>
<br>
<h2>Зачем нам класс Grass?</h2><br>
На данный момент, класс Grass – бессмысленный, потому что в нем нет собственных параметром. Но позже мы добавим параметры для определения <b>колизии </b>и вот из-за этого мы создали отдельный класс для травы. <br>
<br>
Теперь, когда наши <b>Scrollable </b>классы готовы, мы можем реализовать логику для <b>ScrollHandler</b>, который возьмет на себя создание Grass и Pipe объектов, обновление их, и обработку сброса параметров. <br>
<br>
Создайте новый класс <b>ScrollHandler </b>внутри пакета <b>com.kilobolt.gameobjects</b>.<br>
<br>
Мы начнем с легких вещей:<br>
<ul>
<li>Нам надо передать в конструктор значение координаты по оси Y, чтобы знать, где создать нашу землю (где будут трава и нижние трубы) </li>
<li>Нам так же нужны 5 переменных в классе: 2 для объектов типа Grass и 3 для объектов типа Pipe (на данный момент, мы будем полагать, что одна колона это один объект Pipe) </li>
<li>Нам нужмы методы доступа ко всем этим объектам</li>
<li>А так же нам нужен метод update</li>
</ul><br>
<br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.gameobjects;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ScrollHandler</span> {</span>

    <span class="comment">// ScrollHandler создаст все необходимые нам объекты</span>
    <span class="keyword">private</span> Grass frontGrass, backGrass;
    <span class="keyword">private</span> Pipe pipe1, pipe2, pipe3;

    <span class="comment">// ScrollHandler будет использовать следующие константы</span>
    <span class="comment">// чтобы определить, как быстро на перемещать объекты</span>
    <span class="comment">// и какой промежуток между трубами</span>

    <span class="comment">// заглавные буквы используются по договоренности об именовании переменных</span>
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> SCROLL_SPEED = -<span class="number">59</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> PIPE_GAP = <span class="number">49</span>;

    <span class="comment">// конструктор получает значение по Y оси, где нам необходимо создать наши</span>
    <span class="comment">// Grass и Pipe объекты.</span>
    <span class="keyword">public</span> ScrollHandler(<span class="keyword">float</span> yPos) {
    }

    <span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {

    }

    <span class="comment">// методы доступа к переменным класса</span>
    <span class="keyword">public</span> Grass getFrontGrass() {
        <span class="keyword">return</span> frontGrass;
    }

    <span class="keyword">public</span> Grass getBackGrass() {
        <span class="keyword">return</span> backGrass;
    }

    <span class="keyword">public</span> Pipe getPipe1() {
        <span class="keyword">return</span> pipe1;
    }

    <span class="keyword">public</span> Pipe getPipe2() {
        <span class="keyword">return</span> pipe2;
    }

    <span class="keyword">public</span> Pipe getPipe3() {
        <span class="keyword">return</span> pipe3;
    }

}
</code></pre><br>
Теперь нам необходимо сосредоточиться на конструкторе и методе <b>update</b>. Внутри конструктора мы инициализируем все <b>Scrollable </b>объекты: <br>
<pre><code class="java">frontGrass = <span class="keyword">new</span> Grass(<span class="number">0</span>, yPos, <span class="number">143</span>, <span class="number">11</span>, SCROLL_SPEED);
backGrass = <span class="keyword">new</span> Grass(frontGrass.getTailX(), yPos, <span class="number">143</span>, <span class="number">11</span>, SCROLL_SPEED);

pipe1 = <span class="keyword">new</span> Pipe(<span class="number">210</span>, <span class="number">0</span>, <span class="number">22</span>, <span class="number">60</span>, SCROLL_SPEED);
pipe2 = <span class="keyword">new</span> Pipe(pipe1.getTailX() + PIPE_GAP, <span class="number">0</span>, <span class="number">22</span>, <span class="number">70</span>, SCROLL_SPEED);
pipe3 = <span class="keyword">new</span> Pipe(pipe2.getTailX() + PIPE_GAP, <span class="number">0</span>, <span class="number">22</span>, <span class="number">60</span>, SCROLL_SPEED);
</code></pre><br>
Логика тут проста. Помните, что конструктор объектов типа Scrollable просит передать в него: <b>x, y, width, height</b> и <b>скорость прокрутки</b>. Мы передаем каждый из этих параметров.<br>
<br>
<b>backGrass </b>объект должен состыковываться с хвостом <b>frontGrass </b>объекта, так что мы создаем его в хвосте frontGrass.<br>
Объекты типа Pipe создаются по аналогичной схеме, за исключением, что мы добавляем <b>PIPE_GAP </b>чтобы создать промежуток между трубами в <b>49 </b>пиксилей (вычислено экспериментальным путем).<br>
<br>
Сейчас мы закончим наш метод update, в котором мы вызываем метод update для всех пяти объектов. В дополнение, мы используем простую логику, для одного из наших конструкторов, чтобы сбросить параметры наших объектов. Код должен получиться следующим:<br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.gameobjects;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ScrollHandler</span> {</span>

    <span class="keyword">private</span> Grass frontGrass, backGrass;
    <span class="keyword">private</span> Pipe pipe1, pipe2, pipe3;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> SCROLL_SPEED = -<span class="number">59</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> PIPE_GAP = <span class="number">49</span>;

    <span class="keyword">public</span> ScrollHandler(<span class="keyword">float</span> yPos) {
        frontGrass = <span class="keyword">new</span> Grass(<span class="number">0</span>, yPos, <span class="number">143</span>, <span class="number">11</span>, SCROLL_SPEED);
        backGrass = <span class="keyword">new</span> Grass(frontGrass.getTailX(), yPos, <span class="number">143</span>, <span class="number">11</span>,
                SCROLL_SPEED);

        pipe1 = <span class="keyword">new</span> Pipe(<span class="number">210</span>, <span class="number">0</span>, <span class="number">22</span>, <span class="number">60</span>, SCROLL_SPEED);
        pipe2 = <span class="keyword">new</span> Pipe(pipe1.getTailX() + PIPE_GAP, <span class="number">0</span>, <span class="number">22</span>, <span class="number">70</span>, SCROLL_SPEED);
        pipe3 = <span class="keyword">new</span> Pipe(pipe2.getTailX() + PIPE_GAP, <span class="number">0</span>, <span class="number">22</span>, <span class="number">60</span>, SCROLL_SPEED);
    }

    <span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {
        <span class="comment">// обновляем все объекты</span>
        frontGrass.update(delta);
        backGrass.update(delta);
        pipe1.update(delta);
        pipe2.update(delta);
        pipe3.update(delta);

        <span class="comment">// проверяем кто из объектов за левой границей</span>
        <span class="comment">// и соответственно сбрасываем параметры этого объекта</span>
        <span class="keyword">if</span> (pipe1.isScrolledLeft()) {
            pipe1.reset(pipe3.getTailX() + PIPE_GAP);
        } <span class="keyword">else</span> <span class="keyword">if</span> (pipe2.isScrolledLeft()) {
            pipe2.reset(pipe1.getTailX() + PIPE_GAP);

        } <span class="keyword">else</span> <span class="keyword">if</span> (pipe3.isScrolledLeft()) {
            pipe3.reset(pipe2.getTailX() + PIPE_GAP);
        }

        <span class="comment">// то-же самое с травой</span>
        <span class="keyword">if</span> (frontGrass.isScrolledLeft()) {
            frontGrass.reset(backGrass.getTailX());

        } <span class="keyword">else</span> <span class="keyword">if</span> (backGrass.isScrolledLeft()) {
            backGrass.reset(frontGrass.getTailX());

        }
    }

    <span class="keyword">public</span> Grass getFrontGrass() {
        <span class="keyword">return</span> frontGrass;
    }

    <span class="keyword">public</span> Grass getBackGrass() {
        <span class="keyword">return</span> backGrass;
    }

    <span class="keyword">public</span> Pipe getPipe1() {
        <span class="keyword">return</span> pipe1;
    }

    <span class="keyword">public</span> Pipe getPipe2() {
        <span class="keyword">return</span> pipe2;
    }

    <span class="keyword">public</span> Pipe getPipe3() {
        <span class="keyword">return</span> pipe3;
    }

}
</code></pre><br>
Наши объекты типа <b>Scrollable </b>полностью настроены! Наши следующие шаги будут:<br>
<ol>
<li>Создать объект <b>ScrollHandler </b>внутри <b>GameWorld</b> (это действие автоматически создаст наши 5 объектов) </li>
<li>Отрисовать <b>ScrollHandler</b> объекты внутри <b>GameRenderer</b></li>
</ol> <br>
<br>
<h2>1. Создание объекта ScrollHandler </h2><br>
Откройте GameWorld. Мы внесем мелкие изменения.<br>
<ul>
<li>Добавьте переменную в класс (так же добавьте импорт)<br>
<pre><code class="java"><span class="keyword">private</span> ScrollHandler scroller 
</code></pre> <br>
<br>
</li>
<li>Инициализируйте прокрутку в конструторе (включая Y координату, где трава должна начинаться, <b>66 </b>пиксилей ниже <b>midPointY</b>):<br>
<pre><code class="java">scroller = <span class="keyword">new</span> ScrollHandler(midPointY + <span class="number">66</span>);
</code></pre> <br>
<br>
</li>
<li>Вызовите update метод нашего Scroller внутри <b>update </b>метода GameWorld<br>
<pre><code class="java">scroller.update(delta);
</code></pre> <br>
<br>
</li>
<li>Создайте метод доступа к объекту Scroller (возвращайте ScrollHandler scroll)</li>
</ul><br>
<br>
Исходный код для этого этапа следующий:<br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.gameworld;

<span class="keyword">import</span> com.kilobolt.gameobjects.Bird;
<span class="keyword">import</span> com.kilobolt.gameobjects.ScrollHandler;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameWorld</span> {</span>

    <span class="keyword">private</span> Bird bird;
    <span class="keyword">private</span> ScrollHandler scroller;

    <span class="keyword">public</span> GameWorld(<span class="keyword">int</span> midPointY) {
        bird = <span class="keyword">new</span> Bird(<span class="number">33</span>, midPointY - <span class="number">5</span>, <span class="number">17</span>, <span class="number">12</span>);
        <span class="comment">// трава должна начинаться на 66 пикселей ниже midPointY</span>
        scroller = <span class="keyword">new</span> ScrollHandler(midPointY + <span class="number">66</span>);
    }

    <span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {
        bird.update(delta);
        scroller.update(delta);
    }

    <span class="keyword">public</span> Bird getBird() {
        <span class="keyword">return</span> bird;

    }

    <span class="keyword">public</span> ScrollHandler getScroller() {
        <span class="keyword">return</span> scroller;
    }
}
</code></pre><br>
<h2>2. Отрисовка объектов ScrollHandler’a</h2><br>
Мы начнем с создания 6-ти переменных в классе:<br>
<br>
1 для ScrollHandler<br>
5 для 3-х труб + 2 для травы<br>
<br>
<ul>
<li>Добавьте следующее сразу после объявления Bird объекта:<br>
<pre><code class="java"><span class="comment">// Game Objects</span>
<span class="keyword">private</span> Bird bird;
<span class="keyword">private</span> ScrollHandler scroller;
<span class="keyword">private</span> Grass frontGrass, backGrass;
<span class="keyword">private</span> Pipe pipe1, pipe2, pipe3;
</code></pre><br>
<br>
</li>
<li>Добавьте следующие импорты:<br>
<pre><code class="java"><span class="keyword">import</span> com.kilobolt.gameobjects.Bird;
<span class="keyword">import</span> com.kilobolt.gameobjects.Grass;
<span class="keyword">import</span> com.kilobolt.gameobjects.Pipe;
</code></pre></li>
<li>Теперь нам надо инициализировать эти переменные внутри метода initGameObjects:<br>
<pre><code class="java">    <span class="keyword">private</span> <span class="keyword">void</span> initGameObjects() {
        bird = myWorld.getBird();
        scroller = myWorld.getScroller();
        frontGrass = scroller.getFrontGrass();
        backGrass = scroller.getBackGrass();
        pipe1 = scroller.getPipe1();
        pipe2 = scroller.getPipe2();
        pipe3 = scroller.getPipe3();        
    }
</code></pre><br>
<br>
</li>
</ul><br>
Далее мы просто должны отрисовать эти объекты в методе <b>render</b>. Так как объект Pipe еще не готов, мы добавим пустой метод отрисовки, и заменим его позже. Давайте создадим вспомогательные методы, чтобы наш код был более ни менее читабельным:<br>
<br>
Значения переменных <b>widths/heights/etc</b>, которые вы видите, были получены аккуратным вычислением. Я подумал, вы предпочтете готовые зачения, чем сами будете высчитывать их!<br>
<pre><code class="java"><span class="keyword">private</span> <span class="keyword">void</span> drawGrass() {
        <span class="comment">// отрисуем траву</span>
        batcher.draw(grass, frontGrass.getX(), frontGrass.getY(),
                frontGrass.getWidth(), frontGrass.getHeight());
        batcher.draw(grass, backGrass.getX(), backGrass.getY(),
                backGrass.getWidth(), backGrass.getHeight());
    }

    <span class="keyword">private</span> <span class="keyword">void</span> drawSkulls() {
        <span class="comment">// Временный код, извините за кашу :)</span>
        <span class="comment">// Мы это починим, как только закончим с Pipe классом.</span>

        batcher.draw(skullUp, pipe1.getX() - <span class="number">1</span>,
                pipe1.getY() + pipe1.getHeight() - <span class="number">14</span>, <span class="number">24</span>, <span class="number">14</span>);
        batcher.draw(skullDown, pipe1.getX() - <span class="number">1</span>,
                pipe1.getY() + pipe1.getHeight() + <span class="number">45</span>, <span class="number">24</span>, <span class="number">14</span>);

        batcher.draw(skullUp, pipe2.getX() - <span class="number">1</span>,
                pipe2.getY() + pipe2.getHeight() - <span class="number">14</span>, <span class="number">24</span>, <span class="number">14</span>);
        batcher.draw(skullDown, pipe2.getX() - <span class="number">1</span>,
                pipe2.getY() + pipe2.getHeight() + <span class="number">45</span>, <span class="number">24</span>, <span class="number">14</span>);

        batcher.draw(skullUp, pipe3.getX() - <span class="number">1</span>,
                pipe3.getY() + pipe3.getHeight() - <span class="number">14</span>, <span class="number">24</span>, <span class="number">14</span>);
        batcher.draw(skullDown, pipe3.getX() - <span class="number">1</span>,
                pipe3.getY() + pipe3.getHeight() + <span class="number">45</span>, <span class="number">24</span>, <span class="number">14</span>);
    }

    <span class="keyword">private</span> <span class="keyword">void</span> drawPipes() {
        <span class="comment">// Временный код, извините за кашу :)</span>
        <span class="comment">// Мы это починим, как только закончим с Pipe классом.</span>
        batcher.draw(bar, pipe1.getX(), pipe1.getY(), pipe1.getWidth(),
                pipe1.getHeight());
        batcher.draw(bar, pipe1.getX(), pipe1.getY() + pipe1.getHeight() + <span class="number">45</span>,
                pipe1.getWidth(), midPointY + <span class="number">66</span> - (pipe1.getHeight() + <span class="number">45</span>));

        batcher.draw(bar, pipe2.getX(), pipe2.getY(), pipe2.getWidth(),
                pipe2.getHeight());
        batcher.draw(bar, pipe2.getX(), pipe2.getY() + pipe2.getHeight() + <span class="number">45</span>,
                pipe2.getWidth(), midPointY + <span class="number">66</span> - (pipe2.getHeight() + <span class="number">45</span>));

        batcher.draw(bar, pipe3.getX(), pipe3.getY(), pipe3.getWidth(),
                pipe3.getHeight());
        batcher.draw(bar, pipe3.getX(), pipe3.getY() + pipe3.getHeight() + <span class="number">45</span>,
                pipe3.getWidth(), midPointY + <span class="number">66</span> - (pipe3.getHeight() + <span class="number">45</span>));
    }
</code></pre><br>
Теперь осталось вызвать эти методы в правильном порядке в методе render. Я добавил метки ко всем изменениям (1… 2… 3…). Пример всего кода:<br>
<div class="spoiler"><b class="spoiler_title">GameRenderer.java</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.gameworld;

<span class="keyword">import</span> com.badlogic.gdx.Gdx;
<span class="keyword">import</span> com.badlogic.gdx.graphics.GL20;
<span class="keyword">import</span> com.badlogic.gdx.graphics.OrthographicCamera;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.Animation;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.SpriteBatch;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.TextureRegion;
<span class="keyword">import</span> com.badlogic.gdx.graphics.glutils.ShapeRenderer;
<span class="keyword">import</span> com.badlogic.gdx.graphics.glutils.ShapeRenderer.ShapeType;
<span class="keyword">import</span> com.kilobolt.gameobjects.Bird;
<span class="keyword">import</span> com.kilobolt.gameobjects.Grass;
<span class="keyword">import</span> com.kilobolt.gameobjects.Pipe;
<span class="keyword">import</span> com.kilobolt.gameobjects.ScrollHandler;
<span class="keyword">import</span> com.kilobolt.zbhelpers.AssetLoader;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameRenderer</span> {</span>

    <span class="keyword">private</span> GameWorld myWorld;
    <span class="keyword">private</span> OrthographicCamera cam;
    <span class="keyword">private</span> ShapeRenderer shapeRenderer;

    <span class="keyword">private</span> SpriteBatch batcher;

    <span class="keyword">private</span> <span class="keyword">int</span> midPointY;
    <span class="keyword">private</span> <span class="keyword">int</span> gameHeight;

    <span class="comment">// Game Objects</span>
    <span class="keyword">private</span> Bird bird;
    <span class="keyword">private</span> ScrollHandler scroller;
    <span class="keyword">private</span> Grass frontGrass, backGrass;
    <span class="keyword">private</span> Pipe pipe1, pipe2, pipe3;

    <span class="comment">// Game Assets</span>
    <span class="keyword">private</span> TextureRegion bg, grass;
    <span class="keyword">private</span> Animation birdAnimation;
    <span class="keyword">private</span> TextureRegion birdMid, birdDown, birdUp;
    <span class="keyword">private</span> TextureRegion skullUp, skullDown, bar;

    <span class="keyword">public</span> GameRenderer(GameWorld world, <span class="keyword">int</span> gameHeight, <span class="keyword">int</span> midPointY) {
        myWorld = world;

        <span class="keyword">this</span>.gameHeight = gameHeight;
        <span class="keyword">this</span>.midPointY = midPointY;

        cam = <span class="keyword">new</span> OrthographicCamera();
        cam.setToOrtho(<span class="keyword">true</span>, <span class="number">136</span>, gameHeight);

        batcher = <span class="keyword">new</span> SpriteBatch();
        batcher.setProjectionMatrix(cam.combined);
        shapeRenderer = <span class="keyword">new</span> ShapeRenderer();
        shapeRenderer.setProjectionMatrix(cam.combined);

        <span class="comment">// Вызываем вспомогательные методы для инициализации объектов</span>
        initGameObjects();
        initAssets();
    }

    <span class="keyword">private</span> <span class="keyword">void</span> initGameObjects() {
        bird = myWorld.getBird();
        scroller = myWorld.getScroller();
        frontGrass = scroller.getFrontGrass();
        backGrass = scroller.getBackGrass();
        pipe1 = scroller.getPipe1();
        pipe2 = scroller.getPipe2();
        pipe3 = scroller.getPipe3();
    }

    <span class="keyword">private</span> <span class="keyword">void</span> initAssets() {
        bg = AssetLoader.bg;
        grass = AssetLoader.grass;
        birdAnimation = AssetLoader.birdAnimation;
        birdMid = AssetLoader.bird;
        birdDown = AssetLoader.birdDown;
        birdUp = AssetLoader.birdUp;
        skullUp = AssetLoader.skullUp;
        skullDown = AssetLoader.skullDown;
        bar = AssetLoader.bar;
    }

    <span class="keyword">private</span> <span class="keyword">void</span> drawGrass() {
        <span class="comment">// Отрисовываем траву</span>
        batcher.draw(grass, frontGrass.getX(), frontGrass.getY(),
                frontGrass.getWidth(), frontGrass.getHeight());
        batcher.draw(grass, backGrass.getX(), backGrass.getY(),
                backGrass.getWidth(), backGrass.getHeight());
    }

    <span class="keyword">private</span> <span class="keyword">void</span> drawSkulls() {
        <span class="comment">// Временный код, извините за кашу :)</span>
        <span class="comment">// Мы это починим, как только закончим с Pipe классом.</span>

        batcher.draw(skullUp, pipe1.getX() - <span class="number">1</span>,
                pipe1.getY() + pipe1.getHeight() - <span class="number">14</span>, <span class="number">24</span>, <span class="number">14</span>);
        batcher.draw(skullDown, pipe1.getX() - <span class="number">1</span>,
                pipe1.getY() + pipe1.getHeight() + <span class="number">45</span>, <span class="number">24</span>, <span class="number">14</span>);

        batcher.draw(skullUp, pipe2.getX() - <span class="number">1</span>,
                pipe2.getY() + pipe2.getHeight() - <span class="number">14</span>, <span class="number">24</span>, <span class="number">14</span>);
        batcher.draw(skullDown, pipe2.getX() - <span class="number">1</span>,
                pipe2.getY() + pipe2.getHeight() + <span class="number">45</span>, <span class="number">24</span>, <span class="number">14</span>);

        batcher.draw(skullUp, pipe3.getX() - <span class="number">1</span>,
                pipe3.getY() + pipe3.getHeight() - <span class="number">14</span>, <span class="number">24</span>, <span class="number">14</span>);
        batcher.draw(skullDown, pipe3.getX() - <span class="number">1</span>,
                pipe3.getY() + pipe3.getHeight() + <span class="number">45</span>, <span class="number">24</span>, <span class="number">14</span>);
    }

    <span class="keyword">private</span> <span class="keyword">void</span> drawPipes() {
        <span class="comment">// Временный код, извините за кашу :)</span>
        <span class="comment">// Мы это починим, как только закончим с Pipe классом.</span>

        batcher.draw(bar, pipe1.getX(), pipe1.getY(), pipe1.getWidth(),
                pipe1.getHeight());
        batcher.draw(bar, pipe1.getX(), pipe1.getY() + pipe1.getHeight() + <span class="number">45</span>,
                pipe1.getWidth(), midPointY + <span class="number">66</span> - (pipe1.getHeight() + <span class="number">45</span>));

        batcher.draw(bar, pipe2.getX(), pipe2.getY(), pipe2.getWidth(),
                pipe2.getHeight());
        batcher.draw(bar, pipe2.getX(), pipe2.getY() + pipe2.getHeight() + <span class="number">45</span>,
                pipe2.getWidth(), midPointY + <span class="number">66</span> - (pipe2.getHeight() + <span class="number">45</span>));

        batcher.draw(bar, pipe3.getX(), pipe3.getY(), pipe3.getWidth(),
                pipe3.getHeight());
        batcher.draw(bar, pipe3.getX(), pipe3.getY() + pipe3.getHeight() + <span class="number">45</span>,
                pipe3.getWidth(), midPointY + <span class="number">66</span> - (pipe3.getHeight() + <span class="number">45</span>));
    }

    <span class="keyword">public</span> <span class="keyword">void</span> render(<span class="keyword">float</span> runTime) {

        Gdx.gl.glClearColor(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);
        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);

        shapeRenderer.begin(ShapeType.Filled);

        <span class="comment">// Отрисовываем задний фон</span>
        shapeRenderer.setColor(<span class="number">55</span> / <span class="number">255.0</span>f, <span class="number">80</span> / <span class="number">255.0</span>f, <span class="number">100</span> / <span class="number">255.0</span>f, <span class="number">1</span>);
        shapeRenderer.rect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">136</span>, midPointY + <span class="number">66</span>);

        <span class="comment">// Отрисовываем Grass</span>
        shapeRenderer.setColor(<span class="number">111</span> / <span class="number">255.0</span>f, <span class="number">186</span> / <span class="number">255.0</span>f, <span class="number">45</span> / <span class="number">255.0</span>f, <span class="number">1</span>);
        shapeRenderer.rect(<span class="number">0</span>, midPointY + <span class="number">66</span>, <span class="number">136</span>, <span class="number">11</span>);

        <span class="comment">// Отрисовываем Dirt</span>
        shapeRenderer.setColor(<span class="number">147</span> / <span class="number">255.0</span>f, <span class="number">80</span> / <span class="number">255.0</span>f, <span class="number">27</span> / <span class="number">255.0</span>f, <span class="number">1</span>);
        shapeRenderer.rect(<span class="number">0</span>, midPointY + <span class="number">77</span>, <span class="number">136</span>, <span class="number">52</span>);

        shapeRenderer.end();

        batcher.begin();
        batcher.disableBlending();
        batcher.draw(bg, <span class="number">0</span>, midPointY + <span class="number">23</span>, <span class="number">136</span>, <span class="number">43</span>);

        <span class="comment">// 1. Отрисовываем Grass</span>
        drawGrass();

        <span class="comment">// 2. Отрисовываем Pipes</span>
        drawPipes();
        batcher.enableBlending();

        <span class="comment">// 3. Отрисовываем Skulls (необходима прозрачность)</span>
        drawSkulls();

        <span class="keyword">if</span> (bird.shouldntFlap()) {
            batcher.draw(birdMid, bird.getX(), bird.getY(),
                    bird.getWidth() / <span class="number">2.0</span>f, bird.getHeight() / <span class="number">2.0</span>f,
                    bird.getWidth(), bird.getHeight(), <span class="number">1</span>, <span class="number">1</span>, bird.getRotation());

        } <span class="keyword">else</span> {
            batcher.draw(birdAnimation.getKeyFrame(runTime), bird.getX(),
                    bird.getY(), bird.getWidth() / <span class="number">2.0</span>f,
                    bird.getHeight() / <span class="number">2.0</span>f, bird.getWidth(), bird.getHeight(),
                    <span class="number">1</span>, <span class="number">1</span>, bird.getRotation());
        }

        batcher.end();

    }

}
</code></pre><br>
</div></div><br>
Мы многое сделали в течении седьмого дня! Давайте посмотрим, как выглядит теперь наша игра:<br>
<div style="text-align:center;"><img src="./tutorial_files/7ed2f5ae14224f89b56b144f2d453182.png"></div><br>
<br>
Спасибо, что потратили время на чтение и мои поздравления! У нас теперь есть все, что нужно для отрисовки. Пришло время поработать над колизией. Присоединяйтесь ко мне в следующем дне!<br>
<br>
<h2>Исходный код за день</h2><br>
Если вы вне настроения писать код самостоятельно, скачайте его отсюда:<br>
<img src="./tutorial_files/e273ed1a4ed342abb148c53ad824d8f3.png" hspace="4" vspace="4" align="left"><a href="http://www.kilobolt.com/uploads/1/2/5/7/12571940/day_7.zip"> day_7.zip</a><br>
<br>
<br>
<br>
<br>
<img src="./tutorial_files/4f355491bc81468cbcb05427325b49ca.png"> <a href="http://habrahabr.ru/post/243471/#ContentList">К Оглавлению</a><br>
<br>
<br>
<br>
<br>
<br>
<br>
<a name="Day8"></a><h1><img src="./tutorial_files/4e55852eb2a04db2a1200c031304129c.png"> День 8 — Обнаружение коллизий и звуковые эффекты</h1><hr><br>
С возвращением в ваш libGDX урок по созданию клона игры Flappy Bird! Сегодня мы собираемся добавить логику для определения колизий, впоследствии мы будем использовать ее для определения, когда наша птичка должна умирать.<br>
<br>
В Flappy Bird птичка может умереть двумя способами: Птичка ударилась о землю или столкнулась с одной из труб.<br>
<br>
Мы реализуем второй тип смерти в сегодняшнем уроке, а также мы добавим звуковой эффект, который будет проигрываться во время столкновения! Давайте начнем. Я начну с того на чем мы остановились в седьмом дне. Если вы хотите продолжить с сегодняшнего дня, скачайте исходный код из седьмого дня и возвращайтесь.<br>
<br>
<h2>Избавимся от ряда ошибок</h2><br>
Если вы использовали мой исходный код, у вас 100% должны быть ошибки :). Я случайно продублировал один и тот же if… then, так же нам нужно будет избавиться от лишнего.<br>
<br>
Откройте класс <b>Bird</b>, пролистайте вниз к методу update и удалите одно из следующих повторений (если вы сами писали свой код, у вас этот блок кода отсутствует):<br>
<pre><code class="java">        <span class="keyword">if</span> (velocity.y &gt; <span class="number">200</span>) {
            velocity.y = <span class="number">200</span>;
        }

        <span class="keyword">if</span> (velocity.y &gt; <span class="number">200</span>) {
            velocity.y = <span class="number">200</span>;
        }
</code></pre><br>
<h2>Обсудим колизию</h2><br>
Изначально я обдумывал использовать вращающийся полигон, чтобы определять колизию, но после экспериментов, я понял, что создать круг намного проще и это будет более эффективно. Так что мы реализуем самое простое решение.<br>
<br>
Идея в том, чтобы круг всегда был отцентрирован в одной и той же точке. Ему не нужно вращаться. Круг всегда будет покрывать область головы птички. Потому что птичка всегда летит вперед, нам нет нужды задумывать о колизии спины птицы с трубами. Так что мы не будем заморачиваться с проверками колизий в этой области.<br>
<br>
Объект <b>Pipe</b>, в нашей игре, создержит обе трубы: верхнюю и нижнюю. Каждая из этих труб будет создаа используя прямоугольники. Один прямоугольник покроет череп, другие покроют основную часть трубы.<br>
<br>
Во время проверки колизии, мы будем использовать встроенный класс Intersector, у которого есть метод для проверки колизий между прямоугольником и кругом. Как только мы наткнемся на колизию, мы уведомим нашу игру о данном событии и скажем всем нашим движущимся объектам остановиться.<br>
<div style="text-align:center;"><img src="./tutorial_files/e555a58839fe4ac780c0e6ce6cd0f03f.png"></div><br>
<br>
<h2>Класс Bird – технический круг </h2><br>
Мы начнем с создания рамки в виде круга для нашей птицы. Откройте класс <b>Bird</b>:<br>
<br>
<ul>
<li>Добавьте переменную в класс типа <b>Circle </b>и добавьте импорт класса<b> import com.badlogic.gdx.math.Circle;</b> и назоваите ее boundingCircle:<br>
<pre><code class="java"><span class="keyword">private</span> Circle boundingCircle;
</code></pre><br>
<br>
</li>
<li>Инициализируйте ее в конструкторе класса:<br>
<pre><code class="java">boundingCircle = <span class="keyword">new</span> Circle();
</code></pre><br>
Мы должны изменять координы круга каждый раз как наша птичка перемещается. Птица перемещается когда мы добавляем <b>velocity</b> к нашей <b>position</b>, так что добавьте сразу после этой строчки <b>position.add(velocity.cpy().scl(delta)) </b>следующее:<br>
<pre><code class="java">boundingCircle.set(position.x + <span class="number">9</span>, position.y + <span class="number">6</span>, <span class="number">6.5</span>f); 
</code></pre><br>
<br>
</li>
<li>Добавьте метод доступа к нашей новой переменной <b>boundingCircle</b>.</li>
</ul><br>
<br>
Вот как теперь должен выглядеть ваш класс Bird:<br>
<div class="spoiler"><b class="spoiler_title">Bird.java</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.gameobjects;

<span class="keyword">import</span> com.badlogic.gdx.math.Circle;
<span class="keyword">import</span> com.badlogic.gdx.math.Vector2;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bird</span> {</span>

    <span class="keyword">private</span> Vector2 position;
    <span class="keyword">private</span> Vector2 velocity;
    <span class="keyword">private</span> Vector2 acceleration;

    <span class="keyword">private</span> <span class="keyword">float</span> rotation;
    <span class="keyword">private</span> <span class="keyword">int</span> width;
    <span class="keyword">private</span> <span class="keyword">int</span> height;

    <span class="keyword">private</span> Circle boundingCircle;

    <span class="keyword">public</span> Bird(<span class="keyword">float</span> x, <span class="keyword">float</span> y, <span class="keyword">int</span> width, <span class="keyword">int</span> height) {
        <span class="keyword">this</span>.width = width;
        <span class="keyword">this</span>.height = height;
        position = <span class="keyword">new</span> Vector2(x, y);
        velocity = <span class="keyword">new</span> Vector2(<span class="number">0</span>, <span class="number">0</span>);
        acceleration = <span class="keyword">new</span> Vector2(<span class="number">0</span>, <span class="number">460</span>);
        boundingCircle = <span class="keyword">new</span> Circle();
    }

    <span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {

        velocity.add(acceleration.cpy().scl(delta));

        <span class="keyword">if</span> (velocity.y &gt; <span class="number">200</span>) {
            velocity.y = <span class="number">200</span>;
        }

        position.add(velocity.cpy().scl(delta));

        <span class="comment">// Выставите координаты круга следующими (9, 6) относительно птицы.</span>
        <span class="comment">// Установите радиус круга равным 6.5f;</span>
        boundingCircle.set(position.x + <span class="number">9</span>, position.y + <span class="number">6</span>, <span class="number">6.5</span>f);

        <span class="comment">// Повернуть против часовой стрелки</span>
        <span class="keyword">if</span> (velocity.y &lt; <span class="number">0</span>) {
            rotation -= <span class="number">600</span> * delta;

            <span class="keyword">if</span> (rotation &lt; -<span class="number">20</span>) {
                rotation = -<span class="number">20</span>;
            }
        }

        <span class="comment">// Повернуть по часовой стрелке</span>
        <span class="keyword">if</span> (isFalling()) {
            rotation += <span class="number">480</span> * delta;
            <span class="keyword">if</span> (rotation &gt; <span class="number">90</span>) {
                rotation = <span class="number">90</span>;
            }

        }

    }

    <span class="keyword">public</span> <span class="keyword">boolean</span> isFalling() {
        <span class="keyword">return</span> velocity.y &gt; <span class="number">110</span>;
    }

    <span class="keyword">public</span> <span class="keyword">boolean</span> shouldntFlap() {
        <span class="keyword">return</span> velocity.y &gt; <span class="number">70</span>;
    }

    <span class="keyword">public</span> <span class="keyword">void</span> onClick() {
        velocity.y = -<span class="number">140</span>;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getX() {
        <span class="keyword">return</span> position.x;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getY() {
        <span class="keyword">return</span> position.y;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getWidth() {
        <span class="keyword">return</span> width;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getHeight() {
        <span class="keyword">return</span> height;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getRotation() {
        <span class="keyword">return</span> rotation;
    }

    <span class="keyword">public</span> Circle getBoundingCircle() {
        <span class="keyword">return</span> boundingCircle;
    }

}
</code></pre><br>
</div></div><br>
Далее мы убедимся, что наш <b>Circle </b>правильно спозиционирован. Откройте класс GameRenderer и добавьте следующий код в самый низ метода <b>render</b>. Мы собираемся отрисовать наш объект <b>boundingCircle</b>:<br>
<pre><code class="java">shapeRenderer.begin(ShapeType.Filled);
shapeRenderer.setColor(Color.RED);
shapeRenderer.circle(bird.getBoundingCircle().x, bird.getBoundingCircle().y, bird.getBoundingCircle().radius);
shapeRenderer.end();
</code></pre><br>
Запустите игру, она должна выглядеть следующим образом:<br>
<img src="./tutorial_files/8f1be3eb193a4ff18baf8ea49e2b0b1a.png"> <br>
<br>
<h2>Класс Pipe – технические прямоугольники </h2><br>
Теперь, когда у нас есть круг для птицы, нам необходимо создать объекты типа <b>Rectangle </b>чтобы отрисовать наши объекты типа Pipe как показано ниже. Откройте класс <b>Pipe</b>.<br>
<img src="./tutorial_files/f947f1c615994174bf7cdf3c51ce75b7.png"><br>
<br>
<h2>Подходящая Математика</h2><br>
Далее по ходу пъесы будет использован ряд визуально похожих значений ширины и высоты в пиксилях, так что используйте диаграмму ниже. А так же прочтите внимательно оставленные мною комментарии в коде, так что вы сможете ухватить мою мысль.<br>
<img src="./tutorial_files/23f12c527cc344a0a55a14b32724c323.png"> <br>
 <br>
Мы собираемся реализовать все, что нарисовано на диаграмме сверху.<br>
<br>
<ul>
<li>Создайте следующие переменные в классе и добавьте импорт (<b>import com.badlogic.gdx.math.Rectangle</b>):<br>
<pre><code class="java"><span class="keyword">private</span> Rectangle skullUp, skullDown, barUp, barDown;
</code></pre><br>
<br>
</li>
<li>Так же нам нужна константа которая будет хранить размер промежутка между трубами в <b>45 </b>пикселей и некоторые другие константы:<br>
<pre><code class="java"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> VERTICAL_GAP = <span class="number">45</span>;
<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> SKULL_WIDTH = <span class="number">24</span>;
<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> SKULL_HEIGHT = <span class="number">11</span>;
</code></pre><br>
<br>
</li>
<li>Нам так же необходимо знать, где начинается земля, так что мы сможем использовать размер по высоте нижней полосы (как показано на диаграме выше). Создайте еще одну переменную в классе:<br>
<pre><code class="java"><span class="keyword">private</span> <span class="keyword">float</span> groundY;
</code></pre><br>
<br>
</li>
<li>Добавьте следующие изменения в конструктор, так мы сможем проинициализировать переменные <b>skullUp, skullDown, barUp, barDown</b> и <b>groundY</b>:<br>
<pre><code class="java"><span class="keyword">public</span> Pipe(<span class="keyword">float</span> x, <span class="keyword">float</span> y, <span class="keyword">int</span> width, <span class="keyword">int</span> height, <span class="keyword">float</span> scrollSpeed, <span class="keyword">float</span> groundY) {

    <span class="keyword">super</span>(x, y, width, height, scrollSpeed);
    <span class="comment">//инициализируйте объект типа Random для генерации случайных чисел</span>
    r = <span class="keyword">new</span> Random();
    skullUp = <span class="keyword">new</span> Rectangle();
    skullDown = <span class="keyword">new</span> Rectangle();
    barUp = <span class="keyword">new</span> Rectangle();
    barDown = <span class="keyword">new</span> Rectangle();
    <span class="keyword">this</span>.groundY = groundY;

}
</code></pre><br>
<br>
</li>
<li>Добавьте методы доступа к новым переменным, мы будем использовать их, чтобы проверять колизию:<br>
<pre><code class="java">    <span class="keyword">public</span> Rectangle getSkullUp() {
        <span class="keyword">return</span> skullUp;
    }

    <span class="keyword">public</span> Rectangle getSkullDown() {
        <span class="keyword">return</span> skullDown;
    }

    <span class="keyword">public</span> Rectangle getBarUp() {
        <span class="keyword">return</span> barUp;
    }

    <span class="keyword">public</span> Rectangle getBarDown() {
        <span class="keyword">return</span> barDown;
    }
</code></pre><br>
</li>
</ul><br>
<br>
Как и в случае <b>boundingCircle </b>для нашей птицы, нам необходимо обновлять все четыре прямоугольника, когда позиция Pipe изменяется. В нашем классе Pipe отсутствует метод <b>update</b>. Но этот класс наследует метод update из класса <b>Scrollable</b>. Мы могли бы попытаться обновить наши прямоугольники в классе Scrollable, но легче это сделать с помощью <b><a href="http://habrahabr.ru/users/override/" class="user_link">Override</a></b> метода <b>update </b>(просмотрите седьмой день на эту тему если запамятовали).<br>
<br>
Вызывая <b>super</b>, мы вызываем исходный методо update который принадлежит классу <b>Scrollable</b>. Любой код который идет после вызова super – это дополнительная функциональность. В таком случае, мы легко обновим наши четыре прямоугольника.<br>
<br>
С помощью Math и вычислений, описанных на картинке выше, мы внесем следующие изменения в метод update (вот как должен выглядеть сейчас класс Pipe):<br>
<div class="spoiler"><b class="spoiler_title">Pipe.java</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.gameobjects;

<span class="keyword">import</span> java.util.Random;

<span class="keyword">import</span> com.badlogic.gdx.math.Rectangle;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Pipe</span> <span class="keyword">extends</span> <span class="title">Scrollable</span> {</span>

    <span class="keyword">private</span> Random r;

    <span class="keyword">private</span> Rectangle skullUp, skullDown, barUp, barDown;

    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> VERTICAL_GAP = <span class="number">45</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> SKULL_WIDTH = <span class="number">24</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> SKULL_HEIGHT = <span class="number">11</span>;
    <span class="keyword">private</span> <span class="keyword">float</span> groundY;

    <span class="comment">// Когда конструктор класса Pipe вызван – вызовите конструктор super (Scrollable)</span>
    <span class="keyword">public</span> Pipe(<span class="keyword">float</span> x, <span class="keyword">float</span> y, <span class="keyword">int</span> width, <span class="keyword">int</span> height, <span class="keyword">float</span> scrollSpeed,
            <span class="keyword">float</span> groundY) {
        <span class="keyword">super</span>(x, y, width, height, scrollSpeed);
        <span class="comment">// Создайте обхект типа Random для генерации случайных чисел</span>
        r = <span class="keyword">new</span> Random();
        skullUp = <span class="keyword">new</span> Rectangle();
        skullDown = <span class="keyword">new</span> Rectangle();
        barUp = <span class="keyword">new</span> Rectangle();
        barDown = <span class="keyword">new</span> Rectangle();

        <span class="keyword">this</span>.groundY = groundY;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {
        <span class="comment">// вызываем update метод в родительском классе (Scrollable)</span>
        <span class="keyword">super</span>.update(delta);

        <span class="comment">// Метод set() позволяет выставить координаты верзнего лего угла - x, y </span>
        <span class="comment">// вместе с width и height прямоугольника</span>

        barUp.set(position.x, position.y, width, height);
        barDown.set(position.x, position.y + height + VERTICAL_GAP, width,
                groundY - (position.y + height + VERTICAL_GAP));

        <span class="comment">// Ширина черепа 24 пикселя. Ширина трубы всего 22 пикселя. Так что череп</span>
        <span class="comment">// должен быть смещен на 1 пиксель влево (так что череп будет отцентрирован </span>
        <span class="comment">// относительно трубы).</span>
        
        <span class="comment">// Смещение равнозначно: (SKULL_WIDTH - width) / 2</span>
        skullUp.set(position.x - (SKULL_WIDTH - width) / <span class="number">2</span>, position.y + height
                - SKULL_HEIGHT, SKULL_WIDTH, SKULL_HEIGHT);
        skullDown.set(position.x - (SKULL_WIDTH - width) / <span class="number">2</span>, barDown.y,
                SKULL_WIDTH, SKULL_HEIGHT);

    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> reset(<span class="keyword">float</span> newX) {
        <span class="comment">// вызовите метод reset в родительском классе (Scrollable)</span>
        <span class="keyword">super</span>.reset(newX);
        <span class="comment">// измените высоты на случайное значение</span>
        height = r.nextInt(<span class="number">90</span>) + <span class="number">15</span>;
    }

    <span class="keyword">public</span> Rectangle getSkullUp() {
        <span class="keyword">return</span> skullUp;
    }

    <span class="keyword">public</span> Rectangle getSkullDown() {
        <span class="keyword">return</span> skullDown;
    }

    <span class="keyword">public</span> Rectangle getBarUp() {
        <span class="keyword">return</span> barUp;
    }

    <span class="keyword">public</span> Rectangle getBarDown() {
        <span class="keyword">return</span> barDown;
    }

}
</code></pre><br>
</div></div><br>
<br>
<h2>Обновление класса ScrollHandler</h2><br>
Мы изменили конструктор нашего класса Pipe, теперь, когда мы создаем новый объект типа Pipe, необходимо добавить еще один аргумент на вход. Внесите в следующие строки:<br>
<pre><code class="java">pipe1 = <span class="keyword">new</span> Pipe(<span class="number">210</span>, <span class="number">0</span>, <span class="number">22</span>, <span class="number">60</span>, SCROLL_SPEED);
pipe2 = <span class="keyword">new</span> Pipe(pipe1.getTailX() + PIPE_GAP, <span class="number">0</span>, <span class="number">22</span>, <span class="number">70</span>, SCROLL_SPEED);
pipe3 = <span class="keyword">new</span> Pipe(pipe2.getTailX() + PIPE_GAP, <span class="number">0</span>, <span class="number">22</span>, <span class="number">60</span>, SCROLL_SPEED);
</code></pre><br>
Эти изменения:<br>
<pre><code class="java">pipe1 = <span class="keyword">new</span> Pipe(<span class="number">210</span>, <span class="number">0</span>, <span class="number">22</span>, <span class="number">60</span>, SCROLL_SPEED, yPos);
pipe2 = <span class="keyword">new</span> Pipe(pipe1.getTailX() + PIPE_GAP, <span class="number">0</span>, <span class="number">22</span>, <span class="number">70</span>, SCROLL_SPEED, yPos);
pipe3 = <span class="keyword">new</span> Pipe(pipe2.getTailX() + PIPE_GAP, <span class="number">0</span>, <span class="number">22</span>, <span class="number">60</span>, SCROLL_SPEED, yPos);
</code></pre><br>
<br>
Давайте вернемся к <b>GameRenderer </b>и добавим пару строк кода в конец метода <b>render</b>. Это временный код для теста. Просто скопируйте его и вставьте как показано ниже.<br>
<div class="spoiler"><b class="spoiler_title">GameRenderer.render()</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">public</span> <span class="keyword">void</span> render(<span class="keyword">float</span> runTime) {

        Gdx.gl.glClearColor(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);
        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);

        shapeRenderer.begin(ShapeType.Filled);

        <span class="comment">// отрисовка заднего фона</span>
        shapeRenderer.setColor(<span class="number">55</span> / <span class="number">255.0</span>f, <span class="number">80</span> / <span class="number">255.0</span>f, <span class="number">100</span> / <span class="number">255.0</span>f, <span class="number">1</span>);
        shapeRenderer.rect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">136</span>, midPointY + <span class="number">66</span>);

        <span class="comment">// отрисовка Grass</span>
        shapeRenderer.setColor(<span class="number">111</span> / <span class="number">255.0</span>f, <span class="number">186</span> / <span class="number">255.0</span>f, <span class="number">45</span> / <span class="number">255.0</span>f, <span class="number">1</span>);
        shapeRenderer.rect(<span class="number">0</span>, midPointY + <span class="number">66</span>, <span class="number">136</span>, <span class="number">11</span>);

        <span class="comment">// отрисовка Dirt</span>
        shapeRenderer.setColor(<span class="number">147</span> / <span class="number">255.0</span>f, <span class="number">80</span> / <span class="number">255.0</span>f, <span class="number">27</span> / <span class="number">255.0</span>f, <span class="number">1</span>);
        shapeRenderer.rect(<span class="number">0</span>, midPointY + <span class="number">77</span>, <span class="number">136</span>, <span class="number">52</span>);

        shapeRenderer.end();

        batcher.begin();
        batcher.disableBlending();
        batcher.draw(bg, <span class="number">0</span>, midPointY + <span class="number">23</span>, <span class="number">136</span>, <span class="number">43</span>);

        <span class="comment">// 1. Отрисуем Grass</span>
        drawGrass();

        <span class="comment">// 2. Отрисуем Pipes</span>
        drawPipes();
        batcher.enableBlending();

        <span class="comment">// 3. Отрисуем Skulls (требуется включить прозрачность)</span>
        drawSkulls();

        <span class="keyword">if</span> (bird.shouldntFlap()) {
            batcher.draw(birdMid, bird.getX(), bird.getY(),
                    bird.getWidth() / <span class="number">2.0</span>f, bird.getHeight() / <span class="number">2.0</span>f,
                    bird.getWidth(), bird.getHeight(), <span class="number">1</span>, <span class="number">1</span>, bird.getRotation());

        } <span class="keyword">else</span> {
            batcher.draw(birdAnimation.getKeyFrame(runTime), bird.getX(),
                    bird.getY(), bird.getWidth() / <span class="number">2.0</span>f,
                    bird.getHeight() / <span class="number">2.0</span>f, bird.getWidth(), bird.getHeight(),
                    <span class="number">1</span>, <span class="number">1</span>, bird.getRotation());
        }

        batcher.end();

        shapeRenderer.begin(ShapeType.Filled);
        shapeRenderer.setColor(Color.RED);
        shapeRenderer.circle(bird.getBoundingCircle().x,
                bird.getBoundingCircle().y, bird.getBoundingCircle().radius);

        <span class="comment">/*
         * Извините за беспорядок ниже. Временный код для теста границ
         * прямоугольников.
         */</span>
        <span class="comment">// Верхний блок для труб 1, 2 и 3</span>
        shapeRenderer.rect(pipe1.getBarUp().x, pipe1.getBarUp().y,
                pipe1.getBarUp().width, pipe1.getBarUp().height);
        shapeRenderer.rect(pipe2.getBarUp().x, pipe2.getBarUp().y,
                pipe2.getBarUp().width, pipe2.getBarUp().height);
        shapeRenderer.rect(pipe3.getBarUp().x, pipe3.getBarUp().y,
                pipe3.getBarUp().width, pipe3.getBarUp().height);

        <span class="comment">// Нижний блок для труб 1, 2 и 3</span>
        shapeRenderer.rect(pipe1.getBarDown().x, pipe1.getBarDown().y,
                pipe1.getBarDown().width, pipe1.getBarDown().height);
        shapeRenderer.rect(pipe2.getBarDown().x, pipe2.getBarDown().y,
                pipe2.getBarDown().width, pipe2.getBarDown().height);
        shapeRenderer.rect(pipe3.getBarDown().x, pipe3.getBarDown().y,
                pipe3.getBarDown().width, pipe3.getBarDown().height);

        <span class="comment">// Черепа для верхних труб 1, 2 и 3</span>
        shapeRenderer.rect(pipe1.getSkullUp().x, pipe1.getSkullUp().y,
                pipe1.getSkullUp().width, pipe1.getSkullUp().height);
        shapeRenderer.rect(pipe2.getSkullUp().x, pipe2.getSkullUp().y,
                pipe2.getSkullUp().width, pipe2.getSkullUp().height);
        shapeRenderer.rect(pipe3.getSkullUp().x, pipe3.getSkullUp().y,
                pipe3.getSkullUp().width, pipe3.getSkullUp().height);

        <span class="comment">// Черепа для нижних труб 1, 2 and 3</span>
        shapeRenderer.rect(pipe1.getSkullDown().x, pipe1.getSkullDown().y,
                pipe1.getSkullDown().width, pipe1.getSkullDown().height);
        shapeRenderer.rect(pipe2.getSkullDown().x, pipe2.getSkullDown().y,
                pipe2.getSkullDown().width, pipe2.getSkullDown().height);
        shapeRenderer.rect(pipe3.getSkullDown().x, pipe3.getSkullDown().y,
                pipe3.getSkullDown().width, pipe3.getSkullDown().height);

        shapeRenderer.end();

    }
</code></pre><br>
</div></div><br>
Запустим нашу игру! Игра должна выглядеть прям как на картинке ниже:<br>
<img src="./tutorial_files/b2874738eb4a4760a020f6784a466c98.png"><br>
<br>
У нас теперь есть необходимые блоки для проверки колизии. Сейчас мы просто добавим логику для обработки колизий.<br>
<br>
<h2>Определяем колизию между объектами</h2><br>
Определение колизии задействует несколько классов.<br>
<ul>
<li>Класс <b>ScrollHandler </b>имеет доступ ко всем трубам и их техническим прямоугольникам, так что по сути, это тот класс где мы должны проверять на колизию. </li>
<li>Класс <b>GameWorld </b>должен быть в курсе, когда происходит колизия, так что он сможет корректно ее обработать (получить текущий счет, оставновить птицу, прекратить играть музыку и т.д.). </li>
<li>Класс <b>GameRenderer</b>, как только птица умирает, должен смочь отреагировать (показать счет, показать вспышку). </li>
</ul><br>
<br>
Мы начнем с класса <b>GameWorld</b>. Добавим следующее в метод <b>update</b>:<br>
<pre><code class="java"><span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {
    bird.update(delta);
    scroller.update(delta);

    <span class="keyword">if</span> (scroller.collides(bird)) {
        <span class="comment">// Clean up on game over</span>
        scroller.stop();
    }


}
</code></pre><br>
Далее создадиим два метода в классе <b>ScrollHandler</b>: метод <b>stop</b> и метод <b>collides</b>. Давайте перейдем в класс ScrollHandler и добавим эти методы:<br>
<pre><code class="java"><span class="keyword">public</span> <span class="keyword">void</span> stop() {
    frontGrass.stop();
    backGrass.stop();
    pipe1.stop();
    pipe2.stop();
    pipe3.stop();}

<span class="comment">// вернуть True если какая-нибудь из труб коснулась птицы</span>
<span class="keyword">public</span> <span class="keyword">boolean</span> collides(Bird bird) {
   <span class="keyword">return</span> (pipe1.collides(bird) || pipe2.collides(bird) || pipe3.collides(bird));
}
</code></pre><br>
Полный код класса:<br>
&lt;spoiler title=«ScrollHandler.java&gt;<br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.gameobjects;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ScrollHandler</span> {</span>

    <span class="keyword">private</span> Grass frontGrass, backGrass;
    <span class="keyword">private</span> Pipe pipe1, pipe2, pipe3;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> SCROLL_SPEED = -<span class="number">59</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> PIPE_GAP = <span class="number">49</span>;

    <span class="keyword">public</span> ScrollHandler(<span class="keyword">float</span> yPos) {
        frontGrass = <span class="keyword">new</span> Grass(<span class="number">0</span>, yPos, <span class="number">143</span>, <span class="number">11</span>, SCROLL_SPEED);
        backGrass = <span class="keyword">new</span> Grass(frontGrass.getTailX(), yPos, <span class="number">143</span>, <span class="number">11</span>,
                SCROLL_SPEED);

        pipe1 = <span class="keyword">new</span> Pipe(<span class="number">210</span>, <span class="number">0</span>, <span class="number">22</span>, <span class="number">60</span>, SCROLL_SPEED, yPos);
        pipe2 = <span class="keyword">new</span> Pipe(pipe1.getTailX() + PIPE_GAP, <span class="number">0</span>, <span class="number">22</span>, <span class="number">70</span>, SCROLL_SPEED,
                yPos);
        pipe3 = <span class="keyword">new</span> Pipe(pipe2.getTailX() + PIPE_GAP, <span class="number">0</span>, <span class="number">22</span>, <span class="number">60</span>, SCROLL_SPEED,
                yPos);
    }

    <span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {
        <span class="comment">// Обновление наших объектов</span>
        frontGrass.update(delta);
        backGrass.update(delta);
        pipe1.update(delta);
        pipe2.update(delta);
        pipe3.update(delta);

        <span class="comment">// Проверим если хоть одна из наших труб уехала влево</span>
        <span class="comment">// и сбросим ее позицию</span>
        <span class="keyword">if</span> (pipe1.isScrolledLeft()) {
            pipe1.reset(pipe3.getTailX() + PIPE_GAP);
        } <span class="keyword">else</span> <span class="keyword">if</span> (pipe2.isScrolledLeft()) {
            pipe2.reset(pipe1.getTailX() + PIPE_GAP);

        } <span class="keyword">else</span> <span class="keyword">if</span> (pipe3.isScrolledLeft()) {
            pipe3.reset(pipe2.getTailX() + PIPE_GAP);
        }

        <span class="comment">// Тоже самое с травой</span>
        <span class="keyword">if</span> (frontGrass.isScrolledLeft()) {
            frontGrass.reset(backGrass.getTailX());

        } <span class="keyword">else</span> <span class="keyword">if</span> (backGrass.isScrolledLeft()) {
            backGrass.reset(frontGrass.getTailX());

        }
    }

    <span class="keyword">public</span> <span class="keyword">void</span> stop() {
        frontGrass.stop();
        backGrass.stop();
        pipe1.stop();
        pipe2.stop();
        pipe3.stop();
    }

    <span class="keyword">public</span> <span class="keyword">boolean</span> collides(Bird bird) {
        <span class="keyword">return</span> (pipe1.collides(bird) || pipe2.collides(bird) || pipe3
                .collides(bird));
    }

    <span class="keyword">public</span> Grass getFrontGrass() {
        <span class="keyword">return</span> frontGrass;
    }

    <span class="keyword">public</span> Grass getBackGrass() {
        <span class="keyword">return</span> backGrass;
    }

    <span class="keyword">public</span> Pipe getPipe1() {
        <span class="keyword">return</span> pipe1;
    }

    <span class="keyword">public</span> Pipe getPipe2() {
        <span class="keyword">return</span> pipe2;
    }

    <span class="keyword">public</span> Pipe getPipe3() {
        <span class="keyword">return</span> pipe3;
    }

}
</code></pre><br>
<br>
А теперь, чтобы исправить ошибки, необходимо внести два изменения. Наши объекты типа <b>Scrollable </b>(Pipe и Grass) должны иметь возможность быть остановленными, так что добавим метод <b>stop </b>внутри класса Scrollable.<br>
<br>
<ul>
<li>Откройте класс Scrollable и добавьте следующий метод:<br>
<pre><code class="java"><span class="keyword">public</span> <span class="keyword">void</span> stop() {
    velocity.x = <span class="number">0</span>;
}
</code></pre><br>
<br>
</li>
<li>Далее, наши объекты Pipe должны пройти индивидуальную проверку на колизию с нашей птицей, так что добавим такой метод. Откройте класс Pipe и добавьте следующее:<br>
<pre><code class="java"><span class="keyword">public</span> <span class="keyword">boolean</span> collides(Bird bird) {
        <span class="keyword">if</span> (position.x &lt; bird.getX() + bird.getWidth()) {
            <span class="keyword">return</span> (Intersector.overlaps(bird.getBoundingCircle(), barUp)
                    || Intersector.overlaps(bird.getBoundingCircle(), barDown)
                    || Intersector.overlaps(bird.getBoundingCircle(), skullUp) || Intersector
                        .overlaps(bird.getBoundingCircle(), skullDown));
        }
        <span class="keyword">return</span> <span class="keyword">false</span>;
}
</code></pre> </li>
</ul><br>
<br>
В этом методе, мы начинаем с проверки, если <b>position.x</b> меньше чем <b>bird.getX + bird.getWidth</b>, в другом случае колизия не возможна. Это очень дешевая проверка (не повлияет на производительность игры). В большинстве случаев, это условие вернет <b>false</b>, и нам не нужно будет производить высоконагруженные проверки.<br>
<br>
Если это условие вернет true, мы выполним «дорогой» вызов <b>Intersector.overlaps()</b> (который вернет true если круг пересекается с прямоугольником). Мы вернем <b>true </b>если любой из четырех прямоугольников пересекается с техническим кругом нашей птицы.<br>
<br>
Полный код обновленных классов Pipe и Scrollable: <br>
&lt;spoiler title=»Обновленный Pipe.java&gt;<br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.gameobjects;

<span class="keyword">import</span> java.util.Random;

<span class="keyword">import</span> com.badlogic.gdx.math.Intersector;
<span class="keyword">import</span> com.badlogic.gdx.math.Rectangle;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Pipe</span> <span class="keyword">extends</span> <span class="title">Scrollable</span> {</span>

    <span class="keyword">private</span> Random r;

    <span class="keyword">private</span> Rectangle skullUp, skullDown, barUp, barDown;

    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> VERTICAL_GAP = <span class="number">45</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> SKULL_WIDTH = <span class="number">24</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> SKULL_HEIGHT = <span class="number">11</span>;
    <span class="keyword">private</span> <span class="keyword">float</span> groundY;

    <span class="comment">// Когда конструктор класса Pipe вызван – вызовите родительский (Scrollable)</span>
    <span class="keyword">public</span> Pipe(<span class="keyword">float</span> x, <span class="keyword">float</span> y, <span class="keyword">int</span> width, <span class="keyword">int</span> height, <span class="keyword">float</span> scrollSpeed,
            <span class="keyword">float</span> groundY) {
        <span class="keyword">super</span>(x, y, width, height, scrollSpeed);
        <span class="comment">// Инициализируйте объект типа Random для генерации случайных чисел</span>
        r = <span class="keyword">new</span> Random();
        skullUp = <span class="keyword">new</span> Rectangle();
        skullDown = <span class="keyword">new</span> Rectangle();
        barUp = <span class="keyword">new</span> Rectangle();
        barDown = <span class="keyword">new</span> Rectangle();

        <span class="keyword">this</span>.groundY = groundY;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {
        <span class="comment">// Вызовите метод update в родительском классе (Scrollable)</span>
        <span class="keyword">super</span>.update(delta);

        <span class="comment">// Метод set() повзоляет нам выставить координаты левого верхнего угла - x, y</span>
        <span class="comment">// вместе с width и height</span>

        barUp.set(position.x, position.y, width, height);
        barDown.set(position.x, position.y + height + VERTICAL_GAP, width,
                groundY - (position.y + height + VERTICAL_GAP));

        <span class="comment">// Ширина черепа 24 пикселя. Ширина трубы всего 22 пикселя. Так что череп</span>
        <span class="comment">// должен быть смещен на 1 пиксель влево (так что череп будет отцентрирован </span>
        <span class="comment">// относительно трубы).</span>

        <span class="comment">// This shift is equivalent to: (SKULL_WIDTH - width) / 2</span>
        skullUp.set(position.x - (SKULL_WIDTH - width) / <span class="number">2</span>, position.y + height
                - SKULL_HEIGHT, SKULL_WIDTH, SKULL_HEIGHT);
        skullDown.set(position.x - (SKULL_WIDTH - width) / <span class="number">2</span>, barDown.y,
                SKULL_WIDTH, SKULL_HEIGHT);

    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> reset(<span class="keyword">float</span> newX) {
        <span class="comment">//Вызовите метод reset в родительском классе (Scrollable)</span>
        <span class="keyword">super</span>.reset(newX);
        <span class="comment">// Измените высоту на случайное значение</span>
        height = r.nextInt(<span class="number">90</span>) + <span class="number">15</span>;
    }

    <span class="keyword">public</span> Rectangle getSkullUp() {
        <span class="keyword">return</span> skullUp;
    }

    <span class="keyword">public</span> Rectangle getSkullDown() {
        <span class="keyword">return</span> skullDown;
    }

    <span class="keyword">public</span> Rectangle getBarUp() {
        <span class="keyword">return</span> barUp;
    }

    <span class="keyword">public</span> Rectangle getBarDown() {
        <span class="keyword">return</span> barDown;
    }

    <span class="keyword">public</span> <span class="keyword">boolean</span> collides(Bird bird) {
        <span class="keyword">if</span> (position.x &lt; bird.getX() + bird.getWidth()) {
            <span class="keyword">return</span> (Intersector.overlaps(bird.getBoundingCircle(), barUp)
                    || Intersector.overlaps(bird.getBoundingCircle(), barDown)
                    || Intersector.overlaps(bird.getBoundingCircle(), skullUp) || Intersector
                        .overlaps(bird.getBoundingCircle(), skullDown));
        }
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

}
</code></pre><br>
<br>
<br>
&lt;spoiler title=«Обновленный Scrollable.java&gt;<br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.gameobjects;

<span class="keyword">import</span> com.badlogic.gdx.math.Vector2;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Scrollable</span> {</span>

    <span class="comment">// Protected очень похоже на private, но позволяет наследование в дочерних</span>
    <span class="comment">// класссах.</span>
    <span class="keyword">protected</span> Vector2 position;
    <span class="keyword">protected</span> Vector2 velocity;
    <span class="keyword">protected</span> <span class="keyword">int</span> width;
    <span class="keyword">protected</span> <span class="keyword">int</span> height;
    <span class="keyword">protected</span> <span class="keyword">boolean</span> isScrolledLeft;

    <span class="keyword">public</span> Scrollable(<span class="keyword">float</span> x, <span class="keyword">float</span> y, <span class="keyword">int</span> width, <span class="keyword">int</span> height, <span class="keyword">float</span> scrollSpeed) {
        position = <span class="keyword">new</span> Vector2(x, y);
        velocity = <span class="keyword">new</span> Vector2(scrollSpeed, <span class="number">0</span>);
        <span class="keyword">this</span>.width = width;
        <span class="keyword">this</span>.height = height;
        isScrolledLeft = <span class="keyword">false</span>;
    }

    <span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {
        position.add(velocity.cpy().scl(delta));

        <span class="comment">// Если объект Scollable более не виден:</span>
        <span class="keyword">if</span> (position.x + width &lt; <span class="number">0</span>) {
            isScrolledLeft = <span class="keyword">true</span>;
        }
    }

    <span class="comment">// Reset: Должен переопределять родительский для специфического поведения.</span>
    <span class="keyword">public</span> <span class="keyword">void</span> reset(<span class="keyword">float</span> newX) {
        position.x = newX;
        isScrolledLeft = <span class="keyword">false</span>;
    }

    <span class="keyword">public</span> <span class="keyword">void</span> stop() {
        velocity.x = <span class="number">0</span>;
    }

    <span class="comment">// Методы доступа к переменным класса</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> isScrolledLeft() {
        <span class="keyword">return</span> isScrolledLeft;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getTailX() {
        <span class="keyword">return</span> position.x + width;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getX() {
        <span class="keyword">return</span> position.x;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getY() {
        <span class="keyword">return</span> position.y;
    }

    <span class="keyword">public</span> <span class="keyword">int</span> getWidth() {
        <span class="keyword">return</span> width;
    }

    <span class="keyword">public</span> <span class="keyword">int</span> getHeight() {
        <span class="keyword">return</span> height;
    }

}
</code></pre><br>
<br>
<h2>Тестируем наш код!</h2><br>
Теперь, когда мы закончили написание кода для проверки всех колизий, запустите вашу игру и убедитесь, что все работает! Мы добавим более изысканную смерть в девятом дне. Но сейчас, давайте попробуем проиграть звук из файла, когда наша птица умирает.<br>
<br>
<h2>Скачайте звуковой файл</h2><br>
Этот звуковой файл я создал с помощью <a href="http://bfxr.net/">bfxr</a><br>
<img src="./tutorial_files/2fcb02e57f6d4452a6bd421e994bf71d.png" align="left"> Скачать файл <a href="http://www.kilobolt.com/uploads/1/2/5/7/12571940/dead.wav"> dead.wav </a><br>
<br>
<br>
<br>
<br>
<br>
Скачайте и поместите этот файл в проект ZombieBird-android в папку assets/data.<br>
<img src="./tutorial_files/e2da5db65b74495b900d34dc08a7bca3.png"> <br>
<br>
Убедитесь, что вы скопировали файл сюда, а не создали ссылку.<br>
<br>
<h2>Обновим класс AssetLoder</h2><br>
Наконец-то у нас есть звуковой файл, и мы можем создать объект типа <b>Sound </b>в нашем классе <b>AssetLoader</b>. Звуковые объекты сохраняются в памяти и загружаются всего лишь раз и очень легко их использовать (это относится к файлам маленького размера, коротким звукам).<br>
<br>
<ul>
<li>Создайте следующую переменную в классе AssetLoader:<br>
<pre><code class="java"><span class="keyword">public</span> <span class="keyword">static</span> Sound dead;
</code></pre> <br>
<br>
</li>
<li>Инициализируйте ее в методе <b>load </b>следующим образом:<br>
<pre><code class="java">dead = Gdx.audio.newSound(Gdx.files.internal(<span class="string">"data/dead.wav"</span>));
</code></pre><br>
<br>
</li>
</ul><br>
Пример полного кода:<br>
<div class="spoiler"><b class="spoiler_title">AssetLoader.java</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.zbhelpers;

<span class="keyword">import</span> com.badlogic.gdx.Gdx;
<span class="keyword">import</span> com.badlogic.gdx.audio.Sound;
<span class="keyword">import</span> com.badlogic.gdx.graphics.Texture;
<span class="keyword">import</span> com.badlogic.gdx.graphics.Texture.TextureFilter;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.Animation;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.TextureRegion;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AssetLoader</span> {</span>

    <span class="keyword">public</span> <span class="keyword">static</span> Texture texture;
    <span class="keyword">public</span> <span class="keyword">static</span> TextureRegion bg, grass;

    <span class="keyword">public</span> <span class="keyword">static</span> Animation birdAnimation;
    <span class="keyword">public</span> <span class="keyword">static</span> TextureRegion bird, birdDown, birdUp;

    <span class="keyword">public</span> <span class="keyword">static</span> TextureRegion skullUp, skullDown, bar;
    
    <span class="keyword">public</span> <span class="keyword">static</span> Sound dead;

    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> load() {

        texture = <span class="keyword">new</span> Texture(Gdx.files.internal(<span class="string">"data/texture.png"</span>));
        texture.setFilter(TextureFilter.Nearest, TextureFilter.Nearest);

        bg = <span class="keyword">new</span> TextureRegion(texture, <span class="number">0</span>, <span class="number">0</span>, <span class="number">136</span>, <span class="number">43</span>);
        bg.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        grass = <span class="keyword">new</span> TextureRegion(texture, <span class="number">0</span>, <span class="number">43</span>, <span class="number">143</span>, <span class="number">11</span>);
        grass.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        birdDown = <span class="keyword">new</span> TextureRegion(texture, <span class="number">136</span>, <span class="number">0</span>, <span class="number">17</span>, <span class="number">12</span>);
        birdDown.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        bird = <span class="keyword">new</span> TextureRegion(texture, <span class="number">153</span>, <span class="number">0</span>, <span class="number">17</span>, <span class="number">12</span>);
        bird.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        birdUp = <span class="keyword">new</span> TextureRegion(texture, <span class="number">170</span>, <span class="number">0</span>, <span class="number">17</span>, <span class="number">12</span>);
        birdUp.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        TextureRegion[] birds = { birdDown, bird, birdUp };
        birdAnimation = <span class="keyword">new</span> Animation(<span class="number">0.06</span>f, birds);
        birdAnimation.setPlayMode(Animation.PlayMode.LOOP_PINGPONG);

        skullUp = <span class="keyword">new</span> TextureRegion(texture, <span class="number">192</span>, <span class="number">0</span>, <span class="number">24</span>, <span class="number">14</span>);
        <span class="comment">// Создадим перевернув существующий skullUp</span>
        skullDown = <span class="keyword">new</span> TextureRegion(skullUp);
        skullDown.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        bar = <span class="keyword">new</span> TextureRegion(texture, <span class="number">136</span>, <span class="number">16</span>, <span class="number">22</span>, <span class="number">3</span>);
        bar.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);
        
        dead = Gdx.audio.newSound(Gdx.files.internal(<span class="string">"data/dead.wav"</span>));

    }

    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> dispose() {
        <span class="comment">// Когда завершаем работу необходимо освобождать текстуры, вызывая метод dispose.</span>
        texture.dispose();
    }

}
</code></pre><br>
</div></div><br>
<h2>Програем звуковой файл</h2><br>
Теперь, когда у нас есть объект типа Sound, мы можем воспроизвести его в игре. Откройте класс <b>GameWorld </b>и создайте следующую переменную в классе:<br>
<pre><code class="java"><span class="keyword">private</span> <span class="keyword">boolean</span> isAlive = <span class="keyword">true</span>;
</code></pre><br>
И внесите следующие изменения в метод update:<br>
<pre><code class="java"><span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {

    bird.update(delta);
    scroller.update(delta);

    <span class="keyword">if</span> (isAlive &amp;&amp; scroller.collides(bird)) {
        scroller.stop();
        AssetLoader.dead.play();
        isAlive = <span class="keyword">false</span>;
    }
}
</code></pre><br>
Теперь, когда наша птица будет умирать, будет воспроизводиться звуковой файл (только один раз, без повтора)! Обновленный класс GameWorld. Попробуйте запустить игру!<br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.gameworld;

<span class="keyword">import</span> com.kilobolt.gameobjects.Bird;
<span class="keyword">import</span> com.kilobolt.gameobjects.ScrollHandler;
<span class="keyword">import</span> com.kilobolt.zbhelpers.AssetLoader;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameWorld</span> {</span>

    <span class="keyword">private</span> Bird bird;
    <span class="keyword">private</span> ScrollHandler scroller;
    <span class="keyword">private</span> <span class="keyword">boolean</span> isAlive = <span class="keyword">true</span>;

    <span class="keyword">public</span> GameWorld(<span class="keyword">int</span> midPointY) {
        bird = <span class="keyword">new</span> Bird(<span class="number">33</span>, midPointY - <span class="number">5</span>, <span class="number">17</span>, <span class="number">12</span>);
        <span class="comment">//травадолжна начинаться на 66 пикселей ниже midPointY</span>
        scroller = <span class="keyword">new</span> ScrollHandler(midPointY + <span class="number">66</span>);
    }

    <span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {

        bird.update(delta);
        scroller.update(delta);

        <span class="keyword">if</span> (scroller.collides(bird) &amp;&amp; isAlive) {
            scroller.stop();
            AssetLoader.dead.play();
            isAlive = <span class="keyword">false</span>;
        }
    }

    <span class="keyword">public</span> Bird getBird() {
        <span class="keyword">return</span> bird;

    }

    <span class="keyword">public</span> ScrollHandler getScroller() {
        <span class="keyword">return</span> scroller;
    }
}
</code></pre><br>
Наконецто вы можете удалить все технические прямоугольники и круги из GameRenderer, наша логика определения колизии работает правильно. Вот пример вашего класса GameRenderer:<br>
<div class="spoiler"><b class="spoiler_title">GameRenderer.java</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.gameworld;

<span class="keyword">import</span> com.badlogic.gdx.Gdx;
<span class="keyword">import</span> com.badlogic.gdx.graphics.GL20;
<span class="keyword">import</span> com.badlogic.gdx.graphics.OrthographicCamera;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.Animation;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.SpriteBatch;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.TextureRegion;
<span class="keyword">import</span> com.badlogic.gdx.graphics.glutils.ShapeRenderer;
<span class="keyword">import</span> com.badlogic.gdx.graphics.glutils.ShapeRenderer.ShapeType;
<span class="keyword">import</span> com.kilobolt.gameobjects.Bird;
<span class="keyword">import</span> com.kilobolt.gameobjects.Grass;
<span class="keyword">import</span> com.kilobolt.gameobjects.Pipe;
<span class="keyword">import</span> com.kilobolt.gameobjects.ScrollHandler;
<span class="keyword">import</span> com.kilobolt.zbhelpers.AssetLoader;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameRenderer</span> {</span>

    <span class="keyword">private</span> GameWorld myWorld;
    <span class="keyword">private</span> OrthographicCamera cam;
    <span class="keyword">private</span> ShapeRenderer shapeRenderer;

    <span class="keyword">private</span> SpriteBatch batcher;

    <span class="keyword">private</span> <span class="keyword">int</span> midPointY;
    <span class="keyword">private</span> <span class="keyword">int</span> gameHeight;

    <span class="comment">// Игровые объекты</span>
    <span class="keyword">private</span> Bird bird;
    <span class="keyword">private</span> ScrollHandler scroller;
    <span class="keyword">private</span> Grass frontGrass, backGrass;
    <span class="keyword">private</span> Pipe pipe1, pipe2, pipe3;

    <span class="comment">// Игровые Assets</span>
    <span class="keyword">private</span> TextureRegion bg, grass;
    <span class="keyword">private</span> Animation birdAnimation;
    <span class="keyword">private</span> TextureRegion birdMid, birdDown, birdUp;
    <span class="keyword">private</span> TextureRegion skullUp, skullDown, bar;

    <span class="keyword">public</span> GameRenderer(GameWorld world, <span class="keyword">int</span> gameHeight, <span class="keyword">int</span> midPointY) {
        myWorld = world;

        <span class="keyword">this</span>.gameHeight = gameHeight;
        <span class="keyword">this</span>.midPointY = midPointY;

        cam = <span class="keyword">new</span> OrthographicCamera();
        cam.setToOrtho(<span class="keyword">true</span>, <span class="number">136</span>, gameHeight);

        batcher = <span class="keyword">new</span> SpriteBatch();
        batcher.setProjectionMatrix(cam.combined);
        shapeRenderer = <span class="keyword">new</span> ShapeRenderer();
        shapeRenderer.setProjectionMatrix(cam.combined);

        <span class="comment">// Вызываем вспомогательные методы, чтобы проинициализировать переменные класса</span>
        initGameObjects();
        initAssets();
    }

    <span class="keyword">private</span> <span class="keyword">void</span> initGameObjects() {
        bird = myWorld.getBird();
        scroller = myWorld.getScroller();
        frontGrass = scroller.getFrontGrass();
        backGrass = scroller.getBackGrass();
        pipe1 = scroller.getPipe1();
        pipe2 = scroller.getPipe2();
        pipe3 = scroller.getPipe3();
    }

    <span class="keyword">private</span> <span class="keyword">void</span> initAssets() {
        bg = AssetLoader.bg;
        grass = AssetLoader.grass;
        birdAnimation = AssetLoader.birdAnimation;
        birdMid = AssetLoader.bird;
        birdDown = AssetLoader.birdDown;
        birdUp = AssetLoader.birdUp;
        skullUp = AssetLoader.skullUp;
        skullDown = AssetLoader.skullDown;
        bar = AssetLoader.bar;
    }

    <span class="keyword">private</span> <span class="keyword">void</span> drawGrass() {
        <span class="comment">// Отрисовка травы</span>
        batcher.draw(grass, frontGrass.getX(), frontGrass.getY(),
                frontGrass.getWidth(), frontGrass.getHeight());
        batcher.draw(grass, backGrass.getX(), backGrass.getY(),
                backGrass.getWidth(), backGrass.getHeight());
    }

    <span class="keyword">private</span> <span class="keyword">void</span> drawSkulls() {
        <span class="comment">// Временный код, измените за кашу :)</span>
        <span class="comment">// Мы исправим это когда закончим с классом Pipe.</span>

        batcher.draw(skullUp, pipe1.getX() - <span class="number">1</span>,
                pipe1.getY() + pipe1.getHeight() - <span class="number">14</span>, <span class="number">24</span>, <span class="number">14</span>);
        batcher.draw(skullDown, pipe1.getX() - <span class="number">1</span>,
                pipe1.getY() + pipe1.getHeight() + <span class="number">45</span>, <span class="number">24</span>, <span class="number">14</span>);

        batcher.draw(skullUp, pipe2.getX() - <span class="number">1</span>,
                pipe2.getY() + pipe2.getHeight() - <span class="number">14</span>, <span class="number">24</span>, <span class="number">14</span>);
        batcher.draw(skullDown, pipe2.getX() - <span class="number">1</span>,
                pipe2.getY() + pipe2.getHeight() + <span class="number">45</span>, <span class="number">24</span>, <span class="number">14</span>);

        batcher.draw(skullUp, pipe3.getX() - <span class="number">1</span>,
                pipe3.getY() + pipe3.getHeight() - <span class="number">14</span>, <span class="number">24</span>, <span class="number">14</span>);
        batcher.draw(skullDown, pipe3.getX() - <span class="number">1</span>,
                pipe3.getY() + pipe3.getHeight() + <span class="number">45</span>, <span class="number">24</span>, <span class="number">14</span>);
    }

    <span class="keyword">private</span> <span class="keyword">void</span> drawPipes() {
        <span class="comment">// Временный код, измените за кашу :)</span>
        <span class="comment">// Мы исправим это когда закончим с классом Grass.</span>
        batcher.draw(bar, pipe1.getX(), pipe1.getY(), pipe1.getWidth(),
                pipe1.getHeight());
        batcher.draw(bar, pipe1.getX(), pipe1.getY() + pipe1.getHeight() + <span class="number">45</span>,
                pipe1.getWidth(), midPointY + <span class="number">66</span> - (pipe1.getHeight() + <span class="number">45</span>));

        batcher.draw(bar, pipe2.getX(), pipe2.getY(), pipe2.getWidth(),
                pipe2.getHeight());
        batcher.draw(bar, pipe2.getX(), pipe2.getY() + pipe2.getHeight() + <span class="number">45</span>,
                pipe2.getWidth(), midPointY + <span class="number">66</span> - (pipe2.getHeight() + <span class="number">45</span>));

        batcher.draw(bar, pipe3.getX(), pipe3.getY(), pipe3.getWidth(),
                pipe3.getHeight());
        batcher.draw(bar, pipe3.getX(), pipe3.getY() + pipe3.getHeight() + <span class="number">45</span>,
                pipe3.getWidth(), midPointY + <span class="number">66</span> - (pipe3.getHeight() + <span class="number">45</span>));
    }

    <span class="keyword">public</span> <span class="keyword">void</span> render(<span class="keyword">float</span> runTime) {

        Gdx.gl.glClearColor(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);
        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);

        shapeRenderer.begin(ShapeType.Filled);

        <span class="comment">// Отрисуем задний фон</span>
        shapeRenderer.setColor(<span class="number">55</span> / <span class="number">255.0</span>f, <span class="number">80</span> / <span class="number">255.0</span>f, <span class="number">100</span> / <span class="number">255.0</span>f, <span class="number">1</span>);
        shapeRenderer.rect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">136</span>, midPointY + <span class="number">66</span>);

        <span class="comment">// Отрисуем техническую Grass</span>
        shapeRenderer.setColor(<span class="number">111</span> / <span class="number">255.0</span>f, <span class="number">186</span> / <span class="number">255.0</span>f, <span class="number">45</span> / <span class="number">255.0</span>f, <span class="number">1</span>);
        shapeRenderer.rect(<span class="number">0</span>, midPointY + <span class="number">66</span>, <span class="number">136</span>, <span class="number">11</span>);

        <span class="comment">// Отрисуем техническую Dirt</span>
        shapeRenderer.setColor(<span class="number">147</span> / <span class="number">255.0</span>f, <span class="number">80</span> / <span class="number">255.0</span>f, <span class="number">27</span> / <span class="number">255.0</span>f, <span class="number">1</span>);
        shapeRenderer.rect(<span class="number">0</span>, midPointY + <span class="number">77</span>, <span class="number">136</span>, <span class="number">52</span>);

        shapeRenderer.end();

        batcher.begin();
        batcher.disableBlending();
        batcher.draw(bg, <span class="number">0</span>, midPointY + <span class="number">23</span>, <span class="number">136</span>, <span class="number">43</span>);

        <span class="comment">// 1. Отрисовка Grass</span>
        drawGrass();

        <span class="comment">// 2. Отрисовка Pipes</span>
        drawPipes();
        batcher.enableBlending();

        <span class="comment">// 3. Отрисовка Skulls (требуется включить прозрачность)</span>
        drawSkulls();

        <span class="keyword">if</span> (bird.shouldntFlap()) {
            batcher.draw(birdMid, bird.getX(), bird.getY(),
                    bird.getWidth() / <span class="number">2.0</span>f, bird.getHeight() / <span class="number">2.0</span>f,
                    bird.getWidth(), bird.getHeight(), <span class="number">1</span>, <span class="number">1</span>, bird.getRotation());

        } <span class="keyword">else</span> {
            batcher.draw(birdAnimation.getKeyFrame(runTime), bird.getX(),
                    bird.getY(), bird.getWidth() / <span class="number">2.0</span>f,
                    bird.getHeight() / <span class="number">2.0</span>f, bird.getWidth(), bird.getHeight(),
                    <span class="number">1</span>, <span class="number">1</span>, bird.getRotation());
        }

        batcher.end();

    }

}
</code></pre><br>
</div></div><br>
<br>
<h2>Мы почти закончили!</h2><br>
Наша игра почти, что законена. В следующем дне, девятом, мы закончим остальные части нашего игрового мира и начнем добавлять пользовательский интерфейс. Крепитесь! Некрополись близко!<br>
<br>
<h2>Исходный код за день</h2><br>
Если вы вне настроения писать код самостоятельно, скачайте его отсюда:<br>
<img src="./tutorial_files/e273ed1a4ed342abb148c53ad824d8f3.png" hspace="4" vspace="4" align="left"><a href="http://www.kilobolt.com/uploads/1/2/5/7/12571940/day_8.zip">day_8.zip</a><br>
<br>
<br>
<br>
<br>
<img src="./tutorial_files/4f355491bc81468cbcb05427325b49ca.png"> <a href="http://habrahabr.ru/post/243471/#ContentList">К Оглавлению</a><br>
<br>
<br>
<br>
<br>
<br>
<br>
<a name="Day9"></a><h1><img src="./tutorial_files/4e55852eb2a04db2a1200c031304129c.png"> День 9 — Завершаем Игровой процесс и базовый UI</h1><hr><br>
Добро пожаловать в девятый день. Сегодня мы собираемся закончить с игровым процессом добавив определение колизии с землей и улучшим смерть птички. Далее мы реализуем ведение счета и настроим использование <b>BitmapFont</b>, чтобы отображать счет!<br>
<br>
Мы продолжим прямо с того момента, где мы закончили в предыдущем дне. Если у вас отсутствуют исходники, скачайте их перейдя в восьмой день.<br>
<div style="text-align:center;"><img src="./tutorial_files/c4a5818057514479b2682fffb8d8dcef.png"></div><br>
<br>
<h2>Добавим еще не много звуковых эффектов</h2><br>
Нам нужно добавить звук полета нашей птички, а также звук увеличения счета.<br>
<br>
<ul>
<li>Создайте две новые переменные в классе и назовите их <b>flap </b>и <b>coin</b>, и проиницилизируйте их внутри метода <b>load</b>:<br>
<pre><code class="java">flap = Gdx.audio.newSound(Gdx.files.internal(<span class="string">"data/flap.wav"</span>));
coin = Gdx.audio.newSound(Gdx.files.internal(<span class="string">"data/coin.wav"</span>));
</code></pre> <br>
<br>
</li>
<li>Так же в метод <b>dispose </b>добавьте:<br>
<pre><code class="java">dead.dispose();
flap.dispose();
coin.dispose();
</code></pre> <br>
</li>
</ul><br>
<br>
Скачайте и поместите следующие файлы в папку <b>assets/data</b> в проекте <b>ZombieGame-android</b>:<br>
<br>
<img src="./tutorial_files/2fcb02e57f6d4452a6bd421e994bf71d.png"><a href="http://www.kilobolt.com/uploads/1/2/5/7/12571940/coin.wav">coin.wav</a><br>
<img src="./tutorial_files/2fcb02e57f6d4452a6bd421e994bf71d.png"><a href="http://www.kilobolt.com/uploads/1/2/5/7/12571940/flap.wav">flap.wav</a><br>
<br>
<h2>Добавим текст!</h2><br>
Только ради того, чтобы казаться очень активными, мы добавим .font файл сгенерированый используя Hiero. Hiero конвертирует текстовый файл в .png Texture картинку, аналогично текстуре в нашей игре. Так же <b>Hiero </b>создает<b>.fnt</b> файл с настройками которые libGDX умеет читать и распознавать, где какая буква на картинке.<br>
<br>
Я создал эти файлы для вас и их можно скачать ниже. Я покажу как можно использовать их в нашей игре.<br>
<br>
<img src="./tutorial_files/feba2af35eea4c36a5d4c9e90acff6a9.png"> <img src="./tutorial_files/f423560f6b1b4e76a2de9ce2ae903330.png"><br>
<br>
Шрифт называется 04b_19, он используется в Flappy Bird и он бесплатный.<br>
<br>
Скачайте следующие 4 файла:<br>
 <br>
<img src="./tutorial_files/0a6ac1ba6cbe40f29922b07e1e155f47.png"><a href="http://www.kilobolt.com/uploads/1/2/5/7/12571940/shadow.fnt">shadow.fnt</a><br>
<img src="./tutorial_files/0a6ac1ba6cbe40f29922b07e1e155f47.png"><a href="http://www.kilobolt.com/uploads/1/2/5/7/12571940/text.fnt">text.fnt</a><br>
<img src="./tutorial_files/daf5c5cb31c146edab32c17ae2d570c8.png"><a href="http://www.kilobolt.com/uploads/1/2/5/7/12571940/shadow.png">shadow.png</a><br>
<img src="./tutorial_files/daf5c5cb31c146edab32c17ae2d570c8.png"><a href="http://www.kilobolt.com/uploads/1/2/5/7/12571940/text.png">text.png</a><br>
<br>
Я настаиваю, чтобы вы открыли каждый из этих файлов и посмотрели, как они устроены! Поместите все четыре файла внутрь папки <b>assets/data</b> в проекте <b>ZombieGame-android</b>.<br>
<br>
Мы можем использовать эти пары. fnt и .png файлов, чтобы создать объект типа <b>BitmapFont</b>, который позволит нам рисовать строки с помощью <b>SpriteBatch </b>в нашем <b>GameRenderer</b>, без необходимости создавать новые String каждый раз. BitmapFont использует .fnt для определения где каждая буква и цифра находится в <b>TextureRegion</b>. Так что в целом, нам не нужно делать лишнию работу, все сделают за нас.<br>
<br>
Сделайте следующее, чтобы создать эти шрифты в нашем <b>AssetLoader</b>:<br>
<ol>
<li>Создайте новые переменные в классе:<br>
<pre><code class="java"><span class="keyword">public</span> <span class="keyword">static</span> BitmapFont font, shadow;
</code></pre><br>
<br>
</li>
<li>Добавьте следующее в метод <b>load</b>.<br>
<pre><code class="java">font = <span class="keyword">new</span> BitmapFont(Gdx.files.internal(<span class="string">"data/text.fnt"</span>));
font.setScale(<span class="number">.25</span>f, -<span class="number">.25</span>f);
shadow = <span class="keyword">new</span> BitmapFont(Gdx.files.internal(<span class="string">"data/shadow.fnt"</span>));
shadow.setScale(<span class="number">.25</span>f, -<span class="number">.25</span>f);
</code></pre><br>
Этим мы загрузим файлы и сменим их размер на нужный нам.<br>
<br>
</li>
<li>Так же добавьте следующее в метод <b>dispose</b>:<br>
<pre><code class="java">font.dispose();
shadow.dispose();
</code></pre><br>
</li>
</ol><br>
<br>
Вот как должен выглядеть ваш AssetLoader:<br>
<div class="spoiler"><b class="spoiler_title">AssetLoader</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.ZBHelpers;

<span class="keyword">import</span> com.badlogic.gdx.Gdx;
<span class="keyword">import</span> com.badlogic.gdx.audio.Sound;
<span class="keyword">import</span> com.badlogic.gdx.graphics.Texture;
<span class="keyword">import</span> com.badlogic.gdx.graphics.Texture.TextureFilter;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.Animation;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.BitmapFont;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.TextureRegion;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AssetLoader</span> {</span>

    <span class="keyword">public</span> <span class="keyword">static</span> Texture texture;
    <span class="keyword">public</span> <span class="keyword">static</span> TextureRegion bg, grass;

    <span class="keyword">public</span> <span class="keyword">static</span> Animation birdAnimation;
    <span class="keyword">public</span> <span class="keyword">static</span> TextureRegion bird, birdDown, birdUp;

    <span class="keyword">public</span> <span class="keyword">static</span> TextureRegion skullUp, skullDown, bar;

    <span class="keyword">public</span> <span class="keyword">static</span> Sound dead, flap, coin;

    <span class="keyword">public</span> <span class="keyword">static</span> BitmapFont font, shadow;

    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> load() {

        texture = <span class="keyword">new</span> Texture(Gdx.files.internal(<span class="string">"data/texture.png"</span>));
        texture.setFilter(TextureFilter.Nearest, TextureFilter.Nearest);

        bg = <span class="keyword">new</span> TextureRegion(texture, <span class="number">0</span>, <span class="number">0</span>, <span class="number">136</span>, <span class="number">43</span>);
        bg.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        grass = <span class="keyword">new</span> TextureRegion(texture, <span class="number">0</span>, <span class="number">43</span>, <span class="number">143</span>, <span class="number">11</span>);
        grass.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        birdDown = <span class="keyword">new</span> TextureRegion(texture, <span class="number">136</span>, <span class="number">0</span>, <span class="number">17</span>, <span class="number">12</span>);
        birdDown.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        bird = <span class="keyword">new</span> TextureRegion(texture, <span class="number">153</span>, <span class="number">0</span>, <span class="number">17</span>, <span class="number">12</span>);
        bird.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        birdUp = <span class="keyword">new</span> TextureRegion(texture, <span class="number">170</span>, <span class="number">0</span>, <span class="number">17</span>, <span class="number">12</span>);
        birdUp.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        TextureRegion[] birds = { birdDown, bird, birdUp };
        birdAnimation = <span class="keyword">new</span> Animation(<span class="number">0.06</span>f, birds);
        birdAnimation.setPlayMode(Animation.LOOP_PINGPONG);

        skullUp = <span class="keyword">new</span> TextureRegion(texture, <span class="number">192</span>, <span class="number">0</span>, <span class="number">24</span>, <span class="number">14</span>);
        <span class="comment">// Создаем перевернув существующий skullUp</span>
        skullDown = <span class="keyword">new</span> TextureRegion(skullUp);
        skullDown.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        bar = <span class="keyword">new</span> TextureRegion(texture, <span class="number">136</span>, <span class="number">16</span>, <span class="number">22</span>, <span class="number">3</span>);
        bar.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        dead = Gdx.audio.newSound(Gdx.files.internal(<span class="string">"data/dead.wav"</span>));
        flap = Gdx.audio.newSound(Gdx.files.internal(<span class="string">"data/flap.wav"</span>));
        coin = Gdx.audio.newSound(Gdx.files.internal(<span class="string">"data/coin.wav"</span>));

        font = <span class="keyword">new</span> BitmapFont(Gdx.files.internal(<span class="string">"data/text.fnt"</span>));
        font.setScale(<span class="number">.25</span>f, -<span class="number">.25</span>f);
        shadow = <span class="keyword">new</span> BitmapFont(Gdx.files.internal(<span class="string">"data/shadow.fnt"</span>));
        shadow.setScale(<span class="number">.25</span>f, -<span class="number">.25</span>f);

    }

    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> dispose() {
        <span class="comment">// Когда текстура нам больше не нужна – мы должны освободить ресурсы</span>
        texture.dispose();

        <span class="comment">// Освобождаем русурсы звуков</span>
        dead.dispose();
        flap.dispose();
        coin.dispose();

        font.dispose();
        shadow.dispose();
    }

</code></pre><br>
</div></div><br>
<br>
<h2>Земля причиняет боль</h2><br>
Перейдем в класс <b>GameWorld</b>.<br>
<ol>
<li>Начнем с удаления переменной <b>isALive</b>. Мы пересмотрим как логику факта смерти нашей птицы.</li>
<li>Мы хотим, чтобы наша птичка умирала, когда ударяется о землю. Сейчас мы этим и займемся.</li>
</ol><br>
<br>
Вместо того чтобы создавать прямоугольники для определения колизии с объектами травы и обновлять их, мы определим земплю как статический бокс, для простоты.<br>
<br>
<ul>
<li>Начните с создания новой переменной в классе:<br>
<pre><code class="java">(<span class="keyword">import</span> com.badlogic.gdx.math)
<span class="keyword">private</span> Rectangle ground;
</code></pre><br>
<br>
</li>
<li>Инициализируйте ее в конструкторе как:<br>
<pre><code class="java">ground = <span class="keyword">new</span> Rectangle(<span class="number">0</span>, midPointY + <span class="number">66</span>, <span class="number">136</span>, <span class="number">11</span>);
</code></pre><br>
<br>
</li>
<li>Далее мы изменим наш update метод на следующее:<br>
<pre><code class="java">    <span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {
        <span class="comment">// Добавим лимит для нашей delta, так что если игра начнет тормозить</span>
        <span class="comment">// при обновлении, мы не нарушим нашу логику определения колизии</span>

        <span class="keyword">if</span> (delta &gt; <span class="number">.15</span>f) {
            delta = <span class="number">.15</span>f;
        }

        bird.update(delta);
        scroller.update(delta);

        <span class="keyword">if</span> (scroller.collides(bird) &amp;&amp; bird.isAlive()) {
            scroller.stop();
            bird.die();
            AssetLoader.dead.play();
        }

        <span class="keyword">if</span> (Intersector.overlaps(bird.getBoundingCircle(), ground)) {
            scroller.stop();
            bird.die();
            bird.decelerate();
        }
    }
</code></pre><br>
</li>
</ul><br>
<br>
<h2>Починим нашу птичку</h2><br>
Теперь необходимо исправить наши ошибки в классе <b>Bird</b>.<br>
<br>
<ul>
<li>Нам надо создать новую переменную в классе:<br>
<pre><code class="java"><span class="keyword">private</span> <span class="keyword">boolean</span> isAlive 
</code></pre><br>
<br>
</li>
<li>Инициализировать ее в конструкторе:<br>
<pre><code class="java">isAlive = <span class="keyword">true</span>; 
</code></pre><br>
<br>
</li>
<li>Добавить метод доступа к этой переменной:<br>
<pre><code class="java"><span class="keyword">public</span> <span class="keyword">boolean</span> isAlive() {
   <span class="keyword">return</span> isAlive;
}
</code></pre><br>
<br>
</li>
<li>Теперь когда у нас есть <b>isAlive</b>, мы внесем маленькие изменения в наш метод <b>shouldntFlap</b>. Мы не хотим, чтобы наша птичка шевелилась, когда она мертва (да я понимаю, что она зомби, и что все это очень странно звучит):<br>
<pre><code class="java"><span class="keyword">public</span> <span class="keyword">boolean</span> shouldntFlap() {
    <span class="keyword">return</span> velocity.y &gt; <span class="number">70</span> || !isAlive;
}
</code></pre><br>
Этот метод вернет true если одно из условий верно (дословно, если у нашей птички слишком большое ускорение по <b>Y</b> или она мертва – мы перестаем махать крыльями).<br>
<br>
</li>
<li>Так же внесем мелкие изменения в метод <b>onClick</b>, который должен работать только когда наша птичка жива:<br>
<pre><code class="java"><span class="keyword">public</span> <span class="keyword">void</span> onClick() {
   <span class="keyword">if</span> (isAlive) { 
       AssetLoader.flap.play();
       velocity.y = -<span class="number">140</span>;
   }
}
</code></pre><br>
Вам надо будет добавить импорт: <b>com.kilobolt.ZBHelpers.AssetLoader;</b><br>
<br>
</li>
<li>Добавьте два новых метода: <b>die </b>и <b>decelerate</b>. Все очень просто:<br>
<pre><code class="java"><span class="keyword">public</span> <span class="keyword">void</span> die() {
    isAlive = <span class="keyword">false</span>;
    velocity.y = <span class="number">0</span>;
}


<span class="keyword">public</span> <span class="keyword">void</span> decelerate() {
    <span class="comment">// Нам надо чтобы птичка перестала падать вниз когда умерла</span>
    acceleration.y = <span class="number">0</span>;
}
</code></pre><br>
</li>
<li>И на последок, добавьте новое условие в последний<b> if </b>в методе <b>update</b>:<br>
<pre><code class="java"><span class="keyword">if</span> (isFalling() || !isAlive) {
   ...
}
</code></pre><br>
<br>
</li>
</ul><br>
<br>
Так что если наша птичка взлетая вверх ударится, она направит свой нос в направлении земли, прям как птичка из игры Flappy Bird.<br>
<br>
Полный класс Bird:<br>
<div class="spoiler"><b class="spoiler_title">Bird.java</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.GameObjects;

<span class="keyword">import</span> com.badlogic.gdx.math.Circle;
<span class="keyword">import</span> com.badlogic.gdx.math.Vector2;
<span class="keyword">import</span> com.kilobolt.ZBHelpers.AssetLoader;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bird</span> {</span>

    <span class="keyword">private</span> Vector2 position;
    <span class="keyword">private</span> Vector2 velocity;
    <span class="keyword">private</span> Vector2 acceleration;

    <span class="keyword">private</span> <span class="keyword">float</span> rotation;
    <span class="keyword">private</span> <span class="keyword">int</span> width;
    <span class="keyword">private</span> <span class="keyword">int</span> height;
    
    <span class="keyword">private</span> <span class="keyword">boolean</span> isAlive;

    <span class="keyword">private</span> Circle boundingCircle;

    <span class="keyword">public</span> Bird(<span class="keyword">float</span> x, <span class="keyword">float</span> y, <span class="keyword">int</span> width, <span class="keyword">int</span> height) {
        <span class="keyword">this</span>.width = width;
        <span class="keyword">this</span>.height = height;
        position = <span class="keyword">new</span> Vector2(x, y);
        velocity = <span class="keyword">new</span> Vector2(<span class="number">0</span>, <span class="number">0</span>);
        acceleration = <span class="keyword">new</span> Vector2(<span class="number">0</span>, <span class="number">460</span>);
        boundingCircle = <span class="keyword">new</span> Circle();
        isAlive = <span class="keyword">true</span>;
    }

    <span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {

        velocity.add(acceleration.cpy().scl(delta));

        <span class="keyword">if</span> (velocity.y &gt; <span class="number">200</span>) {
            velocity.y = <span class="number">200</span>;
        }

        position.add(velocity.cpy().scl(delta));

        <span class="comment">// Установим центр круга в координату (9, 6) в отношении к птице</span>
        <span class="comment">// Установим радиус круга равным 6.5f;</span>
        boundingCircle.set(position.x + <span class="number">9</span>, position.y + <span class="number">6</span>, <span class="number">6.5</span>f);

        <span class="comment">// Развернуть против часовой стрелки</span>
        <span class="keyword">if</span> (velocity.y &lt; <span class="number">0</span>) {
            rotation -= <span class="number">600</span> * delta;

            <span class="keyword">if</span> (rotation &lt; -<span class="number">20</span>) {
                rotation = -<span class="number">20</span>;
            }
        }

        <span class="comment">// Развернуть по часовой стрелке</span>
        <span class="keyword">if</span> (isFalling() || !isAlive) {
            rotation += <span class="number">480</span> * delta;
            <span class="keyword">if</span> (rotation &gt; <span class="number">90</span>) {
                rotation = <span class="number">90</span>;
            }

        }

    }

    <span class="keyword">public</span> <span class="keyword">boolean</span> isFalling() {
        <span class="keyword">return</span> velocity.y &gt; <span class="number">110</span>;
    }

    <span class="keyword">public</span> <span class="keyword">boolean</span> shouldntFlap() {
        <span class="keyword">return</span> velocity.y &gt; <span class="number">70</span> || !isAlive;
    }

    <span class="keyword">public</span> <span class="keyword">void</span> onClick() {
        <span class="keyword">if</span> (isAlive) {
            AssetLoader.flap.play();
            velocity.y = -<span class="number">140</span>;
        }
    }
    
    <span class="keyword">public</span> <span class="keyword">void</span> die() {
        isAlive = <span class="keyword">false</span>;
        velocity.y = <span class="number">0</span>;
    }
    
    <span class="keyword">public</span> <span class="keyword">void</span> decelerate() {
        acceleration.y = <span class="number">0</span>;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getX() {
        <span class="keyword">return</span> position.x;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getY() {
        <span class="keyword">return</span> position.y;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getWidth() {
        <span class="keyword">return</span> width;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getHeight() {
        <span class="keyword">return</span> height;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getRotation() {
        <span class="keyword">return</span> rotation;
    }

    <span class="keyword">public</span> Circle getBoundingCircle() {
        <span class="keyword">return</span> boundingCircle;
    }

    <span class="keyword">public</span> <span class="keyword">boolean</span> isAlive() {
        <span class="keyword">return</span> isAlive;
    }
}
</code></pre><br>
</div></div><br>
<h2>Запустите ваш код!</h2><br>
Игра должна быть играбельной, с определением колизий и смертью. Далее мы реализуем систему ведения счета.<br>
<br>
<h2>Ведение счета</h2><br>
<img src="./tutorial_files/fa4fc9ce00d84a0e9c211e78845a4440.png"><br>
<br>
В Flappy Bird вы получаете очко, когда птичка пролетает около половины каждого пролета труб. Мы сэмулируем это поведение и будем тоже вести счет. Нам надо создать переменную типа integer, в которой мы будем хранить счет игрока. Мы сделаем это в классе <b>GameWorld</b>.<br>
<br>
Откройте класс GameWorld.<br>
<ul>
<li>Создайте новую переменную в классе:<br>
<pre><code class="java"><span class="keyword">private</span> <span class="keyword">int</span> score = <span class="number">0</span>;
</code></pre><br>
<br>
</li>
<li>Далее, создайте метод доступа к этой переменной и метод который будет увеличивать счет:<br>
<pre><code class="java"><span class="keyword">public</span> <span class="keyword">int</span> getScore() {
    <span class="keyword">return</span> score;
}

<span class="keyword">public</span> <span class="keyword">void</span> addScore(<span class="keyword">int</span> increment) {
    score += increment;
}
</code></pre><br>
<br>
</li>
</ul><br>
<br>
Ваш класс GameWorld должен выглядеть следующим образом:<br>
<div class="spoiler"><b class="spoiler_title">GameWorld.java</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.GameWorld;

<span class="keyword">import</span> com.badlogic.gdx.math.Intersector;
<span class="keyword">import</span> com.badlogic.gdx.math.Rectangle;
<span class="keyword">import</span> com.kilobolt.GameObjects.Bird;
<span class="keyword">import</span> com.kilobolt.GameObjects.ScrollHandler;
<span class="keyword">import</span> com.kilobolt.ZBHelpers.AssetLoader;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameWorld</span> {</span>

    <span class="keyword">private</span> Bird bird;
    <span class="keyword">private</span> ScrollHandler scroller;
    <span class="keyword">private</span> Rectangle ground;
    <span class="keyword">private</span> <span class="keyword">int</span> score = <span class="number">0</span>;
    
    <span class="keyword">public</span> GameWorld(<span class="keyword">int</span> midPointY) {
        bird = <span class="keyword">new</span> Bird(<span class="number">33</span>, midPointY - <span class="number">5</span>, <span class="number">17</span>, <span class="number">12</span>);
        <span class="comment">//трава должна начинаться на 66 писеля ниже midPointY</span>
        scroller = <span class="keyword">new</span> ScrollHandler(midPointY + <span class="number">66</span>);
        ground = <span class="keyword">new</span> Rectangle(<span class="number">0</span>, midPointY + <span class="number">66</span>, <span class="number">137</span>, <span class="number">11</span>);
    }

    <span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {
        <span class="comment">// добавим лимит по дельте, так что если будут тормоза</span>
        <span class="comment">// во время обновленя, то работа с колизией не будет нарушена</span>

        <span class="keyword">if</span> (delta &gt; <span class="number">.15</span>f) {
            delta = <span class="number">.15</span>f;
        }

        bird.update(delta);
        scroller.update(delta);

        <span class="keyword">if</span> (scroller.collides(bird) &amp;&amp; bird.isAlive()) {
            scroller.stop();
            bird.die();
            AssetLoader.dead.play();
        }

        <span class="keyword">if</span> (Intersector.overlaps(bird.getBoundingCircle(), ground)) {
            scroller.stop();
            bird.die();
            bird.decelerate();
        }
    }

    <span class="keyword">public</span> Bird getBird() {
        <span class="keyword">return</span> bird;

    }

    <span class="keyword">public</span> ScrollHandler getScroller() {
        <span class="keyword">return</span> scroller;
    }
    
    <span class="keyword">public</span> <span class="keyword">int</span> getScore() {
        <span class="keyword">return</span> score;
    }
    
    <span class="keyword">public</span> <span class="keyword">void</span> addScore(<span class="keyword">int</span> increment) {
        score += increment;
    }
}
</code></pre><br>
</div></div><br>
<h2>Увеличте Счет</h2><br>
Логика отвечающая за увеличение счета будет в нашем классе <b>ScrollHandler</b>. Давайте откроем его.<br>
<br>
Нам нужна ссылка на <b>GameWorld</b>, чтобы мы могли оперировать счетом. Так что передадим в конструктор ссылку на объект GameWorld, и сохраним ее в переменной класса с именем <b>gameWorld</b>. Убедитесь, что вы добавили импорт GameWorld класса (<b>com.kilobolt.GameWorld.GameWorld</b>). <br>
Наш новый конструктор класса ScrollHandler:<br>
<pre><code class="java">    <span class="keyword">public</span> ScrollHandler(GameWorld gameWorld, <span class="keyword">float</span> yPos) {
        <span class="keyword">this</span>.gameWorld = gameWorld;
        frontGrass = <span class="keyword">new</span> Grass(<span class="number">0</span>, yPos, <span class="number">143</span>, <span class="number">11</span>, SCROLL_SPEED);
        backGrass = <span class="keyword">new</span> Grass(frontGrass.getTailX(), yPos, <span class="number">143</span>, <span class="number">11</span>,
                SCROLL_SPEED);

        pipe1 = <span class="keyword">new</span> Pipe(<span class="number">210</span>, <span class="number">0</span>, <span class="number">22</span>, <span class="number">60</span>, SCROLL_SPEED, yPos);
        pipe2 = <span class="keyword">new</span> Pipe(pipe1.getTailX() + PIPE_GAP, <span class="number">0</span>, <span class="number">22</span>, <span class="number">70</span>, SCROLL_SPEED,
                yPos);
        pipe3 = <span class="keyword">new</span> Pipe(pipe2.getTailX() + PIPE_GAP, <span class="number">0</span>, <span class="number">22</span>, <span class="number">60</span>, SCROLL_SPEED,
                yPos);
    }
</code></pre><br>
Перейдите в класс GameWorld и обновите создание нашего ScrollHandler следующим образом:<br>
<pre><code class="java">scroller = <span class="keyword">new</span> ScrollHandler(<span class="keyword">this</span>, midPointY + <span class="number">66</span>);
</code></pre><br>
В целом, логика, следующая:<br>
<ul>
<li>Если середина трубы по отношению к <b>Х</b> меньше, чем клюв птицы, мы добавляем 1 очко к счету. </li>
<li>Так как мы не хотим, чтобы это действие повторялось для одной и той же трубы, мы добавим в трубу новую перменную <b>isScored </b>тиа Boolean. Только если <b>isScored </b>равно false мы увелим счет (Устанавливаем isScore в true во время процесса. Нам надо вернуть isScored обратно в false после того как сбрасываем положение трубы).</li>
</ul><br>
<br>
Это наша новая логика колизии, которая описана ниже:<br>
<pre><code class="java"><span class="keyword">public</span> <span class="keyword">boolean</span> collides(Bird bird) {

        <span class="keyword">if</span> (!pipe1.isScored()
                &amp;&amp; pipe1.getX() + (pipe1.getWidth() / <span class="number">2</span>) &lt; bird.getX()
                        + bird.getWidth()) {
            addScore(<span class="number">1</span>);
            pipe1.setScored(<span class="keyword">true</span>);
            AssetLoader.coin.play();
        } <span class="keyword">else</span> <span class="keyword">if</span> (!pipe2.isScored()
                &amp;&amp; pipe2.getX() + (pipe2.getWidth() / <span class="number">2</span>) &lt; bird.getX()
                        + bird.getWidth()) {
            addScore(<span class="number">1</span>);
            pipe2.setScored(<span class="keyword">true</span>);
            AssetLoader.coin.play();

        } <span class="keyword">else</span> <span class="keyword">if</span> (!pipe3.isScored()
                &amp;&amp; pipe3.getX() + (pipe3.getWidth() / <span class="number">2</span>) &lt; bird.getX()
                        + bird.getWidth()) {
            addScore(<span class="number">1</span>);
            pipe3.setScored(<span class="keyword">true</span>);
            AssetLoader.coin.play();

        }

        <span class="keyword">return</span> (pipe1.collides(bird) || pipe2.collides(bird) || pipe3
                .collides(bird));
    }
</code></pre><br>
Чтобы избавится от всех ошибок, которые мы сейчас наплодили, нам необходимо сделать следующее:<br>
<ol>
<li>Добаьте импорт класса AseetLoader (<b>com.kilobolt.ZBHelpers.AssetLoader</b>).</li>
<li>Создайте следующий метод <b>addScore</b>:<br>
<pre><code class="java"><span class="keyword">private</span> <span class="keyword">void</span> addScore(<span class="keyword">int</span> increment) {
    gameWorld.addScore(increment);
}
</code></pre><br>
<br>
</li>
<li>Перейти в класс <b>Pipe </b>и добавить переменную типа Boolean с именем <b>isScored</b>. </li>
</ol><br>
<br>
Полный пример класса ScrollHandler:<br>
<div class="spoiler"><b class="spoiler_title">ScrollHandler.java</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.GameObjects;

<span class="keyword">import</span> com.kilobolt.GameWorld.GameWorld;
<span class="keyword">import</span> com.kilobolt.ZBHelpers.AssetLoader;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ScrollHandler</span> {</span>

    <span class="keyword">private</span> Grass frontGrass, backGrass;
    <span class="keyword">private</span> Pipe pipe1, pipe2, pipe3;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> SCROLL_SPEED = -<span class="number">59</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> PIPE_GAP = <span class="number">49</span>;
    
    <span class="keyword">private</span> GameWorld gameWorld;

    <span class="keyword">public</span> ScrollHandler(GameWorld gameWorld, <span class="keyword">float</span> yPos) {
        <span class="keyword">this</span>.gameWorld = gameWorld;
        frontGrass = <span class="keyword">new</span> Grass(<span class="number">0</span>, yPos, <span class="number">143</span>, <span class="number">11</span>, SCROLL_SPEED);
        backGrass = <span class="keyword">new</span> Grass(frontGrass.getTailX(), yPos, <span class="number">143</span>, <span class="number">11</span>,
                SCROLL_SPEED);

        pipe1 = <span class="keyword">new</span> Pipe(<span class="number">210</span>, <span class="number">0</span>, <span class="number">22</span>, <span class="number">60</span>, SCROLL_SPEED, yPos);
        pipe2 = <span class="keyword">new</span> Pipe(pipe1.getTailX() + PIPE_GAP, <span class="number">0</span>, <span class="number">22</span>, <span class="number">70</span>, SCROLL_SPEED,
                yPos);
        pipe3 = <span class="keyword">new</span> Pipe(pipe2.getTailX() + PIPE_GAP, <span class="number">0</span>, <span class="number">22</span>, <span class="number">60</span>, SCROLL_SPEED,
                yPos);
    }

    <span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {
        <span class="comment">// Обновим наши объекты</span>
        frontGrass.update(delta);
        backGrass.update(delta);
        pipe1.update(delta);
        pipe2.update(delta);
        pipe3.update(delta);

        <span class="comment">// Проверим если какая, то из труб оказалась за левой границей экрана</span>
        <span class="comment">// и сбросим ее положение</span>
        <span class="keyword">if</span> (pipe1.isScrolledLeft()) {
            pipe1.reset(pipe3.getTailX() + PIPE_GAP);
        } <span class="keyword">else</span> <span class="keyword">if</span> (pipe2.isScrolledLeft()) {
            pipe2.reset(pipe1.getTailX() + PIPE_GAP);

        } <span class="keyword">else</span> <span class="keyword">if</span> (pipe3.isScrolledLeft()) {
            pipe3.reset(pipe2.getTailX() + PIPE_GAP);
        }

        <span class="comment">// Аналогично с травой</span>
        <span class="keyword">if</span> (frontGrass.isScrolledLeft()) {
            frontGrass.reset(backGrass.getTailX());

        } <span class="keyword">else</span> <span class="keyword">if</span> (backGrass.isScrolledLeft()) {
            backGrass.reset(frontGrass.getTailX());

        }
    }

    <span class="keyword">public</span> <span class="keyword">void</span> stop() {
        frontGrass.stop();
        backGrass.stop();
        pipe1.stop();
        pipe2.stop();
        pipe3.stop();
    }

    <span class="keyword">public</span> <span class="keyword">boolean</span> collides(Bird bird) {

        <span class="keyword">if</span> (!pipe1.isScored()
                &amp;&amp; pipe1.getX() + (pipe1.getWidth() / <span class="number">2</span>) &lt; bird.getX()
                        + bird.getWidth()) {
            addScore(<span class="number">1</span>);
            pipe1.setScored(<span class="keyword">true</span>);
            AssetLoader.coin.play();
        } <span class="keyword">else</span> <span class="keyword">if</span> (!pipe2.isScored()
                &amp;&amp; pipe2.getX() + (pipe2.getWidth() / <span class="number">2</span>) &lt; bird.getX()
                        + bird.getWidth()) {
            addScore(<span class="number">1</span>);
            pipe2.setScored(<span class="keyword">true</span>);
            AssetLoader.coin.play();

        } <span class="keyword">else</span> <span class="keyword">if</span> (!pipe3.isScored()
                &amp;&amp; pipe3.getX() + (pipe3.getWidth() / <span class="number">2</span>) &lt; bird.getX()
                        + bird.getWidth()) {
            addScore(<span class="number">1</span>);
            pipe3.setScored(<span class="keyword">true</span>);
            AssetLoader.coin.play();

        }

        <span class="keyword">return</span> (pipe1.collides(bird) || pipe2.collides(bird) || pipe3
                .collides(bird));
    }

    <span class="keyword">private</span> <span class="keyword">void</span> addScore(<span class="keyword">int</span> increment) {
        gameWorld.addScore(increment);
    }

    <span class="keyword">public</span> Grass getFrontGrass() {
        <span class="keyword">return</span> frontGrass;
    }

    <span class="keyword">public</span> Grass getBackGrass() {
        <span class="keyword">return</span> backGrass;
    }

    <span class="keyword">public</span> Pipe getPipe1() {
        <span class="keyword">return</span> pipe1;
    }

    <span class="keyword">public</span> Pipe getPipe2() {
        <span class="keyword">return</span> pipe2;
    }

    <span class="keyword">public</span> Pipe getPipe3() {
        <span class="keyword">return</span> pipe3;
    }

}
</code></pre><br>
</div></div><br>
<h2>Класс Pipe – isScored boolean </h2><br>
<ul>
<li>Создайте новую переменную в классе:<br>
<pre><code class="java"><span class="keyword">private</span> <span class="keyword">boolean</span> isScored = <span class="keyword">false</span>;
</code></pre><br>
Эта переменная будет выставлена в true, когда пользователя наградят очком за прохождение текущего объекта Pipe.<br>
<br>
</li>
<li>Обновите метод <b>reset</b>, выставите <b>isScored </b>в false, когда сбрасывается положение трубы.<br>
<pre><code class="java"><span class="annotation">@Override</span>
<span class="keyword">public</span> <span class="keyword">void</span> reset(<span class="keyword">float</span> newX) {
    <span class="keyword">super</span>.reset(newX);
    height = r.nextInt(<span class="number">90</span>) + <span class="number">15</span>;
    isScored = <span class="keyword">false</span>;
}
</code></pre><br>
Далее создайте методы доступа для этой переменной:<br>
<pre><code class="java"><span class="keyword">public</span> <span class="keyword">boolean</span> isScored() {
    <span class="keyword">return</span> isScored;
}

<span class="keyword">public</span> <span class="keyword">void</span> setScored(<span class="keyword">boolean</span> b) {
    isScored = b;
}
</code></pre><br>
<br>
</li>
</ul><br>
<br>
Вот как должен выглядеть ваш класс Pipe:<br>
<div class="spoiler"><b class="spoiler_title">Pipe.java</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.GameObjects;

<span class="keyword">import</span> java.util.Random;

<span class="keyword">import</span> com.badlogic.gdx.math.Intersector;
<span class="keyword">import</span> com.badlogic.gdx.math.Rectangle;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Pipe</span> <span class="keyword">extends</span> <span class="title">Scrollable</span> {</span>

    <span class="keyword">private</span> Random r;

    <span class="keyword">private</span> Rectangle skullUp, skullDown, barUp, barDown;

    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> VERTICAL_GAP = <span class="number">45</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> SKULL_WIDTH = <span class="number">24</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> SKULL_HEIGHT = <span class="number">11</span>;
    <span class="keyword">private</span> <span class="keyword">float</span> groundY;

    <span class="keyword">private</span> <span class="keyword">boolean</span> isScored = <span class="keyword">false</span>;

    <span class="comment">// Когда конструктор класса Pipe вызван – вызовите конструктор родительского класса (Scrollable)</span>
    <span class="keyword">public</span> Pipe(<span class="keyword">float</span> x, <span class="keyword">float</span> y, <span class="keyword">int</span> width, <span class="keyword">int</span> height, <span class="keyword">float</span> scrollSpeed,
            <span class="keyword">float</span> groundY) {
        <span class="keyword">super</span>(x, y, width, height, scrollSpeed);
        <span class="comment">// Инициализируйте объект типа Random, для получения случайных чисел</span>
        r = <span class="keyword">new</span> Random();
        skullUp = <span class="keyword">new</span> Rectangle();
        skullDown = <span class="keyword">new</span> Rectangle();
        barUp = <span class="keyword">new</span> Rectangle();
        barDown = <span class="keyword">new</span> Rectangle();

        <span class="keyword">this</span>.groundY = groundY;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {
        <span class="comment">// Вызовите метод update в родительском классе (Scrollable)</span>
        <span class="keyword">super</span>.update(delta);

        barUp.set(position.x, position.y, width, height);
        barDown.set(position.x, position.y + height + VERTICAL_GAP, width,
                groundY - (position.y + height + VERTICAL_GAP));

        <span class="comment">// Это смещение эквивалентно этому: (SKULL_WIDTH - width) / 2</span>
        skullUp.set(position.x - (SKULL_WIDTH - width) / <span class="number">2</span>, position.y + height
                - SKULL_HEIGHT, SKULL_WIDTH, SKULL_HEIGHT);
        skullDown.set(position.x - (SKULL_WIDTH - width) / <span class="number">2</span>, barDown.y,
                SKULL_WIDTH, SKULL_HEIGHT);

    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> reset(<span class="keyword">float</span> newX) {
        <span class="comment">// Вызовите метод reset в родительском классе (Scrollable)</span>
        <span class="keyword">super</span>.reset(newX);
        <span class="comment">// Измените высоту на случайное значение</span>
        height = r.nextInt(<span class="number">90</span>) + <span class="number">15</span>;
        isScored = <span class="keyword">false</span>;
    }

    <span class="keyword">public</span> Rectangle getSkullUp() {
        <span class="keyword">return</span> skullUp;
    }

    <span class="keyword">public</span> Rectangle getSkullDown() {
        <span class="keyword">return</span> skullDown;
    }

    <span class="keyword">public</span> Rectangle getBarUp() {
        <span class="keyword">return</span> barUp;
    }

    <span class="keyword">public</span> Rectangle getBarDown() {
        <span class="keyword">return</span> barDown;
    }

    <span class="keyword">public</span> <span class="keyword">boolean</span> collides(Bird bird) {
        <span class="keyword">if</span> (position.x &lt; bird.getX() + bird.getWidth()) {
            <span class="keyword">return</span> (Intersector.overlaps(bird.getBoundingCircle(), barUp)
                    || Intersector.overlaps(bird.getBoundingCircle(), barDown)
                    || Intersector.overlaps(bird.getBoundingCircle(), skullUp) || Intersector
                        .overlaps(bird.getBoundingCircle(), skullDown));
        }
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

    <span class="keyword">public</span> <span class="keyword">boolean</span> isScored() {
        <span class="keyword">return</span> isScored;
    }

    <span class="keyword">public</span> <span class="keyword">void</span> setScored(<span class="keyword">boolean</span> b) {
        isScored = b;
    }
}
</code></pre><br>
</div></div><br>
<h2>Запустите код!</h2><br>
Вы должны слышать, как проигрывается <b>Coin.wav</b> каждый раз как получаете очко за прохождение пары трубы. Но мы хотим не просто слышать, как наш счет растет. Мы хотим видеть, как наш счет изменяется!<br>
<br>
Мы собираемся отрисовывать текст на экране для отображения нашего счета.<br>
<br>
<h2>Отображение Score в GameRenderer</h2><br>
Отображение текста – это простая задача. Между нашими <b>batcher.begin() </b>и <b>batcher.end()</b> вызовами, нам надо добавить следующую строчку:<br>
<pre><code class="java">AssetLoader.shadow.draw(batcher, <span class="string">"hello world"</span>, x, y);
</code></pre><br>
Объект типа <b>BitmapFont</b>, как показано выше, имеет метод draw который получает на вход SpriteBatch, строку, и координаты x и y где отрисовать эту строку.<br>
<br>
<ul>
<li>Добавьте следующие строки кода перед <b>batcher.end()</b> вызовом в методе <b>render</b>:<br>
<pre><code class="java">AssetLoader.shadow.draw(batcher, <span class="string">"hello world"</span>, x, y);
</code></pre><br>
// Конвертирование integer в String<br>
String score = myWorld.getScore() + „“;<br>
<br>
// Отрисуем сначала тень<br>
AssetLoader.shadow.draw(batcher, „“ + myWorld.getScore(), (136 / 2) — (3 * score.length()), 12);<br>
// Отрисуем сам текст<br>
AssetLoader.font.draw(batcher, „“ + myWorld.getScore(), (136 / 2) — (3 * score.length() — 1), 11);<br>
batcher.end();<br>
</li>
</ul><br>
<br>
Сначала мы переводим Integer в String, чтобы мы могли отрисовать значение с помощью нашего BitmapFont. Мы расчитываем подходящее значение X координаты исходя из длины счета, так что мы сможем хорошо отцентрировать текст по центру экрана.<br>
<br>
Полный пример класса GameRenderer:<br>
<div class="spoiler"><b class="spoiler_title">GameRenderer.java</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.GameWorld;

<span class="keyword">import</span> com.badlogic.gdx.Gdx;
<span class="keyword">import</span> com.badlogic.gdx.graphics.Color;
<span class="keyword">import</span> com.badlogic.gdx.graphics.GL20;
<span class="keyword">import</span> com.badlogic.gdx.graphics.OrthographicCamera;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.Animation;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.SpriteBatch;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.TextureRegion;
<span class="keyword">import</span> com.badlogic.gdx.graphics.glutils.ShapeRenderer;
<span class="keyword">import</span> com.badlogic.gdx.graphics.glutils.ShapeRenderer.ShapeType;
<span class="keyword">import</span> com.badlogic.gdx.math.Rectangle;
<span class="keyword">import</span> com.kilobolt.GameObjects.Bird;
<span class="keyword">import</span> com.kilobolt.GameObjects.Grass;
<span class="keyword">import</span> com.kilobolt.GameObjects.Pipe;
<span class="keyword">import</span> com.kilobolt.GameObjects.ScrollHandler;
<span class="keyword">import</span> com.kilobolt.ZBHelpers.AssetLoader;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameRenderer</span> {</span>

    <span class="keyword">private</span> GameWorld myWorld;
    <span class="keyword">private</span> OrthographicCamera cam;
    <span class="keyword">private</span> ShapeRenderer shapeRenderer;

    <span class="keyword">private</span> SpriteBatch batcher;

    <span class="keyword">private</span> <span class="keyword">int</span> midPointY;
    <span class="keyword">private</span> <span class="keyword">int</span> gameHeight;

    <span class="comment">// Игровые объекты</span>
    <span class="keyword">private</span> Bird bird;
    <span class="keyword">private</span> ScrollHandler scroller;
    <span class="keyword">private</span> Grass frontGrass, backGrass;
    <span class="keyword">private</span> Pipe pipe1, pipe2, pipe3;

    <span class="comment">// Ресурсы игры</span>
    <span class="keyword">private</span> TextureRegion bg, grass;
    <span class="keyword">private</span> Animation birdAnimation;
    <span class="keyword">private</span> TextureRegion birdMid, birdDown, birdUp;
    <span class="keyword">private</span> TextureRegion skullUp, skullDown, bar;

    <span class="keyword">public</span> GameRenderer(GameWorld world, <span class="keyword">int</span> gameHeight, <span class="keyword">int</span> midPointY) {
        myWorld = world;

        <span class="keyword">this</span>.gameHeight = gameHeight;
        <span class="keyword">this</span>.midPointY = midPointY;

        cam = <span class="keyword">new</span> OrthographicCamera();
        cam.setToOrtho(<span class="keyword">true</span>, <span class="number">136</span>, gameHeight);

        batcher = <span class="keyword">new</span> SpriteBatch();
        batcher.setProjectionMatrix(cam.combined);
        shapeRenderer = <span class="keyword">new</span> ShapeRenderer();
        shapeRenderer.setProjectionMatrix(cam.combined);

        <span class="comment">// Вызовим вспомогательные методы, чтобы инициализировать переменные класса</span>
        initGameObjects();
        initAssets();
    }

    <span class="keyword">private</span> <span class="keyword">void</span> initGameObjects() {
        bird = myWorld.getBird();
        scroller = myWorld.getScroller();
        frontGrass = scroller.getFrontGrass();
        backGrass = scroller.getBackGrass();
        pipe1 = scroller.getPipe1();
        pipe2 = scroller.getPipe2();
        pipe3 = scroller.getPipe3();
    }

    <span class="keyword">private</span> <span class="keyword">void</span> initAssets() {
        bg = AssetLoader.bg;
        grass = AssetLoader.grass;
        birdAnimation = AssetLoader.birdAnimation;
        birdMid = AssetLoader.bird;
        birdDown = AssetLoader.birdDown;
        birdUp = AssetLoader.birdUp;
        skullUp = AssetLoader.skullUp;
        skullDown = AssetLoader.skullDown;
        bar = AssetLoader.bar;
    }

    <span class="keyword">private</span> <span class="keyword">void</span> drawGrass() {
        <span class="comment">// Отрисуем траву</span>
        batcher.draw(grass, frontGrass.getX(), frontGrass.getY(),
                frontGrass.getWidth(), frontGrass.getHeight());
        batcher.draw(grass, backGrass.getX(), backGrass.getY(),
                backGrass.getWidth(), backGrass.getHeight());
    }

    <span class="keyword">private</span> <span class="keyword">void</span> drawSkulls() {
        batcher.draw(skullUp, pipe1.getX() - <span class="number">1</span>,
                pipe1.getY() + pipe1.getHeight() - <span class="number">14</span>, <span class="number">24</span>, <span class="number">14</span>);
        batcher.draw(skullDown, pipe1.getX() - <span class="number">1</span>,
                pipe1.getY() + pipe1.getHeight() + <span class="number">45</span>, <span class="number">24</span>, <span class="number">14</span>);

        batcher.draw(skullUp, pipe2.getX() - <span class="number">1</span>,
                pipe2.getY() + pipe2.getHeight() - <span class="number">14</span>, <span class="number">24</span>, <span class="number">14</span>);
        batcher.draw(skullDown, pipe2.getX() - <span class="number">1</span>,
                pipe2.getY() + pipe2.getHeight() + <span class="number">45</span>, <span class="number">24</span>, <span class="number">14</span>);

        batcher.draw(skullUp, pipe3.getX() - <span class="number">1</span>,
                pipe3.getY() + pipe3.getHeight() - <span class="number">14</span>, <span class="number">24</span>, <span class="number">14</span>);
        batcher.draw(skullDown, pipe3.getX() - <span class="number">1</span>,
                pipe3.getY() + pipe3.getHeight() + <span class="number">45</span>, <span class="number">24</span>, <span class="number">14</span>);
    }

    <span class="keyword">private</span> <span class="keyword">void</span> drawPipes() {
        batcher.draw(bar, pipe1.getX(), pipe1.getY(), pipe1.getWidth(),
                pipe1.getHeight());
        batcher.draw(bar, pipe1.getX(), pipe1.getY() + pipe1.getHeight() + <span class="number">45</span>,
                pipe1.getWidth(), midPointY + <span class="number">66</span> - (pipe1.getHeight() + <span class="number">45</span>));

        batcher.draw(bar, pipe2.getX(), pipe2.getY(), pipe2.getWidth(),
                pipe2.getHeight());
        batcher.draw(bar, pipe2.getX(), pipe2.getY() + pipe2.getHeight() + <span class="number">45</span>,
                pipe2.getWidth(), midPointY + <span class="number">66</span> - (pipe2.getHeight() + <span class="number">45</span>));

        batcher.draw(bar, pipe3.getX(), pipe3.getY(), pipe3.getWidth(),
                pipe3.getHeight());
        batcher.draw(bar, pipe3.getX(), pipe3.getY() + pipe3.getHeight() + <span class="number">45</span>,
                pipe3.getWidth(), midPointY + <span class="number">66</span> - (pipe3.getHeight() + <span class="number">45</span>));
    }

    <span class="keyword">public</span> <span class="keyword">void</span> render(<span class="keyword">float</span> runTime) {

        Gdx.gl.glClearColor(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);
        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);

        shapeRenderer.begin(ShapeType.Filled);

        <span class="comment">// Отрисуем цвет заднего фона</span>
        shapeRenderer.setColor(<span class="number">55</span> / <span class="number">255.0</span>f, <span class="number">80</span> / <span class="number">255.0</span>f, <span class="number">100</span> / <span class="number">255.0</span>f, <span class="number">1</span>);
        shapeRenderer.rect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">136</span>, midPointY + <span class="number">66</span>);

        <span class="comment">// Отрисуем траву</span>
        shapeRenderer.setColor(<span class="number">111</span> / <span class="number">255.0</span>f, <span class="number">186</span> / <span class="number">255.0</span>f, <span class="number">45</span> / <span class="number">255.0</span>f, <span class="number">1</span>);
        shapeRenderer.rect(<span class="number">0</span>, midPointY + <span class="number">66</span>, <span class="number">136</span>, <span class="number">11</span>);

        <span class="comment">// Отрисуем грязь</span>
        shapeRenderer.setColor(<span class="number">147</span> / <span class="number">255.0</span>f, <span class="number">80</span> / <span class="number">255.0</span>f, <span class="number">27</span> / <span class="number">255.0</span>f, <span class="number">1</span>);
        shapeRenderer.rect(<span class="number">0</span>, midPointY + <span class="number">77</span>, <span class="number">136</span>, <span class="number">52</span>);

        shapeRenderer.end();

        batcher.begin();
        batcher.disableBlending();
        batcher.draw(bg, <span class="number">0</span>, midPointY + <span class="number">23</span>, <span class="number">136</span>, <span class="number">43</span>);

        <span class="comment">// 1. Рисуем траву</span>
        drawGrass();

        <span class="comment">// 2. Рисуем трубы</span>
        drawPipes();
        batcher.enableBlending();

        <span class="comment">// 3. Рисуем черепа(нужна прозрачность)</span>
        drawSkulls();

        <span class="keyword">if</span> (bird.shouldntFlap()) {
            batcher.draw(birdMid, bird.getX(), bird.getY(),
                    bird.getWidth() / <span class="number">2.0</span>f, bird.getHeight() / <span class="number">2.0</span>f,
                    bird.getWidth(), bird.getHeight(), <span class="number">1</span>, <span class="number">1</span>, bird.getRotation());

        } <span class="keyword">else</span> {
            batcher.draw(birdAnimation.getKeyFrame(runTime), bird.getX(),
                    bird.getY(), bird.getWidth() / <span class="number">2.0</span>f,
                    bird.getHeight() / <span class="number">2.0</span>f, bird.getWidth(), bird.getHeight(),
                    <span class="number">1</span>, <span class="number">1</span>, bird.getRotation());
        }

        <span class="comment">// Переводим integer в String</span>
        String score = myWorld.getScore() + <span class="string">""</span>;

        <span class="comment">// Сначала отрисовываем тень</span>
        AssetLoader.shadow.draw(batcher, <span class="string">""</span> + myWorld.getScore(), (<span class="number">136</span> / <span class="number">2</span>)
                - (<span class="number">3</span> * score.length()), <span class="number">12</span>);
        <span class="comment">// Отрисуем сам текст</span>
        AssetLoader.font.draw(batcher, <span class="string">""</span> + myWorld.getScore(), (<span class="number">136</span> / <span class="number">2</span>)
                - (<span class="number">3</span> * score.length() - <span class="number">1</span>), <span class="number">11</span>);

        batcher.end();

    }
}
</code></pre><br>
</div></div><br>
Теперь у нас есть работающая система очков и мы даже отобразили какой-то текст на экране! В следующем дне, мы реализуем GameStates, благодаря чему мы сможем перестартовывать игру. А после этого, мы попытаемся добавить какой-никакой UI!<br>
<br>
<h2>Исходный код за день</h2><br>
Если вы вне настроения писать код самостоятельно, скачайте его отсюда:<br>
<img src="./tutorial_files/e273ed1a4ed342abb148c53ad824d8f3.png" hspace="4" vspace="4" align="left"><a href="http://www.kilobolt.com/uploads/1/2/5/7/12571940/day_9.zip"> day_9.zip</a><br>
<br>
<br>
<br>
<br>
<img src="./tutorial_files/4f355491bc81468cbcb05427325b49ca.png"> <a href="http://habrahabr.ru/post/243471/#ContentList">К Оглавлению</a><br>
<br>
<br>
<br>
<br>
<br>
<br>
<a name="Day10"></a><h1><img src="./tutorial_files/4e55852eb2a04db2a1200c031304129c.png"> День 10 — GameStates и Лучший результат</h1><hr><br>
В данной секции мы обсудим <b>GameStates</b>, которые в итоге реализуем: “старт на касании/клике», пауза и рестарт. После этого мы воспользуемся libGDX функционалом для работы с «предпочтениями», чтобы сохранять «лучший счет». В конце десятого дня у вас на руках будет полноценный клон игры Flappy Bird. В одинадцатом дне мы добавим несколько последних изменений.<br>
<br>
Если вы готовы, приступим!<br>
<br>
<h2>Быстрая правка – Колизия с потолком</h2><br>
Забыл добавить проверку на колизию с потолком. Обновите метод <b>update </b>внутри класса <b>Bird</b>!<br>
<pre><code class="java">    <span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {

        velocity.add(acceleration.cpy().scl(delta));

        <span class="keyword">if</span> (velocity.y &gt; <span class="number">200</span>) {
            velocity.y = <span class="number">200</span>;
        } 
        
        <span class="comment">// проверяем потолок </span>
        <span class="keyword">if</span> (position.y &lt; -<span class="number">13</span>) {
            position.y = -<span class="number">13</span>;
            velocity.y = <span class="number">0</span>;
        }

        position.add(velocity.cpy().scl(delta));

        <span class="comment">// Устанавливаем центр круга (9, 6) по отношению к птице.</span>
        <span class="comment">// Устанавливаем радиус круга равным 6.5f;</span>
        boundingCircle.set(position.x + <span class="number">9</span>, position.y + <span class="number">6</span>, <span class="number">6.5</span>f);

        <span class="comment">// Повернем против часовой стрелки</span>
        <span class="keyword">if</span> (velocity.y &lt; <span class="number">0</span>) {
            rotation -= <span class="number">600</span> * delta;

            <span class="keyword">if</span> (rotation &lt; -<span class="number">20</span>) {
                rotation = -<span class="number">20</span>;
            }
        }

        <span class="comment">// Повернем по часовой стрелке</span>
        <span class="keyword">if</span> (isFalling() || !isAlive) {
            rotation += <span class="number">480</span> * delta;
            <span class="keyword">if</span> (rotation &gt; <span class="number">90</span>) {
                rotation = <span class="number">90</span>;
            }
        }
    }
</code></pre><br>
<h2>Добавим GameStates</h2><br>
Суть использования <b>GameState </b>в том, чтобы разбить нашу игру на несколько состояний, таких как “RUNNING" или “GAMEOVER". Так же мы будем использовать IF или SWITCH, чтобы управлять ходом игры в зависимости от текущего состояния.<br>
<br>
Легкий вариант реализации GameState – это создать <b>Enum</b>, это всего лишь переменная, которая может принимать только те значения, что мы указали для нее. Подробнее про Enum вы можете почитать <a href="http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html">тут</a>, если вам интересно. Если вы предпочитаете увидеть код, продолжайте читать!<br>
<br>
Мы добавим enum в наш <b>GameWorld</b>. Добавьте следующий код куда нибудь внутри класса GameWorld:<br>
<pre><code class="java"><span class="keyword">public</span> <span class="keyword">enum</span> GameState {
    READY, RUNNING, GAMEOVER
}
</code></pre><br>
<ul>
<li>Теперь мы можем создать переменую типа <b>GameState </b>так же как мы создаем другие переменные. Создайте переменную внутри класса:<br>
<pre><code class="java"><span class="keyword">private</span> GameState currentState;
</code></pre><br>
<br>
</li>
<li>Проинициализируйте ее в конструкторе:<br>
<pre><code class="java">currentState = GameState.READY;
</code></pre><br>
<br>
</li>
</ul><br>
<br>
<img src="./tutorial_files/73b0bbf60c8a4fc894685ea6a42dd5b7.png"><br>
<br>
Далее нам надо внести пачку изменений в наш метод <b>update</b>. В сущности, мы переименуем этот метод в <b>updateRunning</b>.<br>
<br>
Как только вы внесете эти изменения, создайте новый метод <b>update </b>и метод <b>updateReady </b>как показано ниже:<br>
<pre><code class="java">  <span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {

        <span class="keyword">switch</span> (currentState) {
        <span class="keyword">case</span> READY:
            updateReady(delta);
            <span class="keyword">break</span>;

        <span class="keyword">case</span> RUNNING:
        <span class="keyword">default</span>:
            updateRunning(delta);
            <span class="keyword">break</span>;
        }

    }

    <span class="keyword">private</span> <span class="keyword">void</span> updateReady(<span class="keyword">float</span> delta) {
        <span class="comment">// Пока что ничего не делаем</span>
    }
</code></pre><br>
Теперь метод <b>update </b>проверяет текущее состояние игры перед тем как запустить нужную логику обновления.<br>
<br>
Далее нам нужно изменить наш <b>GameState</b>, на случай когда наша птичка умирает. Будем считать, что птичка полностью умерла, когда коснулась земли. Внутри метода <b>updateRunning </b>(переименованный ранее метод <b>update</b>), добавьте следующую строчку в последний <b>if</b>:<br>
<pre><code class="java">currentState = GameState.GAMEOVER;
</code></pre><br>
И наконец, добавьте следующие методы, которые помогут управлять <b>GameState</b>.<br>
<br>
<b>isReady</b> будет возвращать true когда curentState равен GameState.READY.<br>
<b>start</b> изменяет currentState на GameState.RUNNING.<br>
<b>restart </b>более интересный чем предыдущие методы – он обнуляет все переменные в объекте, которые подверглись изменениям во время игры. Вот и вся наша логика для рестарта игры.<br>
<br>
Когда метод <b>restart </b>вызыван, мы пробежимся по всем зависимым объектам и повызываем их метод <b>onRestart</b>. Результатом будет полное обнуление до значений по умолчанию у всех объектов.<br>
<br>
Какие аргументы мы передаем в методы <b>onRestart</b>? Это значения по умолчанию для переменных которые возможно поменялись во время игры. Например, у нашей птички есть значение позиции по Y, так что мы передадим стартовое значение для позиции по Y.<br>
<pre><code class="java">    <span class="keyword">public</span> <span class="keyword">void</span> restart() {
        currentState = GameState.READY;
        score = <span class="number">0</span>;
        bird.onRestart(midPointY - <span class="number">5</span>);
        scroller.onRestart();
        currentState = GameState.READY;
    }
</code></pre><br>
Нам так же нужен доступ к переменной <b>midpoint</b>, которая на данный момент не сохраняется в конструкторе класса. Давайте изменим это.<br>
Добавьте следующую переменную в класс:<br>
<pre><code class="java"><span class="keyword">public</span> <span class="keyword">int</span> midPointY;
</code></pre><br>
Инициализируйте ее в конструкторе класса:<br>
<pre><code class="java"><span class="keyword">this</span>.midPointY = midPointY;
</code></pre><br>
На случай если вы запутались, вот полный код <b>GameWorld </b>класс:<br>
<div class="spoiler"><b class="spoiler_title">GameWorld.java</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.GameWorld;

<span class="keyword">import</span> com.badlogic.gdx.math.Intersector;
<span class="keyword">import</span> com.badlogic.gdx.math.Rectangle;
<span class="keyword">import</span> com.kilobolt.GameObjects.Bird;
<span class="keyword">import</span> com.kilobolt.GameObjects.ScrollHandler;
<span class="keyword">import</span> com.kilobolt.ZBHelpers.AssetLoader;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameWorld</span> {</span>

    <span class="keyword">private</span> Bird bird;
    <span class="keyword">private</span> ScrollHandler scroller;
    <span class="keyword">private</span> Rectangle ground;
    <span class="keyword">private</span> <span class="keyword">int</span> score = <span class="number">0</span>;

    <span class="keyword">private</span> <span class="keyword">int</span> midPointY;

    <span class="keyword">private</span> GameState currentState;

    <span class="keyword">public</span> <span class="keyword">enum</span> GameState {
        READY, RUNNING, GAMEOVER
    }

    <span class="keyword">public</span> GameWorld(<span class="keyword">int</span> midPointY) {
        currentState = GameState.READY;
        <span class="keyword">this</span>.midPointY = midPointY;
        bird = <span class="keyword">new</span> Bird(<span class="number">33</span>, midPointY - <span class="number">5</span>, <span class="number">17</span>, <span class="number">12</span>);
        <span class="comment">// Трава должна начинаться на 66 пиксилей ниже чем знаение midPointY</span>
        scroller = <span class="keyword">new</span> ScrollHandler(<span class="keyword">this</span>, midPointY + <span class="number">66</span>);
        ground = <span class="keyword">new</span> Rectangle(<span class="number">0</span>, midPointY + <span class="number">66</span>, <span class="number">137</span>, <span class="number">11</span>);
    }

    <span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {

        <span class="keyword">switch</span> (currentState) {
        <span class="keyword">case</span> READY:
            updateReady(delta);
            <span class="keyword">break</span>;

        <span class="keyword">case</span> RUNNING:
        <span class="keyword">default</span>:
            updateRunning(delta);
            <span class="keyword">break</span>;
        }

    }

    <span class="keyword">private</span> <span class="keyword">void</span> updateReady(<span class="keyword">float</span> delta) {
        <span class="comment">// Пока ничего не делаем</span>
    }

    <span class="keyword">public</span> <span class="keyword">void</span> updateRunning(<span class="keyword">float</span> delta) {
        <span class="keyword">if</span> (delta &gt; <span class="number">.15</span>f) {
            delta = <span class="number">.15</span>f;
        }

        bird.update(delta);
        scroller.update(delta);

        <span class="keyword">if</span> (scroller.collides(bird) &amp;&amp; bird.isAlive()) {
            scroller.stop();
            bird.die();
            AssetLoader.dead.play();
        }

        <span class="keyword">if</span> (Intersector.overlaps(bird.getBoundingCircle(), ground)) {
            scroller.stop();
            bird.die();
            bird.decelerate();
            currentState = GameState.GAMEOVER;
        }
    }

    <span class="keyword">public</span> Bird getBird() {
        <span class="keyword">return</span> bird;

    }

    <span class="keyword">public</span> ScrollHandler getScroller() {
        <span class="keyword">return</span> scroller;
    }

    <span class="keyword">public</span> <span class="keyword">int</span> getScore() {
        <span class="keyword">return</span> score;
    }

    <span class="keyword">public</span> <span class="keyword">void</span> addScore(<span class="keyword">int</span> increment) {
        score += increment;
    }

    <span class="keyword">public</span> <span class="keyword">boolean</span> isReady() {
        <span class="keyword">return</span> currentState == GameState.READY;
    }

    <span class="keyword">public</span> <span class="keyword">void</span> start() {
        currentState = GameState.RUNNING;
    }

    <span class="keyword">public</span> <span class="keyword">void</span> restart() {
        currentState = GameState.READY;
        score = <span class="number">0</span>;
        bird.onRestart(midPointY - <span class="number">5</span>);
        scroller.onRestart();
        currentState = GameState.READY;
    }

    <span class="keyword">public</span> <span class="keyword">boolean</span> isGameOver() {
        <span class="keyword">return</span> currentState == GameState.GAMEOVER;
    }
}
</code></pre><br>
</div></div><br>
Теперь давайте добавим метод onRestart в наши классы Bird и Scroller. Давайтей начнем с самого легкого класса – Bird.<br>
<br>
<h2>Обнуляем Птицу</h2><br>
Создайте метод onRestart в нашей птичке. Внутри метода нам надо вернуть значения по умолчанию для всех переменных класса:<br>
<pre><code class="java">    <span class="keyword">public</span> <span class="keyword">void</span> onRestart(<span class="keyword">int</span> y) {
        rotation = <span class="number">0</span>;
        position.y = y;
        velocity.x = <span class="number">0</span>;
        velocity.y = <span class="number">0</span>;
        acceleration.x = <span class="number">0</span>;
        acceleration.y = <span class="number">460</span>;
        isAlive = <span class="keyword">true</span>;
    }
</code></pre><br>
Ну вот и все! У вас должно было получиться в итоге нечто следующее:<br>
<div class="spoiler"><b class="spoiler_title">Bird.java</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.GameObjects;

<span class="keyword">import</span> com.badlogic.gdx.math.Circle;
<span class="keyword">import</span> com.badlogic.gdx.math.Vector2;
<span class="keyword">import</span> com.kilobolt.ZBHelpers.AssetLoader;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bird</span> {</span>

    <span class="keyword">private</span> Vector2 position;
    <span class="keyword">private</span> Vector2 velocity;
    <span class="keyword">private</span> Vector2 acceleration;

    <span class="keyword">private</span> <span class="keyword">float</span> rotation;
    <span class="keyword">private</span> <span class="keyword">int</span> width;
    <span class="keyword">private</span> <span class="keyword">int</span> height;
    
    <span class="keyword">private</span> <span class="keyword">boolean</span> isAlive;

    <span class="keyword">private</span> Circle boundingCircle;

    <span class="keyword">public</span> Bird(<span class="keyword">float</span> x, <span class="keyword">float</span> y, <span class="keyword">int</span> width, <span class="keyword">int</span> height) {
        <span class="keyword">this</span>.width = width;
        <span class="keyword">this</span>.height = height;
        position = <span class="keyword">new</span> Vector2(x, y);
        velocity = <span class="keyword">new</span> Vector2(<span class="number">0</span>, <span class="number">0</span>);
        acceleration = <span class="keyword">new</span> Vector2(<span class="number">0</span>, <span class="number">460</span>);
        boundingCircle = <span class="keyword">new</span> Circle();
        isAlive = <span class="keyword">true</span>;
    }

    <span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {

        velocity.add(acceleration.cpy().scl(delta));

        <span class="keyword">if</span> (velocity.y &gt; <span class="number">200</span>) {
            velocity.y = <span class="number">200</span>;
        }

        position.add(velocity.cpy().scl(delta));

        boundingCircle.set(position.x + <span class="number">9</span>, position.y + <span class="number">6</span>, <span class="number">6.5</span>f);

        <span class="comment">// Вращаем против часовой стрелки</span>
        <span class="keyword">if</span> (velocity.y &lt; <span class="number">0</span>) {
            rotation -= <span class="number">600</span> * delta;

            <span class="keyword">if</span> (rotation &lt; -<span class="number">20</span>) {
                rotation = -<span class="number">20</span>;
            }
        }

        <span class="comment">// Вращаем по часовой стрелке</span>
        <span class="keyword">if</span> (isFalling() || !isAlive) {
            rotation += <span class="number">480</span> * delta;
            <span class="keyword">if</span> (rotation &gt; <span class="number">90</span>) {
                rotation = <span class="number">90</span>;
            }

        }

    }

    <span class="keyword">public</span> <span class="keyword">boolean</span> isFalling() {
        <span class="keyword">return</span> velocity.y &gt; <span class="number">110</span>;
    }

    <span class="keyword">public</span> <span class="keyword">boolean</span> shouldntFlap() {
        <span class="keyword">return</span> velocity.y &gt; <span class="number">70</span> || !isAlive;
    }

    <span class="keyword">public</span> <span class="keyword">void</span> onClick() {
        <span class="keyword">if</span> (isAlive) {
            AssetLoader.flap.play();
            velocity.y = -<span class="number">140</span>;
        }
    }
    
    <span class="keyword">public</span> <span class="keyword">void</span> die() {
        isAlive = <span class="keyword">false</span>;
        velocity.y = <span class="number">0</span>;
    }
    
    <span class="keyword">public</span> <span class="keyword">void</span> decelerate() {
        acceleration.y = <span class="number">0</span>;
    }
    
    <span class="keyword">public</span> <span class="keyword">void</span> onRestart(<span class="keyword">int</span> y) {
        rotation = <span class="number">0</span>;
        position.y = y;
        velocity.x = <span class="number">0</span>;
        velocity.y = <span class="number">0</span>;
        acceleration.x = <span class="number">0</span>;
        acceleration.y = <span class="number">460</span>;
        isAlive = <span class="keyword">true</span>;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getX() {
        <span class="keyword">return</span> position.x;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getY() {
        <span class="keyword">return</span> position.y;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getWidth() {
        <span class="keyword">return</span> width;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getHeight() {
        <span class="keyword">return</span> height;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getRotation() {
        <span class="keyword">return</span> rotation;
    }

    <span class="keyword">public</span> Circle getBoundingCircle() {
        <span class="keyword">return</span> boundingCircle;
    }

    <span class="keyword">public</span> <span class="keyword">boolean</span> isAlive() {
        <span class="keyword">return</span> isAlive;
    }
}</code></pre><br>
</div></div><br>
<h2>OnRestart — ScrollHandler</h2><br>
Теперь нам надо перейти в класс <b>ScrollHandler </b>и создать похожий метод, который будет сбрасывать значения переменных класса! Заметьте, что мы вызываем не существующий метод onRestart у нескольких объектов. Мы продолжим дальше и добавим их.<br>
<pre><code class="java">    <span class="keyword">public</span> <span class="keyword">void</span> onRestart() {
        frontGrass.onRestart(<span class="number">0</span>, SCROLL_SPEED);
        backGrass.onRestart(frontGrass.getTailX(), SCROLL_SPEED);
        pipe1.onRestart(<span class="number">210</span>, SCROLL_SPEED);
        pipe2.onRestart(pipe1.getTailX() + PIPE_GAP, SCROLL_SPEED);
        pipe3.onRestart(pipe2.getTailX() + PIPE_GAP, SCROLL_SPEED);
    }
</code></pre><br>
<br>
<h2>OnRestart — Grass</h2><br>
Это легко сделать. Нам просто надо вернуть траву в ее изначальное положение, а скорость изменить на <b>SCROLL_SPEED</b>.<br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.GameObjects;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Grass</span> <span class="keyword">extends</span> <span class="title">Scrollable</span> {</span>

    <span class="keyword">public</span> Grass(<span class="keyword">float</span> x, <span class="keyword">float</span> y, <span class="keyword">int</span> width, <span class="keyword">int</span> height, <span class="keyword">float</span> scrollSpeed) {
        <span class="keyword">super</span>(x, y, width, height, scrollSpeed);

    }

    <span class="keyword">public</span> <span class="keyword">void</span> onRestart(<span class="keyword">float</span> x, <span class="keyword">float</span> scrollSpeed) {
        position.x = x;
        velocity.x = scrollSpeed;
    }

}
</code></pre><br>
<h2>OnRestart — Pipe</h2><br>
Метод onRestart у трубы не много сложнее чем у травы. Добавьте следующий метод:<br>
<pre><code class="java"><span class="keyword">public</span> <span class="keyword">void</span> onRestart(<span class="keyword">float</span> x, <span class="keyword">float</span> scrollSpeed) {
    velocity.x = scrollSpeed;
    reset(x);
}
</code></pre><br>
Полный пример класса трубы:<br>
<div class="spoiler"><b class="spoiler_title">Pipe.java</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.GameObjects;

<span class="keyword">import</span> java.util.Random;

<span class="keyword">import</span> com.badlogic.gdx.math.Intersector;
<span class="keyword">import</span> com.badlogic.gdx.math.Rectangle;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Pipe</span> <span class="keyword">extends</span> <span class="title">Scrollable</span> {</span>

    <span class="keyword">private</span> Random r;

    <span class="keyword">private</span> Rectangle skullUp, skullDown, barUp, barDown;

    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> VERTICAL_GAP = <span class="number">45</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> SKULL_WIDTH = <span class="number">24</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> SKULL_HEIGHT = <span class="number">11</span>;
    <span class="keyword">private</span> <span class="keyword">float</span> groundY;

    <span class="keyword">private</span> <span class="keyword">boolean</span> isScored = <span class="keyword">false</span>;

    <span class="keyword">public</span> Pipe(<span class="keyword">float</span> x, <span class="keyword">float</span> y, <span class="keyword">int</span> width, <span class="keyword">int</span> height, <span class="keyword">float</span> scrollSpeed,
            <span class="keyword">float</span> groundY) {
        <span class="keyword">super</span>(x, y, width, height, scrollSpeed);
        r = <span class="keyword">new</span> Random();
        skullUp = <span class="keyword">new</span> Rectangle();
        skullDown = <span class="keyword">new</span> Rectangle();
        barUp = <span class="keyword">new</span> Rectangle();
        barDown = <span class="keyword">new</span> Rectangle();

        <span class="keyword">this</span>.groundY = groundY;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {
        <span class="keyword">super</span>.update(delta);


        barUp.set(position.x, position.y, width, height);
        barDown.set(position.x, position.y + height + VERTICAL_GAP, width,
                groundY - (position.y + height + VERTICAL_GAP));

        skullUp.set(position.x - (SKULL_WIDTH - width) / <span class="number">2</span>, position.y + height
                - SKULL_HEIGHT, SKULL_WIDTH, SKULL_HEIGHT);
        skullDown.set(position.x - (SKULL_WIDTH - width) / <span class="number">2</span>, barDown.y,
                SKULL_WIDTH, SKULL_HEIGHT);

    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> reset(<span class="keyword">float</span> newX) {
        <span class="keyword">super</span>.reset(newX);
        height = r.nextInt(<span class="number">90</span>) + <span class="number">15</span>;
        isScored = <span class="keyword">false</span>;
    }

    <span class="keyword">public</span> <span class="keyword">void</span> onRestart(<span class="keyword">float</span> x, <span class="keyword">float</span> scrollSpeed) {
        velocity.x = scrollSpeed;
        reset(x);
    }

    <span class="keyword">public</span> Rectangle getSkullUp() {
        <span class="keyword">return</span> skullUp;
    }

    <span class="keyword">public</span> Rectangle getSkullDown() {
        <span class="keyword">return</span> skullDown;
    }

    <span class="keyword">public</span> Rectangle getBarUp() {
        <span class="keyword">return</span> barUp;
    }

    <span class="keyword">public</span> Rectangle getBarDown() {
        <span class="keyword">return</span> barDown;
    }

    <span class="keyword">public</span> <span class="keyword">boolean</span> collides(Bird bird) {
        <span class="keyword">if</span> (position.x &lt; bird.getX() + bird.getWidth()) {
            <span class="keyword">return</span> (Intersector.overlaps(bird.getBoundingCircle(), barUp)
                    || Intersector.overlaps(bird.getBoundingCircle(), barDown)
                    || Intersector.overlaps(bird.getBoundingCircle(), skullUp) || Intersector
                        .overlaps(bird.getBoundingCircle(), skullDown));
        }
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

    <span class="keyword">public</span> <span class="keyword">boolean</span> isScored() {
        <span class="keyword">return</span> isScored;
    }

    <span class="keyword">public</span> <span class="keyword">void</span> setScored(<span class="keyword">boolean</span> b) {
        isScored = b;
    }
}
</code></pre><br>
</div></div><br>
Ну вот мы и закончили! Давайте пройдемся по тому, что мы сделали. Мы начали с добавления <b>GameState </b>в класс <b>GameWorld</b>. Потом мы добавили <b>restart </b>метод, который вызывал методы <b>restart</b> в классах <b>Bird</b> и <b>ScrollHandler</b>, что по цепочке вызывало методы <b>reset </b>в объектах типа <b>Pipe </b>и <b>Grass</b>. Теперь все что нам осталось сделать – это добавить логику которая скажет игре, что нужно запустить <b>restart </b>метод.<br>
<br>
<h2>Перейдите в InputHandler</h2><br>
Наш InputHandler должем иметь ссылку на объект GameWorld, так что он сможет проверять текущий GameState и правильно обрабатывать касания/клики. Вместо добавления еще одного аргумента в конструктор, я изменю существующий констркутор следующим образом:<br>
<pre><code class="java"><span class="keyword">public</span> InputHandler(GameWorld myWorld) {
    <span class="keyword">this</span>.myWorld = myWorld;
    myBird = myWorld.getBird();
}
</code></pre><br>
<ul>
<li>Создайте переменую в классе:<br>
<pre><code class="java"><span class="keyword">private</span> GameWorld myWorld;
</code></pre><br>
</li>
<li>Не забудьте добавить импорт класса!</li>
</ul><br>
<br>
Далее мы обновим метод <b>touchDown</b>:<br>
<pre><code class="java">    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> touchDown(<span class="keyword">int</span> screenX, <span class="keyword">int</span> screenY, <span class="keyword">int</span> pointer, <span class="keyword">int</span> button) {

        <span class="keyword">if</span> (myWorld.isReady()) {
            myWorld.start();
        }

        myBird.onClick();

        <span class="keyword">if</span> (myWorld.isGameOver()) {
            <span class="comment">// Обнулим все перменные, перейдем в GameState.READ</span>
            myWorld.restart();
        }

        <span class="keyword">return</span> <span class="keyword">true</span>;
    }
</code></pre><br>
Полный код класса:<br>
<div class="spoiler"><b class="spoiler_title">InputHandler.java</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.ZBHelpers;

<span class="keyword">import</span> com.badlogic.gdx.InputProcessor;
<span class="keyword">import</span> com.kilobolt.GameObjects.Bird;
<span class="keyword">import</span> com.kilobolt.GameWorld.GameWorld;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InputHandler</span> <span class="keyword">implements</span> <span class="title">InputProcessor</span> {</span>
    <span class="keyword">private</span> Bird myBird;
    <span class="keyword">private</span> GameWorld myWorld;

    <span class="comment">// Запросим ссылку на объект Bird когда InputHandler создан.</span>
    <span class="keyword">public</span> InputHandler(GameWorld myWorld) {
        <span class="comment">// myBird это объект Bird в gameWorld.</span>
        <span class="keyword">this</span>.myWorld = myWorld;
        myBird = myWorld.getBird();
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> touchDown(<span class="keyword">int</span> screenX, <span class="keyword">int</span> screenY, <span class="keyword">int</span> pointer, <span class="keyword">int</span> button) {

        <span class="keyword">if</span> (myWorld.isReady()) {
            myWorld.start();
        }

        myBird.onClick();

        <span class="keyword">if</span> (myWorld.isGameOver()) {
            <span class="comment">// Обнулим все перменные, перейдем в GameState.READ</span>
            myWorld.restart();
        }

        <span class="keyword">return</span> <span class="keyword">true</span>;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> keyDown(<span class="keyword">int</span> keycode) {
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> keyUp(<span class="keyword">int</span> keycode) {
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> keyTyped(<span class="keyword">char</span> character) {
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> touchUp(<span class="keyword">int</span> screenX, <span class="keyword">int</span> screenY, <span class="keyword">int</span> pointer, <span class="keyword">int</span> button) {
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> touchDragged(<span class="keyword">int</span> screenX, <span class="keyword">int</span> screenY, <span class="keyword">int</span> pointer) {
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> mouseMoved(<span class="keyword">int</span> screenX, <span class="keyword">int</span> screenY) {
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> scrolled(<span class="keyword">int</span> amount) {
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

}
</code></pre><br>
</div></div><br>
<br>
<h2>Исправляем GameScreen</h2><br>
Конечно, из-за наших испарвлений в конструкторе <b>InputHandler</b>, нам необходимо обновить наш <b>GameScreen</b>, а точнее инициализацию InputHandler.<br>
Измените эту строчку:<br>
<pre><code class="java">Gdx.input.setInputProcessor(<span class="keyword">new</span> InputHandler(world.getBird()));
</code></pre><br>
<br>
На эту:<br>
<pre><code class="java">Gdx.input.setInputProcessor(<span class="keyword">new</span> InputHandler(world));
</code></pre><br>
<br>
Полный пример класса:<br>
<div class="spoiler"><b class="spoiler_title">GameScreen.java</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.Screens;

<span class="keyword">import</span> com.badlogic.gdx.Gdx;
<span class="keyword">import</span> com.badlogic.gdx.Screen;
<span class="keyword">import</span> com.kilobolt.GameWorld.GameRenderer;
<span class="keyword">import</span> com.kilobolt.GameWorld.GameWorld;
<span class="keyword">import</span> com.kilobolt.ZBHelpers.InputHandler;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameScreen</span> <span class="keyword">implements</span> <span class="title">Screen</span> {</span>

    <span class="keyword">private</span> GameWorld world;
    <span class="keyword">private</span> GameRenderer renderer;
    <span class="keyword">private</span> <span class="keyword">float</span> runTime;

    <span class="keyword">public</span> GameScreen() {

        <span class="keyword">float</span> screenWidth = Gdx.graphics.getWidth();
        <span class="keyword">float</span> screenHeight = Gdx.graphics.getHeight();
        <span class="keyword">float</span> gameWidth = <span class="number">136</span>;
        <span class="keyword">float</span> gameHeight = screenHeight / (screenWidth / gameWidth);

        <span class="keyword">int</span> midPointY = (<span class="keyword">int</span>) (gameHeight / <span class="number">2</span>);

        world = <span class="keyword">new</span> GameWorld(midPointY);
        renderer = <span class="keyword">new</span> GameRenderer(world, (<span class="keyword">int</span>) gameHeight, midPointY);

        Gdx.input.setInputProcessor(<span class="keyword">new</span> InputHandler(world));

    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> render(<span class="keyword">float</span> delta) {
        runTime += delta;
        world.update(delta);
        renderer.render(runTime);
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> resize(<span class="keyword">int</span> width, <span class="keyword">int</span> height) {
        System.out.println(<span class="string">"GameScreen - resizing"</span>);
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> show() {
        System.out.println(<span class="string">"GameScreen - show called"</span>);
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> hide() {
        System.out.println(<span class="string">"GameScreen - hide called"</span>);
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> pause() {
        System.out.println(<span class="string">"GameScreen - pause called"</span>);
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> resume() {
        System.out.println(<span class="string">"GameScreen - resume called"</span>);
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> dispose() {
        <span class="comment">// оставьте пустым</span>
    }

}
</code></pre><br>
</div></div><br>
<br>
<h2>Изменим GameRenderer </h2><br>
Мы закончили с кодом для рестарта. Теперь, когда игра стартует, она стартанет в статусе <b>READY</b>, в котором ничего не будет происходить. Мы должны клацнуть по экрану, чтобы игра началась. Когда наша птичка умирает, мы переведем игру в статус <b>GAMEOVER</b>, в котором мы можем клацнуть по экрану, чтобы игра началась с начала.<br>
<br>
Пока что без кнопок, но это только начало!<br>
<br>
Теперь, чтобы сделать весь процесс более интуитивным, мы внесем некоторые изменения в GameRenderer, отобразим полезную информацию.<br>
<br>
Измените в классе GameRenderer метод <b>render </b>как показано ниже:<br>
<div class="spoiler"><b class="spoiler_title">GameRenderer.java</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.GameWorld;

<span class="keyword">import</span> com.badlogic.gdx.Gdx;
<span class="keyword">import</span> com.badlogic.gdx.graphics.Color;
<span class="keyword">import</span> com.badlogic.gdx.graphics.GL20;
<span class="keyword">import</span> com.badlogic.gdx.graphics.OrthographicCamera;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.Animation;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.SpriteBatch;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.TextureRegion;
<span class="keyword">import</span> com.badlogic.gdx.graphics.glutils.ShapeRenderer;
<span class="keyword">import</span> com.badlogic.gdx.graphics.glutils.ShapeRenderer.ShapeType;
<span class="keyword">import</span> com.badlogic.gdx.math.Rectangle;
<span class="keyword">import</span> com.kilobolt.GameObjects.Bird;
<span class="keyword">import</span> com.kilobolt.GameObjects.Grass;
<span class="keyword">import</span> com.kilobolt.GameObjects.Pipe;
<span class="keyword">import</span> com.kilobolt.GameObjects.ScrollHandler;
<span class="keyword">import</span> com.kilobolt.ZBHelpers.AssetLoader;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameRenderer</span> {</span>

    <span class="keyword">private</span> GameWorld myWorld;
    <span class="keyword">private</span> OrthographicCamera cam;
    <span class="keyword">private</span> ShapeRenderer shapeRenderer;

    <span class="keyword">private</span> SpriteBatch batcher;

    <span class="keyword">private</span> <span class="keyword">int</span> midPointY;
    <span class="keyword">private</span> <span class="keyword">int</span> gameHeight;

    <span class="keyword">private</span> Bird bird;
    <span class="keyword">private</span> ScrollHandler scroller;
    <span class="keyword">private</span> Grass frontGrass, backGrass;
    <span class="keyword">private</span> Pipe pipe1, pipe2, pipe3;

    <span class="keyword">private</span> TextureRegion bg, grass;
    <span class="keyword">private</span> Animation birdAnimation;
    <span class="keyword">private</span> TextureRegion birdMid, birdDown, birdUp;
    <span class="keyword">private</span> TextureRegion skullUp, skullDown, bar;

    <span class="keyword">public</span> GameRenderer(GameWorld world, <span class="keyword">int</span> gameHeight, <span class="keyword">int</span> midPointY) {
        myWorld = world;

        <span class="keyword">this</span>.gameHeight = gameHeight;
        <span class="keyword">this</span>.midPointY = midPointY;

        cam = <span class="keyword">new</span> OrthographicCamera();
        cam.setToOrtho(<span class="keyword">true</span>, <span class="number">136</span>, gameHeight);

        batcher = <span class="keyword">new</span> SpriteBatch();
        batcher.setProjectionMatrix(cam.combined);
        shapeRenderer = <span class="keyword">new</span> ShapeRenderer();
        shapeRenderer.setProjectionMatrix(cam.combined);

        initGameObjects();
        initAssets();
    }

    <span class="keyword">private</span> <span class="keyword">void</span> initGameObjects() {
        bird = myWorld.getBird();
        scroller = myWorld.getScroller();
        frontGrass = scroller.getFrontGrass();
        backGrass = scroller.getBackGrass();
        pipe1 = scroller.getPipe1();
        pipe2 = scroller.getPipe2();
        pipe3 = scroller.getPipe3();
    }

    <span class="keyword">private</span> <span class="keyword">void</span> initAssets() {
        bg = AssetLoader.bg;
        grass = AssetLoader.grass;
        birdAnimation = AssetLoader.birdAnimation;
        birdMid = AssetLoader.bird;
        birdDown = AssetLoader.birdDown;
        birdUp = AssetLoader.birdUp;
        skullUp = AssetLoader.skullUp;
        skullDown = AssetLoader.skullDown;
        bar = AssetLoader.bar;
    }

    <span class="keyword">private</span> <span class="keyword">void</span> drawGrass() {
        batcher.draw(grass, frontGrass.getX(), frontGrass.getY(),
                frontGrass.getWidth(), frontGrass.getHeight());
        batcher.draw(grass, backGrass.getX(), backGrass.getY(),
                backGrass.getWidth(), backGrass.getHeight());
    }

    <span class="keyword">private</span> <span class="keyword">void</span> drawSkulls() {
        batcher.draw(skullUp, pipe1.getX() - <span class="number">1</span>,
                pipe1.getY() + pipe1.getHeight() - <span class="number">14</span>, <span class="number">24</span>, <span class="number">14</span>);
        batcher.draw(skullDown, pipe1.getX() - <span class="number">1</span>,
                pipe1.getY() + pipe1.getHeight() + <span class="number">45</span>, <span class="number">24</span>, <span class="number">14</span>);

        batcher.draw(skullUp, pipe2.getX() - <span class="number">1</span>,
                pipe2.getY() + pipe2.getHeight() - <span class="number">14</span>, <span class="number">24</span>, <span class="number">14</span>);
        batcher.draw(skullDown, pipe2.getX() - <span class="number">1</span>,
                pipe2.getY() + pipe2.getHeight() + <span class="number">45</span>, <span class="number">24</span>, <span class="number">14</span>);

        batcher.draw(skullUp, pipe3.getX() - <span class="number">1</span>,
                pipe3.getY() + pipe3.getHeight() - <span class="number">14</span>, <span class="number">24</span>, <span class="number">14</span>);
        batcher.draw(skullDown, pipe3.getX() - <span class="number">1</span>,
                pipe3.getY() + pipe3.getHeight() + <span class="number">45</span>, <span class="number">24</span>, <span class="number">14</span>);
    }

    <span class="keyword">private</span> <span class="keyword">void</span> drawPipes() {
        batcher.draw(bar, pipe1.getX(), pipe1.getY(), pipe1.getWidth(),
                pipe1.getHeight());
        batcher.draw(bar, pipe1.getX(), pipe1.getY() + pipe1.getHeight() + <span class="number">45</span>,
                pipe1.getWidth(), midPointY + <span class="number">66</span> - (pipe1.getHeight() + <span class="number">45</span>));

        batcher.draw(bar, pipe2.getX(), pipe2.getY(), pipe2.getWidth(),
                pipe2.getHeight());
        batcher.draw(bar, pipe2.getX(), pipe2.getY() + pipe2.getHeight() + <span class="number">45</span>,
                pipe2.getWidth(), midPointY + <span class="number">66</span> - (pipe2.getHeight() + <span class="number">45</span>));

        batcher.draw(bar, pipe3.getX(), pipe3.getY(), pipe3.getWidth(),
                pipe3.getHeight());
        batcher.draw(bar, pipe3.getX(), pipe3.getY() + pipe3.getHeight() + <span class="number">45</span>,
                pipe3.getWidth(), midPointY + <span class="number">66</span> - (pipe3.getHeight() + <span class="number">45</span>));
    }

    <span class="keyword">public</span> <span class="keyword">void</span> render(<span class="keyword">float</span> runTime) {

        Gdx.gl.glClearColor(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);
        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);

        shapeRenderer.begin(ShapeType.Filled);

        shapeRenderer.setColor(<span class="number">55</span> / <span class="number">255.0</span>f, <span class="number">80</span> / <span class="number">255.0</span>f, <span class="number">100</span> / <span class="number">255.0</span>f, <span class="number">1</span>);
        shapeRenderer.rect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">136</span>, midPointY + <span class="number">66</span>);

        shapeRenderer.setColor(<span class="number">111</span> / <span class="number">255.0</span>f, <span class="number">186</span> / <span class="number">255.0</span>f, <span class="number">45</span> / <span class="number">255.0</span>f, <span class="number">1</span>);
        shapeRenderer.rect(<span class="number">0</span>, midPointY + <span class="number">66</span>, <span class="number">136</span>, <span class="number">11</span>);

        shapeRenderer.setColor(<span class="number">147</span> / <span class="number">255.0</span>f, <span class="number">80</span> / <span class="number">255.0</span>f, <span class="number">27</span> / <span class="number">255.0</span>f, <span class="number">1</span>);
        shapeRenderer.rect(<span class="number">0</span>, midPointY + <span class="number">77</span>, <span class="number">136</span>, <span class="number">52</span>);

        shapeRenderer.end();

        batcher.begin();
        batcher.disableBlending();
        batcher.draw(bg, <span class="number">0</span>, midPointY + <span class="number">23</span>, <span class="number">136</span>, <span class="number">43</span>);

        drawGrass();

        drawPipes();
        batcher.enableBlending();

        drawSkulls();

        <span class="keyword">if</span> (bird.shouldntFlap()) {
            batcher.draw(birdMid, bird.getX(), bird.getY(),
                    bird.getWidth() / <span class="number">2.0</span>f, bird.getHeight() / <span class="number">2.0</span>f,
                    bird.getWidth(), bird.getHeight(), <span class="number">1</span>, <span class="number">1</span>, bird.getRotation());

        } <span class="keyword">else</span> {
            batcher.draw(birdAnimation.getKeyFrame(runTime), bird.getX(),
                    bird.getY(), bird.getWidth() / <span class="number">2.0</span>f,
                    bird.getHeight() / <span class="number">2.0</span>f, bird.getWidth(), bird.getHeight(),
                    <span class="number">1</span>, <span class="number">1</span>, bird.getRotation());
        }

        
        <span class="comment">// ВРЕМЕННЫЙ КОД! Изменим позже:</span>
        
        <span class="keyword">if</span> (myWorld.isReady()) {
            <span class="comment">// Отрисуем сначала тень</span>
            AssetLoader.shadow.draw(batcher, <span class="string">"Touch me"</span>, (<span class="number">136</span> / <span class="number">2</span>)
                    - (<span class="number">42</span>), <span class="number">76</span>);
            <span class="comment">// Отрисуем сам текст</span>
            AssetLoader.font.draw(batcher, <span class="string">"Touch me"</span>, (<span class="number">136</span> / <span class="number">2</span>)
                    - (<span class="number">42</span> - <span class="number">1</span>), <span class="number">75</span>);
        } <span class="keyword">else</span> {

            <span class="keyword">if</span> (myWorld.isGameOver()) {
                AssetLoader.shadow.draw(batcher, <span class="string">"Game Over"</span>, <span class="number">25</span>, <span class="number">56</span>);
                AssetLoader.font.draw(batcher, <span class="string">"Game Over"</span>, <span class="number">24</span>, <span class="number">55</span>);
                
                AssetLoader.shadow.draw(batcher, <span class="string">"Try again?"</span>, <span class="number">23</span>, <span class="number">76</span>);
                AssetLoader.font.draw(batcher, <span class="string">"Try again?"</span>, <span class="number">24</span>, <span class="number">75</span>);
                
                
                
            }
            
            String score = myWorld.getScore() + <span class="string">""</span>;

            AssetLoader.shadow.draw(batcher, <span class="string">""</span> + myWorld.getScore(), (<span class="number">136</span> / <span class="number">2</span>)
                    - (<span class="number">3</span> * score.length()), <span class="number">12</span>);
            AssetLoader.font.draw(batcher, <span class="string">""</span> + myWorld.getScore(), (<span class="number">136</span> / <span class="number">2</span>)
                    - (<span class="number">3</span> * score.length() - <span class="number">1</span>), <span class="number">11</span>);
        }

        batcher.end();

    }
}
</code></pre><br>
</div></div><br>
<br>
<h2>Законченный Игровой процесс!</h2><br>
<img src="./tutorial_files/0e7d62b40e434746ba524aca2a44cf8a.png">&nbsp; &nbsp;<img src="./tutorial_files/d4184716b59347988b2a201eceef2cf7.png">&nbsp; &nbsp;<img src="./tutorial_files/3340d2676811487daafd1c3823984f55.png"><br>
<br>
Вот и все, наш геймплей закончен. Давайте приведем вещи в порядок и реализуем ведение счета!<br>
<br>
<h2> Реализация Лучшего счета</h2><br>
Легкий путь хранения маленького количества данных для игры, написанной с помощью LibGDX это использовать класс <b>Preferences</b>. Этот класс связывает пары ключ-значение. Это значит, что вы можете созранить какой-то ключ и соответствующее ему значение, а также по ключу вы можете получать значения!<br>
<br>
Давайте рассмотрим пример:<br>
<pre><code class="java"><span class="comment">// Указываем имя файла для Preferences</span>
Preferences prefs = Gdx.app.getPreferences(<span class="string">"PreferenceName"</span>); <span class="comment">// Сохраним значение 10 с ключем "highScore"</span>
prefs.putInteger(<span class="string">"highScore"</span>, <span class="number">10</span>); 
prefs.flush(); <span class="comment">// Эта строчка сохраняет содержимое Preferences в файл</span>
</code></pre><br>
<br>
Неделю спустя, вы попробуете выполнить:<br>
<pre><code class="java">System.out.println(prefs.getInteger(<span class="string">"highScore"</span>)); 
</code></pre><br>
<br>
Результатом будет вывод в консоли значения 10!<br>
<br>
Итак, три важных метода которые вы должны знать:<br>
<ol>
<li>put…</li>
<li>get…</li>
<li>и flush (для сохранения)</li>
</ol><br>
<br>
Вы можете сохранять различные типы данных следующим образом:<br>
<pre><code class="java">putBoolean(<span class="string">"soundEnabled"</span>, <span class="keyword">true</span>); <span class="comment">// getBoolean("soundEnabled") получаем boolean.</span>
putString(<span class="string">"playerName"</span>, <span class="string">"James"</span>);
</code></pre><br>
Давайте применим эти знания для сохранения Лучшего счета.<br>
<br>
<h2>Откройте класс AssetLoader</h2><br>
Создайте статическую перменную в классе:<br>
<pre><code class="java"><span class="keyword">public</span> <span class="keyword">static</span> Preferences prefs;
</code></pre><br>
Внутри метода <b>load </b>добавьте следующие строчки кода:<br>
<pre><code class="java"><span class="comment">// Создайте (или получите ранее созданный) файл preferences</span>
prefs = Gdx.app.getPreferences(<span class="string">"ZombieBird"</span>);

<span class="comment">// Создадим переменую для хранения лучшего счета со значением по умолчанию 0</span>
<span class="keyword">if</span> (!prefs.contains(<span class="string">"highScore"</span>)) {
    prefs.putInteger(<span class="string">"highScore"</span>, <span class="number">0</span>);
}
</code></pre><br>
Теперь мы можем достучаться до переменной <b>prefs </b>из любого места в нашей игре! Давайте создадим вспомогательные методы, которые будут выоплнять работу с preferences внутри <b>AssetsLoader</b>.<br>
<br>
Добавьте следующие методы:<br>
<pre><code class="java"><span class="comment">// Ролучает на вход значение для hishScore и сохраняет в файл</span>
<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> setHighScore(<span class="keyword">int</span> val) {
    prefs.putInteger(<span class="string">"highScore"</span>, val);
    prefs.flush();
}

<span class="comment">// Возвращает текущее значение hishScore</span>
<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> getHighScore() {
    <span class="keyword">return</span> prefs.getInteger(<span class="string">"highScore"</span>);
}
</code></pre><br>
Полный пример класса:<br>
<div class="spoiler"><b class="spoiler_title">AssetLoader.java</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.ZBHelpers;

<span class="keyword">import</span> com.badlogic.gdx.Gdx;
<span class="keyword">import</span> com.badlogic.gdx.Preferences;
<span class="keyword">import</span> com.badlogic.gdx.audio.Sound;
<span class="keyword">import</span> com.badlogic.gdx.graphics.Texture;
<span class="keyword">import</span> com.badlogic.gdx.graphics.Texture.TextureFilter;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.Animation;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.BitmapFont;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.TextureRegion;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AssetLoader</span> {</span>

    <span class="keyword">public</span> <span class="keyword">static</span> Texture texture;
    <span class="keyword">public</span> <span class="keyword">static</span> TextureRegion bg, grass;

    <span class="keyword">public</span> <span class="keyword">static</span> Animation birdAnimation;
    <span class="keyword">public</span> <span class="keyword">static</span> TextureRegion bird, birdDown, birdUp;

    <span class="keyword">public</span> <span class="keyword">static</span> TextureRegion skullUp, skullDown, bar;

    <span class="keyword">public</span> <span class="keyword">static</span> Sound dead, flap, coin;

    <span class="keyword">public</span> <span class="keyword">static</span> BitmapFont font, shadow;

    <span class="keyword">private</span> <span class="keyword">static</span> Preferences prefs;

    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> load() {

        texture = <span class="keyword">new</span> Texture(Gdx.files.internal(<span class="string">"data/texture.png"</span>));
        texture.setFilter(TextureFilter.Nearest, TextureFilter.Nearest);

        bg = <span class="keyword">new</span> TextureRegion(texture, <span class="number">0</span>, <span class="number">0</span>, <span class="number">136</span>, <span class="number">43</span>);
        bg.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        grass = <span class="keyword">new</span> TextureRegion(texture, <span class="number">0</span>, <span class="number">43</span>, <span class="number">143</span>, <span class="number">11</span>);
        grass.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        birdDown = <span class="keyword">new</span> TextureRegion(texture, <span class="number">136</span>, <span class="number">0</span>, <span class="number">17</span>, <span class="number">12</span>);
        birdDown.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        bird = <span class="keyword">new</span> TextureRegion(texture, <span class="number">153</span>, <span class="number">0</span>, <span class="number">17</span>, <span class="number">12</span>);
        bird.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        birdUp = <span class="keyword">new</span> TextureRegion(texture, <span class="number">170</span>, <span class="number">0</span>, <span class="number">17</span>, <span class="number">12</span>);
        birdUp.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        TextureRegion[] birds = { birdDown, bird, birdUp };
        birdAnimation = <span class="keyword">new</span> Animation(<span class="number">0.06</span>f, birds);
        birdAnimation.setPlayMode(Animation.LOOP_PINGPONG);

        skullUp = <span class="keyword">new</span> TextureRegion(texture, <span class="number">192</span>, <span class="number">0</span>, <span class="number">24</span>, <span class="number">14</span>);
        skullDown = <span class="keyword">new</span> TextureRegion(skullUp);
        skullDown.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        bar = <span class="keyword">new</span> TextureRegion(texture, <span class="number">136</span>, <span class="number">16</span>, <span class="number">22</span>, <span class="number">3</span>);
        bar.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        dead = Gdx.audio.newSound(Gdx.files.internal(<span class="string">"data/dead.wav"</span>));
        flap = Gdx.audio.newSound(Gdx.files.internal(<span class="string">"data/flap.wav"</span>));
        coin = Gdx.audio.newSound(Gdx.files.internal(<span class="string">"data/coin.wav"</span>));

        font = <span class="keyword">new</span> BitmapFont(Gdx.files.internal(<span class="string">"data/text.fnt"</span>));
        font.setScale(<span class="number">.25</span>f, -<span class="number">.25</span>f);
        shadow = <span class="keyword">new</span> BitmapFont(Gdx.files.internal(<span class="string">"data/shadow.fnt"</span>));
        shadow.setScale(<span class="number">.25</span>f, -<span class="number">.25</span>f);

        <span class="comment">// Получим (или создадим) preferences</span>
        prefs = Gdx.app.getPreferences(<span class="string">"ZombieBird"</span>);

        <span class="keyword">if</span> (!prefs.contains(<span class="string">"highScore"</span>)) {
            prefs.putInteger(<span class="string">"highScore"</span>, <span class="number">0</span>);
        }
    }

    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> setHighScore(<span class="keyword">int</span> val) {
        prefs.putInteger(<span class="string">"highScore"</span>, val);
        prefs.flush();
    }

    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> getHighScore() {
        <span class="keyword">return</span> prefs.getInteger(<span class="string">"highScore"</span>);
    }

    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> dispose() {
        texture.dispose();

        dead.dispose();
        flap.dispose();
        coin.dispose();

        font.dispose();
        shadow.dispose();
    }

}
</code></pre><br>
</div></div> <br>
Давайте вернемся в GameWorld и добавим логику сохранения/обновления Лучшего счета!<br>
<br>
Начнем с добавления четвертой enum константы <b>HIGHSCORE</b>:<br>
<pre><code class="java"><span class="keyword">public</span> <span class="keyword">enum</span> GameState {
    READY, RUNNING, GAMEOVER, HIGHSCORE
}
</code></pre><br>
Расширим логику обработки события смерти нашей птички (метод update, там, где мы проверяем колизию между птичкой и землей). Мы просто добавим проверку если наш новый счет больше чем сохраненный ранее Лучший счет, и если да, то обновим Лучший счет новым значением:<br>
<pre><code class="java">        <span class="keyword">if</span> (Intersector.overlaps(bird.getBoundingCircle(), ground)) {
            scroller.stop();
            bird.die();
            bird.decelerate();
            currentState = GameState.GAMEOVER;
            
            <span class="keyword">if</span> (score &gt; AssetLoader.getHighScore()) {
                AssetLoader.setHighScore(score);
                currentState = GameState.HIGHSCORE;
            }
        }
</code></pre><br>
Добавьте еще один метод в котором мы проверим находится ли игра в состоянии <b>HIGHSCORE</b>:<br>
<pre><code class="java"><span class="keyword">public</span> <span class="keyword">boolean</span> isHighScore() {
    <span class="keyword">return</span> currentState == GameState.HIGHSCORE;
}
</code></pre><br>
Вернемся к нашему GameRenderer и добавим логику для состояния HIGHSCORE в <b>gameState</b>, а также отображение Лучшего счета по окончанию игры:<br>
<br>
Обновленный класс UpdateRenderer:<br>
<b>Внимание</b>: это временный код, чтобы наглядно продемонстрировать логику:<br>
<div class="spoiler"><b class="spoiler_title">GameRenderer.java</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.GameWorld;

<span class="keyword">import</span> com.badlogic.gdx.Gdx;
<span class="keyword">import</span> com.badlogic.gdx.graphics.Color;
<span class="keyword">import</span> com.badlogic.gdx.graphics.GL20;
<span class="keyword">import</span> com.badlogic.gdx.graphics.OrthographicCamera;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.Animation;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.SpriteBatch;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.TextureRegion;
<span class="keyword">import</span> com.badlogic.gdx.graphics.glutils.ShapeRenderer;
<span class="keyword">import</span> com.badlogic.gdx.graphics.glutils.ShapeRenderer.ShapeType;
<span class="keyword">import</span> com.badlogic.gdx.math.Rectangle;
<span class="keyword">import</span> com.kilobolt.GameObjects.Bird;
<span class="keyword">import</span> com.kilobolt.GameObjects.Grass;
<span class="keyword">import</span> com.kilobolt.GameObjects.Pipe;
<span class="keyword">import</span> com.kilobolt.GameObjects.ScrollHandler;
<span class="keyword">import</span> com.kilobolt.ZBHelpers.AssetLoader;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameRenderer</span> {</span>

    <span class="keyword">private</span> GameWorld myWorld;
    <span class="keyword">private</span> OrthographicCamera cam;
    <span class="keyword">private</span> ShapeRenderer shapeRenderer;

    <span class="keyword">private</span> SpriteBatch batcher;

    <span class="keyword">private</span> <span class="keyword">int</span> midPointY;
    <span class="keyword">private</span> <span class="keyword">int</span> gameHeight;

    <span class="keyword">private</span> Bird bird;
    <span class="keyword">private</span> ScrollHandler scroller;
    <span class="keyword">private</span> Grass frontGrass, backGrass;
    <span class="keyword">private</span> Pipe pipe1, pipe2, pipe3;

    <span class="keyword">private</span> TextureRegion bg, grass;
    <span class="keyword">private</span> Animation birdAnimation;
    <span class="keyword">private</span> TextureRegion birdMid, birdDown, birdUp;
    <span class="keyword">private</span> TextureRegion skullUp, skullDown, bar;

    <span class="keyword">public</span> GameRenderer(GameWorld world, <span class="keyword">int</span> gameHeight, <span class="keyword">int</span> midPointY) {
        myWorld = world;

        <span class="keyword">this</span>.gameHeight = gameHeight;
        <span class="keyword">this</span>.midPointY = midPointY;

        cam = <span class="keyword">new</span> OrthographicCamera();
        cam.setToOrtho(<span class="keyword">true</span>, <span class="number">136</span>, gameHeight);

        batcher = <span class="keyword">new</span> SpriteBatch();
        batcher.setProjectionMatrix(cam.combined);
        shapeRenderer = <span class="keyword">new</span> ShapeRenderer();
        shapeRenderer.setProjectionMatrix(cam.combined);

        initGameObjects();
        initAssets();
    }

    <span class="keyword">private</span> <span class="keyword">void</span> initGameObjects() {
        bird = myWorld.getBird();
        scroller = myWorld.getScroller();
        frontGrass = scroller.getFrontGrass();
        backGrass = scroller.getBackGrass();
        pipe1 = scroller.getPipe1();
        pipe2 = scroller.getPipe2();
        pipe3 = scroller.getPipe3();
    }

    <span class="keyword">private</span> <span class="keyword">void</span> initAssets() {
        bg = AssetLoader.bg;
        grass = AssetLoader.grass;
        birdAnimation = AssetLoader.birdAnimation;
        birdMid = AssetLoader.bird;
        birdDown = AssetLoader.birdDown;
        birdUp = AssetLoader.birdUp;
        skullUp = AssetLoader.skullUp;
        skullDown = AssetLoader.skullDown;
        bar = AssetLoader.bar;
    }

    <span class="keyword">private</span> <span class="keyword">void</span> drawGrass() {
        batcher.draw(grass, frontGrass.getX(), frontGrass.getY(),
                frontGrass.getWidth(), frontGrass.getHeight());
        batcher.draw(grass, backGrass.getX(), backGrass.getY(),
                backGrass.getWidth(), backGrass.getHeight());
    }

    <span class="keyword">private</span> <span class="keyword">void</span> drawSkulls() {
        batcher.draw(skullUp, pipe1.getX() - <span class="number">1</span>,
                pipe1.getY() + pipe1.getHeight() - <span class="number">14</span>, <span class="number">24</span>, <span class="number">14</span>);
        batcher.draw(skullDown, pipe1.getX() - <span class="number">1</span>,
                pipe1.getY() + pipe1.getHeight() + <span class="number">45</span>, <span class="number">24</span>, <span class="number">14</span>);

        batcher.draw(skullUp, pipe2.getX() - <span class="number">1</span>,
                pipe2.getY() + pipe2.getHeight() - <span class="number">14</span>, <span class="number">24</span>, <span class="number">14</span>);
        batcher.draw(skullDown, pipe2.getX() - <span class="number">1</span>,
                pipe2.getY() + pipe2.getHeight() + <span class="number">45</span>, <span class="number">24</span>, <span class="number">14</span>);

        batcher.draw(skullUp, pipe3.getX() - <span class="number">1</span>,
                pipe3.getY() + pipe3.getHeight() - <span class="number">14</span>, <span class="number">24</span>, <span class="number">14</span>);
        batcher.draw(skullDown, pipe3.getX() - <span class="number">1</span>,
                pipe3.getY() + pipe3.getHeight() + <span class="number">45</span>, <span class="number">24</span>, <span class="number">14</span>);
    }

    <span class="keyword">private</span> <span class="keyword">void</span> drawPipes() {
        batcher.draw(bar, pipe1.getX(), pipe1.getY(), pipe1.getWidth(),
                pipe1.getHeight());
        batcher.draw(bar, pipe1.getX(), pipe1.getY() + pipe1.getHeight() + <span class="number">45</span>,
                pipe1.getWidth(), midPointY + <span class="number">66</span> - (pipe1.getHeight() + <span class="number">45</span>));

        batcher.draw(bar, pipe2.getX(), pipe2.getY(), pipe2.getWidth(),
                pipe2.getHeight());
        batcher.draw(bar, pipe2.getX(), pipe2.getY() + pipe2.getHeight() + <span class="number">45</span>,
                pipe2.getWidth(), midPointY + <span class="number">66</span> - (pipe2.getHeight() + <span class="number">45</span>));

        batcher.draw(bar, pipe3.getX(), pipe3.getY(), pipe3.getWidth(),
                pipe3.getHeight());
        batcher.draw(bar, pipe3.getX(), pipe3.getY() + pipe3.getHeight() + <span class="number">45</span>,
                pipe3.getWidth(), midPointY + <span class="number">66</span> - (pipe3.getHeight() + <span class="number">45</span>));
    }

    <span class="keyword">public</span> <span class="keyword">void</span> render(<span class="keyword">float</span> runTime) {

        Gdx.gl.glClearColor(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);
        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);

        shapeRenderer.begin(ShapeType.Filled);

        shapeRenderer.setColor(<span class="number">55</span> / <span class="number">255.0</span>f, <span class="number">80</span> / <span class="number">255.0</span>f, <span class="number">100</span> / <span class="number">255.0</span>f, <span class="number">1</span>);
        shapeRenderer.rect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">136</span>, midPointY + <span class="number">66</span>);

        shapeRenderer.setColor(<span class="number">111</span> / <span class="number">255.0</span>f, <span class="number">186</span> / <span class="number">255.0</span>f, <span class="number">45</span> / <span class="number">255.0</span>f, <span class="number">1</span>);
        shapeRenderer.rect(<span class="number">0</span>, midPointY + <span class="number">66</span>, <span class="number">136</span>, <span class="number">11</span>);

        shapeRenderer.setColor(<span class="number">147</span> / <span class="number">255.0</span>f, <span class="number">80</span> / <span class="number">255.0</span>f, <span class="number">27</span> / <span class="number">255.0</span>f, <span class="number">1</span>);
        shapeRenderer.rect(<span class="number">0</span>, midPointY + <span class="number">77</span>, <span class="number">136</span>, <span class="number">52</span>);

        shapeRenderer.end();

        batcher.begin();
        batcher.disableBlending();
        batcher.draw(bg, <span class="number">0</span>, midPointY + <span class="number">23</span>, <span class="number">136</span>, <span class="number">43</span>);

        drawGrass();

        drawPipes();
        batcher.enableBlending();

        drawSkulls();

        <span class="keyword">if</span> (bird.shouldntFlap()) {
            batcher.draw(birdMid, bird.getX(), bird.getY(),
                    bird.getWidth() / <span class="number">2.0</span>f, bird.getHeight() / <span class="number">2.0</span>f,
                    bird.getWidth(), bird.getHeight(), <span class="number">1</span>, <span class="number">1</span>, bird.getRotation());

        } <span class="keyword">else</span> {
            batcher.draw(birdAnimation.getKeyFrame(runTime), bird.getX(),
                    bird.getY(), bird.getWidth() / <span class="number">2.0</span>f,
                    bird.getHeight() / <span class="number">2.0</span>f, bird.getWidth(), bird.getHeight(),
                    <span class="number">1</span>, <span class="number">1</span>, bird.getRotation());
        }

        <span class="comment">// ВРЕМЕННЫЙ КОД! Исправим чуть позже!</span>

        <span class="keyword">if</span> (myWorld.isReady()) {
            <span class="comment">// Отрисуем сначала тень</span>
            AssetLoader.shadow.draw(batcher, <span class="string">"Touch me"</span>, (<span class="number">136</span> / <span class="number">2</span>) - (<span class="number">42</span>), <span class="number">76</span>);
            <span class="comment">// А теперь сам текст</span>
            AssetLoader.font
                    .draw(batcher, <span class="string">"Touch me"</span>, (<span class="number">136</span> / <span class="number">2</span>) - (<span class="number">42</span> - <span class="number">1</span>), <span class="number">75</span>);
        } <span class="keyword">else</span> {

            <span class="keyword">if</span> (myWorld.isGameOver() || myWorld.isHighScore()) {

                <span class="keyword">if</span> (myWorld.isGameOver()) {
                    AssetLoader.shadow.draw(batcher, <span class="string">"Game Over"</span>, <span class="number">25</span>, <span class="number">56</span>);
                    AssetLoader.font.draw(batcher, <span class="string">"Game Over"</span>, <span class="number">24</span>, <span class="number">55</span>);

                    AssetLoader.shadow.draw(batcher, <span class="string">"High Score:"</span>, <span class="number">23</span>, <span class="number">106</span>);
                    AssetLoader.font.draw(batcher, <span class="string">"High Score:"</span>, <span class="number">22</span>, <span class="number">105</span>);

                    String highScore = AssetLoader.getHighScore() + <span class="string">""</span>;

                    AssetLoader.shadow.draw(batcher, highScore, (<span class="number">136</span> / <span class="number">2</span>)
                            - (<span class="number">3</span> * highScore.length()), <span class="number">128</span>);
                    AssetLoader.font.draw(batcher, highScore, (<span class="number">136</span> / <span class="number">2</span>)
                            - (<span class="number">3</span> * highScore.length() - <span class="number">1</span>), <span class="number">127</span>);
                } <span class="keyword">else</span> {
                    AssetLoader.shadow.draw(batcher, <span class="string">"High Score!"</span>, <span class="number">19</span>, <span class="number">56</span>);
                    AssetLoader.font.draw(batcher, <span class="string">"High Score!"</span>, <span class="number">18</span>, <span class="number">55</span>);
                }

                AssetLoader.shadow.draw(batcher, <span class="string">"Try again?"</span>, <span class="number">23</span>, <span class="number">76</span>);
                AssetLoader.font.draw(batcher, <span class="string">"Try again?"</span>, <span class="number">24</span>, <span class="number">75</span>);

                <span class="comment">// Конвертируем integer в String</span>
                String score = myWorld.getScore() + <span class="string">""</span>;

                AssetLoader.shadow.draw(batcher, score,
                        (<span class="number">136</span> / <span class="number">2</span>) - (<span class="number">3</span> * score.length()), <span class="number">12</span>);
                AssetLoader.font.draw(batcher, score,
                        (<span class="number">136</span> / <span class="number">2</span>) - (<span class="number">3</span> * score.length() - <span class="number">1</span>), <span class="number">11</span>);

            }

            String score = myWorld.getScore() + <span class="string">""</span>;

            AssetLoader.shadow.draw(batcher, <span class="string">""</span> + myWorld.getScore(), (<span class="number">136</span> / <span class="number">2</span>)
                    - (<span class="number">3</span> * score.length()), <span class="number">12</span>);
            AssetLoader.font.draw(batcher, <span class="string">""</span> + myWorld.getScore(), (<span class="number">136</span> / <span class="number">2</span>)
                    - (<span class="number">3</span> * score.length() - <span class="number">1</span>), <span class="number">11</span>);

        }

        batcher.end();

    }
}
</code></pre><br>
</div></div><br>
<br>
<div style="text-align:center;"><img src="./tutorial_files/98646cac1aa3467087bef9dd39868b3c.png"></div><br>
<br>
Давайте изменим метод <b>update </b>в классе GameWorld как показано ниже:<br>
<pre><code class="java">    <span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {

        <span class="keyword">switch</span> (currentState) {
        <span class="keyword">case</span> READY:
            updateReady(delta);
            <span class="keyword">break</span>;

        <span class="keyword">case</span> RUNNING:
            updateRunning(delta);
            <span class="keyword">break</span>;
        <span class="keyword">default</span>:
            <span class="keyword">break</span>;
        }

    }
</code></pre><br>
Самая последня вещь которую нам надо сделать, это изменить одну строчку в классе <b>InputHandler</b>:<br>
<pre><code class="java"><span class="keyword">if</span> (myWorld.isGameOver() || myWorld.isHighScore()) {
    <span class="comment">// Reset all variables, go to GameState.READ</span>
    myWorld.restart();
}
</code></pre><br>
На этом все! Мы продолжим нашу стройку века в следующем дне. Спасибо за чтение.<br>
<br>
<h2>Исходный код за день</h2><br>
Если вы вне настроения писать код самостоятельно, скачайте его отсюда:<br>
<img src="./tutorial_files/e273ed1a4ed342abb148c53ad824d8f3.png" hspace="4" vspace="4" align="left"><a href="http://www.kilobolt.com/uploads/1/2/5/7/12571940/day_10.zip"> day_10.zip</a><br>
<br>
<br>
<br>
<br>
<img src="./tutorial_files/4f355491bc81468cbcb05427325b49ca.png"> <a href="http://habrahabr.ru/post/243471/#ContentList">К Оглавлению</a><br>
<br>
<br>
<br>
<br>
<br>
<br>
<a name="Day11"></a><h1><img src="./tutorial_files/4e55852eb2a04db2a1200c031304129c.png"> День 11 — Добавляем поддержку iOS/Android + SplashScreen, Меню и Tweening</h1><hr><br>
Добро пожаловать в День 11! Теперь, когда у нас готов Игровой процесс, мы займемся <b>UI</b>, создадим дополнительные экраны и добавим переходы используя <b>Tween Engine</b> от <b>Aurelien Ribon</b>. В дне 2 я попросил вас скачать с помощью установщика libGDX пакет <b>Universal Tween Engine</b>. Я забыл выбрать эту опцию в своем проекте, так что я использую опять установщик libGDX, чтобы обновить мой проект.<br>
<div style="text-align:center;"><img src="./tutorial_files/a501fd0f54e24647935e12f704a085f0.png"></div><br>
<br>
<h2>Добавление Tween Engine Library в наш libGDX проект</h2><br>
Чтобы убедиться, что у вас правильно настроена библиотека <b>Tween Engine</b>, надо проверить <b>core</b> проект в Eclipse. У вас должны быть эти два файла, которые подсвечены на картинке ниже:<br>
<div style="text-align:center;"><img src="./tutorial_files/ecd4d7b53e9040058b876d2bc7a956d0.png"></div><br>
<br>
Если ваш проект включает в себя эти файлы – значит вы счастливый человек и у вас все хорошо! Если же нет, то нам надо будет добавить их используя установщик libGDX. Чтобы это сделать, проделайте следующие шаги (или просто скачайте файл <b>day_11_starting.zip</b> в конце этой секции):<br>
<ol>
<li>Найдите, где физически находится ваш <b>core</b> проект. Это можно выяснить нажав правую кнопку мышки (Control + клик на Mac) на проекте и выбрав <b>Properties</b>. Запомните значение в <b>Location</b>.<br>
<div style="text-align:center;"><img src="./tutorial_files/468ede39aae14b61aeca40116776af91.png"></div><br>
<br>
</li>
<li>Откройте <b>gdx-setup-ui.jar</b>, как мы проделали это в Дне 2. Если надо, то скачайте этот файл <a href="http://libgdx.badlogicgames.com/nightlies/dist/gdx-setup-ui.jar">отсюда</a></li>
<li>Укажите путь к <b>core</b> проекту как показано на картинке ниже</li>
<li>Убедитесь, что выбрана опция «Universal Tween Engine».<br>
<div style="text-align:center;"><img src="./tutorial_files/5a5be6a4e0e84abb84fc9052e69c4aca.png"></div><br>
<br>
</li>
<li>Справа нажмите «Open the update screen» </li>
<li>Вы должны увидеть экран как на картинке ниже. Нажмите Launch!<br>
<div style="text-align:center;"><img src="./tutorial_files/6d14b7772be64bc687c7aae83ea76e0c.png"></div><br>
</li>
</ol><br>
<br>
Вот и все. Теперь наш Eclipse проект может использовать <b>tween-engine-api</b>.<br>
<br>
<h2>Обновленный исходный код</h2><br>
<img src="./tutorial_files/e273ed1a4ed342abb148c53ad824d8f3.png" hspace="4" vspace="4" align="left"><a href="http://www.kilobolt.com/uploads/1/2/5/7/12571940/day_11_starting.zip"> day_11_starting.zip</a><br>
<br>
<br>
<h2>Настройка Android проекта</h2><br>
Сейчас мы настроим наш <b>Android</b> проект, так что вы сможете тестировать игру на Android устройствах. Откройте проект <b>ZombieGame-android</b>.<br>
<ol>
<li>Измените иконку.<br>
Чтобы поменять иконку, откройте папку <b>res -&gt; drawable-hdpi</b>. Замените <b>ic_launcher.png</b> вашей картинкой, к примеру, такой:<br>
<img src="./tutorial_files/daf5c5cb31c146edab32c17ae2d570c8.png"> Скачать <a href="http://www.kilobolt.com/uploads/1/2/5/7/12571940/ic_launcher.png"> ic_launcher.png</a><br>
<br>
</li>
<li>Измените ориентацию экрана.<br>
По умолчанию в libGDX ориентация экрана – <b>landscape</b>. А нам нужен <b>portrait</b>. Откройте файл <b>AndroidManifest.xml</b> и измените эту строчку:<br>
<pre><code class="java">android:screenOrientation=<span class="string">"landscape"</span></code></pre><br>
На эту<br>
<pre><code class="java">android:screenOrientation=<span class="string">"portrait"</span></code></pre><br>
<div style="text-align:center;"><img src="./tutorial_files/251d52b0c76d4dce96ba0a3be192169a.png"></div><br>
</li>
<li>И на последок, измените имя приложения.<br>
Откройте файл <b>values -&gt; string.xml</b> и измените имя как показано ниже:<br>
<div style="text-align:center;"><img src="./tutorial_files/ac5c9d55dd394a3ca53e283b491b9c2a.png"></div><br>
</li>
</ol><br>
<br>
Ну вот, теперь наш <b>Android</b> проект готов! Вы можете поиграться с проектом на вашем мобильном устройстве или в виртуальной среде, запустив проект как <b>Android application</b>.<br>
<br>
<h2>Настройка iOS проекта</h2><br>
Чтобы протесировать ваш проект на <b>iOS</b> вам необходимо иметь <b>Intel-based Mac</b>. Если у вас в этом плане все хорошо, тогда продолжим с настройкой <b>RoboVM</b> на вашем компьютере. Перейдите по ссылке <a href="http://www.robovm.org/docs#start">http://www.robovm.org/docs#start</a> и скачайте JDK 7, XCode, а так же RoboVM для Eclipse. <br>
<br>
Чтобы добавить RoboVM в Eclipse, откройте Help -&gt; Install New Software и введите следующий адрес:<br>
<a href="http://download.robovm.org/eclipse/">download.robovm.org/eclipse/</a><br>
<br>
Как скачивание и установка завершатся, перезагрузите ваш Eclipse.<br>
<br>
Перед тем как продолжить, откройте XCode.<br>
<br>
Далее, убедитесь, что Eclipse использует JDK 7. Откройте настройки Eclipse и проверьте что у вас выбран путь к JDK 7:<br>
<div style="text-align:center;"><img src="./tutorial_files/2375277f8f3c4544bf4b54d3dcdf13cd.png"></div><br>
<br>
<div style="text-align:center;"><img src="./tutorial_files/06301404467d49e1a193b8fbe488af72.png"></div><br>
<br>
Перезагрузите Eclipse еще раз.<br>
<br>
Вы можете изменять ваши иконки в папке <b>data</b>. В ней хранятся иконки для различных размеров экрана, в соответствии с <b>Apple Human Interface</b>. Подробнее можно прочитать <a href="https://developer.apple.com/library/ios/documentation/userexperience/conceptual/mobilehig/">тут</a>.<br>
<br>
Когда вы запускаете мобильное приложение на iOS, показывается изображение по умолчанию для приложения, что создают илюзию быстрой загрузки приложения. Вы можете так же добавить изображение по умолчанию в папку <b>data</b>.<br>
<div style="text-align:center;"><img src="./tutorial_files/be6538871da34218b456fb33cc17f139.png"></div><br>
<br>
Далее изменим ориентацию экрана. Откройте файл <b>Info.plist.xml</b>. Найдите следующие ключи:<br>
<pre><code class="xml">  <span class="tag">&lt;<span class="title">key</span>&gt;</span>UISupportedInterfaceOrientations<span class="tag">&lt;/<span class="title">key</span>&gt;</span>
    <span class="tag">&lt;<span class="title">array</span>&gt;</span>
        <span class="tag">&lt;<span class="title">string</span>&gt;</span>UIInterfaceOrientationLandscapeLeft<span class="tag">&lt;/<span class="title">string</span>&gt;</span>
        <span class="tag">&lt;<span class="title">string</span>&gt;</span>UIInterfaceOrientationLandscapeRight<span class="tag">&lt;/<span class="title">string</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">array</span>&gt;</span>

    <span class="tag">&lt;<span class="title">key</span>&gt;</span>UISupportedInterfaceOrientations~ipad<span class="tag">&lt;/<span class="title">key</span>&gt;</span>
    <span class="tag">&lt;<span class="title">array</span>&gt;</span>
        <span class="tag">&lt;<span class="title">string</span>&gt;</span>UIInterfaceOrientationLandscapeLeft<span class="tag">&lt;/<span class="title">string</span>&gt;</span>
        <span class="tag">&lt;<span class="title">string</span>&gt;</span>UIInterfaceOrientationLandscapeRight<span class="tag">&lt;/<span class="title">string</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">array</span>&gt;</span>
</code></pre><br>
И измените их на это:<br>
<pre><code class="xml"> <span class="tag">&lt;<span class="title">key</span>&gt;</span>UISupportedInterfaceOrientations<span class="tag">&lt;/<span class="title">key</span>&gt;</span>
    <span class="tag">&lt;<span class="title">array</span>&gt;</span>
        <span class="tag">&lt;<span class="title">string</span>&gt;</span>UIInterfaceOrientationPortrait<span class="tag">&lt;/<span class="title">string</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">array</span>&gt;</span>

    <span class="tag">&lt;<span class="title">key</span>&gt;</span>UISupportedInterfaceOrientations~ipad<span class="tag">&lt;/<span class="title">key</span>&gt;</span>
    <span class="tag">&lt;<span class="title">array</span>&gt;</span>
        <span class="tag">&lt;<span class="title">string</span>&gt;</span>UIInterfaceOrientationPortrait<span class="tag">&lt;/<span class="title">string</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">array</span>&gt;</span>
</code></pre><br>
Осталось только поменять имя приложения. Откройте файл<b> robovm.properties</b> и внесите следующие изменения:<br>
<pre><code class="avrasm"><span class="preprocessor">#Fri May 31 13:01:40 CEST 2013</span>
app<span class="preprocessor">.version</span>=<span class="number">1.0</span>
app<span class="preprocessor">.id</span>=<span class="keyword">com</span><span class="preprocessor">.kilobolt</span><span class="preprocessor">.ZombieBird</span>
app<span class="preprocessor">.main</span><span class="preprocessor">.kilobolt</span><span class="preprocessor">.ZombieBird</span><span class="preprocessor">.RobovmLauncher</span>
app<span class="preprocessor">.executable</span>=ZBGame
app<span class="preprocessor">.build</span>=<span class="number">1</span>
app<span class="preprocessor">.name</span>=Zombie Bird
</code></pre><br>
Теперь вы можете запустить ваше приложение как <b>iPhone Simulator Application</b>. Этот процесс займет много времени, наберитесь терпения.<br>
<div style="text-align:center;"><img src="./tutorial_files/1f76e1be07114762829a3c05af3c05c1.png"></div><br>
<br>
Как только вы запустили ваше приложение, оно должно загрузитья в вашем iOS симуляторе как показано ниже! Если вы видите libGDX картинку, это картинка по умолчанию, так что все в порядке.<br>
<img src="./tutorial_files/00e575dc3098439f8c20f4db412f4d9e.png" align="left"> &nbsp; &nbsp; <img src="./tutorial_files/904142f5a5ad4c6f8ee19126ff821ec3.png" align="left"><br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
Скачайте обновленные файлы картинок:<br>
<img src="./tutorial_files/daf5c5cb31c146edab32c17ae2d570c8.png"><a href="http://www.kilobolt.com/uploads/1/2/5/7/12571940/logo.png">logo.png</a><br>
<img src="./tutorial_files/daf5c5cb31c146edab32c17ae2d570c8.png"><a href="http://www.kilobolt.com/uploads/1/2/5/7/12571940/texture.png">texture.png</a><br>
<br>
<br>
<br>
<h2>Объект SimpleButton</h2><br>
Создайте новый пакет с именем <b>com.kilobolt.ui</b>. Внутри создайте новый класс <b>SimpleButton</b>. Мы будем использовать его для простого UI. Просмотрите код ниже, он понятен без дополнительного объяснения.<br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.ui;

<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.SpriteBatch;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.TextureRegion;
<span class="keyword">import</span> com.badlogic.gdx.math.Rectangle;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleButton</span> {</span>

    <span class="keyword">private</span> <span class="keyword">float</span> x, y, width, height;

    <span class="keyword">private</span> TextureRegion buttonUp;
    <span class="keyword">private</span> TextureRegion buttonDown;

    <span class="keyword">private</span> Rectangle bounds;

    <span class="keyword">private</span> <span class="keyword">boolean</span> isPressed = <span class="keyword">false</span>;

    <span class="keyword">public</span> SimpleButton(<span class="keyword">float</span> x, <span class="keyword">float</span> y, <span class="keyword">float</span> width, <span class="keyword">float</span> height,
            TextureRegion buttonUp, TextureRegion buttonDown) {
        <span class="keyword">this</span>.x = x;
        <span class="keyword">this</span>.y = y;
        <span class="keyword">this</span>.width = width;
        <span class="keyword">this</span>.height = height;
        <span class="keyword">this</span>.buttonUp = buttonUp;
        <span class="keyword">this</span>.buttonDown = buttonDown;

        bounds = <span class="keyword">new</span> Rectangle(x, y, width, height);

    }

    <span class="keyword">public</span> <span class="keyword">boolean</span> isClicked(<span class="keyword">int</span> screenX, <span class="keyword">int</span> screenY) {
        <span class="keyword">return</span> bounds.contains(screenX, screenY);
    }

    <span class="keyword">public</span> <span class="keyword">void</span> draw(SpriteBatch batcher) {
        <span class="keyword">if</span> (isPressed) {
            batcher.draw(buttonDown, x, y, width, height);
        } <span class="keyword">else</span> {
            batcher.draw(buttonUp, x, y, width, height);
        }
    }

    <span class="keyword">public</span> <span class="keyword">boolean</span> isTouchDown(<span class="keyword">int</span> screenX, <span class="keyword">int</span> screenY) {

        <span class="keyword">if</span> (bounds.contains(screenX, screenY)) {
            isPressed = <span class="keyword">true</span>;
            <span class="keyword">return</span> <span class="keyword">true</span>;
        }

        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

    <span class="keyword">public</span> <span class="keyword">boolean</span> isTouchUp(<span class="keyword">int</span> screenX, <span class="keyword">int</span> screenY) {
        
        <span class="comment">// Мы будем учитывать только touchUp в нажатом состоянии.</span>
        <span class="keyword">if</span> (bounds.contains(screenX, screenY) &amp;&amp; isPressed) {
            isPressed = <span class="keyword">false</span>;
            <span class="keyword">return</span> <span class="keyword">true</span>;
        }
        
        <span class="comment">// Когда палец с кнопки уберут, мы очистим флаг, что кнопка нажатая.</span>
        isPressed = <span class="keyword">false</span>;
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

}
</code></pre><br>
<h2>Обновите AssetLoader</h2><br>
Так как мы обновили старую текстуру и добавили новую картинку, нам надо внести эти изменения в наш <b>AssetLoader</b>:<br>
<div class="spoiler"><b class="spoiler_title">AssetLoader.java</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.ZBHelpers;

<span class="keyword">import</span> com.badlogic.gdx.Gdx;
<span class="keyword">import</span> com.badlogic.gdx.Preferences;
<span class="keyword">import</span> com.badlogic.gdx.audio.Sound;
<span class="keyword">import</span> com.badlogic.gdx.graphics.Texture;
<span class="keyword">import</span> com.badlogic.gdx.graphics.Texture.TextureFilter;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.Animation;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.BitmapFont;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.TextureRegion;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AssetLoader</span> {</span>

    <span class="keyword">public</span> <span class="keyword">static</span> Texture texture, logoTexture;
    <span class="keyword">public</span> <span class="keyword">static</span> TextureRegion logo, zbLogo, bg, grass, bird, birdDown,
            birdUp, skullUp, skullDown, bar, playButtonUp, playButtonDown;
    <span class="keyword">public</span> <span class="keyword">static</span> Animation birdAnimation;
    <span class="keyword">public</span> <span class="keyword">static</span> Sound dead, flap, coin;
    <span class="keyword">public</span> <span class="keyword">static</span> BitmapFont font, shadow;
    <span class="keyword">private</span> <span class="keyword">static</span> Preferences prefs;

    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> load() {

        logoTexture = <span class="keyword">new</span> Texture(Gdx.files.internal(<span class="string">"data/logo.png"</span>));
        logoTexture.setFilter(TextureFilter.Linear, TextureFilter.Linear);

        logo = <span class="keyword">new</span> TextureRegion(logoTexture, <span class="number">0</span>, <span class="number">0</span>, <span class="number">512</span>, <span class="number">114</span>);

        texture = <span class="keyword">new</span> Texture(Gdx.files.internal(<span class="string">"data/texture.png"</span>));
        texture.setFilter(TextureFilter.Nearest, TextureFilter.Nearest);

        playButtonUp = <span class="keyword">new</span> TextureRegion(texture, <span class="number">0</span>, <span class="number">83</span>, <span class="number">29</span>, <span class="number">16</span>);
        playButtonDown = <span class="keyword">new</span> TextureRegion(texture, <span class="number">29</span>, <span class="number">83</span>, <span class="number">29</span>, <span class="number">16</span>);
        playButtonUp.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);
        playButtonDown.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        zbLogo = <span class="keyword">new</span> TextureRegion(texture, <span class="number">0</span>, <span class="number">55</span>, <span class="number">135</span>, <span class="number">24</span>);
        zbLogo.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        bg = <span class="keyword">new</span> TextureRegion(texture, <span class="number">0</span>, <span class="number">0</span>, <span class="number">136</span>, <span class="number">43</span>);
        bg.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        grass = <span class="keyword">new</span> TextureRegion(texture, <span class="number">0</span>, <span class="number">43</span>, <span class="number">143</span>, <span class="number">11</span>);
        grass.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        birdDown = <span class="keyword">new</span> TextureRegion(texture, <span class="number">136</span>, <span class="number">0</span>, <span class="number">17</span>, <span class="number">12</span>);
        birdDown.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        bird = <span class="keyword">new</span> TextureRegion(texture, <span class="number">153</span>, <span class="number">0</span>, <span class="number">17</span>, <span class="number">12</span>);
        bird.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        birdUp = <span class="keyword">new</span> TextureRegion(texture, <span class="number">170</span>, <span class="number">0</span>, <span class="number">17</span>, <span class="number">12</span>);
        birdUp.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        TextureRegion[] birds = { birdDown, bird, birdUp };
        birdAnimation = <span class="keyword">new</span> Animation(<span class="number">0.06</span>f, birds);
        birdAnimation.setPlayMode(Animation.LOOP_PINGPONG);

        skullUp = <span class="keyword">new</span> TextureRegion(texture, <span class="number">192</span>, <span class="number">0</span>, <span class="number">24</span>, <span class="number">14</span>);
        skullDown = <span class="keyword">new</span> TextureRegion(skullUp);
        skullDown.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        bar = <span class="keyword">new</span> TextureRegion(texture, <span class="number">136</span>, <span class="number">16</span>, <span class="number">22</span>, <span class="number">3</span>);
        bar.flip(<span class="keyword">false</span>, <span class="keyword">true</span>);

        dead = Gdx.audio.newSound(Gdx.files.internal(<span class="string">"data/dead.wav"</span>));
        flap = Gdx.audio.newSound(Gdx.files.internal(<span class="string">"data/flap.wav"</span>));
        coin = Gdx.audio.newSound(Gdx.files.internal(<span class="string">"data/coin.wav"</span>));

        font = <span class="keyword">new</span> BitmapFont(Gdx.files.internal(<span class="string">"data/text.fnt"</span>));
        font.setScale(<span class="number">.25</span>f, -<span class="number">.25</span>f);
        shadow = <span class="keyword">new</span> BitmapFont(Gdx.files.internal(<span class="string">"data/shadow.fnt"</span>));
        shadow.setScale(<span class="number">.25</span>f, -<span class="number">.25</span>f);

        prefs = Gdx.app.getPreferences(<span class="string">"ZombieBird"</span>);

        <span class="keyword">if</span> (!prefs.contains(<span class="string">"highScore"</span>)) {
            prefs.putInteger(<span class="string">"highScore"</span>, <span class="number">0</span>);
        }
    }

    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> setHighScore(<span class="keyword">int</span> val) {
        prefs.putInteger(<span class="string">"highScore"</span>, val);
        prefs.flush();
    }

    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> getHighScore() {
        <span class="keyword">return</span> prefs.getInteger(<span class="string">"highScore"</span>);
    }

    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> dispose() {
        texture.dispose();

        dead.dispose();
        flap.dispose();
        coin.dispose();

        font.dispose();
        shadow.dispose();
    }

}
</code></pre><br>
</div></div><br>
<br>
<h2>TweenEngine</h2><br>
Мы добавили библиотеку Tween Engine в наш проект. Давайте разберемся, зачем она нужна.<br>
<br>
<b>Tween Engine</b> позволяет производить математическую интерполяцию между первым значением и вторым.<br>
<br>
Например, у нас есть <b>float</b> перменная x со значением 0. Я хочу экспоненциально изменить это значение на 1 (постепенно увеличивая от 0 до 1 с увеличением скорости изменения). Давайте еще это сделаем точно за 2,8 секунды.<br>
<br>
Это как раз то, что Tween Engine умеет.<br>
<br>
В общем смысле Tween Engine работает следующим образом:<br>
<br>
У вас есть класс Point, у которого значения такие по умолчанию:<br>
float x = 0;<br>
float y = 0;<br>
<br>
Чтобы использовать Tween Engine, чтобы математически интерполировать х в 1, а y в 5, вам надо будет создать TweenAccessor с именем <b>PointAccessor</b>.<br>
<br>
У этого класса будет два ваших метода. Первый метод это getter. Он получает все параметры, которые вы хотите изменить в объекте Point и сохраняет их внутри массива.<br>
<br>
Далее, Tween Engine получит эти значения и изменит их. Измененные значения мы получим из второго метода setter, в котором вы сможете передать в ваш объект Point.<br>
<br>
Давайте рассмотрим пример.<br>
<br>
Создайте новый пакет и назовите его <b>com.kilobolt.TweenAccessors</b> и создайте класс <b>SpriteAccessor</b>:<br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.TweenAccessors;

<span class="keyword">import</span> aurelienribon.tweenengine.TweenAccessor;

<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.Sprite;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpriteAccessor</span> <span class="keyword">implements</span> <span class="title">TweenAccessor</span>&lt;<span class="title">Sprite</span>&gt; {</span>

    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> ALPHA = <span class="number">1</span>;

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">int</span> getValues(Sprite target, <span class="keyword">int</span> tweenType, <span class="keyword">float</span>[] returnValues) {
        <span class="keyword">switch</span> (tweenType) {
        <span class="keyword">case</span> ALPHA:
            returnValues[<span class="number">0</span>] = target.getColor().a;
            <span class="keyword">return</span> <span class="number">1</span>;
        <span class="keyword">default</span>:
            <span class="keyword">return</span> <span class="number">0</span>;
        }
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> setValues(Sprite target, <span class="keyword">int</span> tweenType, <span class="keyword">float</span>[] newValues) {
        <span class="keyword">switch</span> (tweenType) {
        <span class="keyword">case</span> ALPHA:
            target.setColor(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, newValues[<span class="number">0</span>]);
            <span class="keyword">break</span>;
        }
    }

}
</code></pre> <br>
Класс выше это реализация <b>TweenAccessor</b> для класса <b>Sprite</b>. Как я упоминал ранее, любые классы, которые вы хотите изменять с помощью TweenEngine должны иметь свой собственный Accessor.<br>
<br>
Наш TweenAccessor изменяет всего одно значение (прозрачность). Если нам нужно изменить больше параметров, мы создадим больше констант, чтобы обозначить другие параметры которые наш Accessor способен менять (к примеру угол поворота).<br>
<br>
Все TweenAccessor’ы должны иметь два метода: <b>getValues</b> и <b>setValues</b>, каждый из них нацелен на специфический класс для изменений, в нашем случае это Sprite.<br>
<br>
Ваша роль в создании TweenAccessor очень простая: 1. Получить значения, которые вы хотите изменить из вашего объекта и поместить их в массив. Пусть Tween Engine делает свою работу. 2. Далее, вы получаете измененные значения и передаете их в свой объект.<br>
<br>
Давайте рассмотрим, как методы ниже выполняют свои роли:<br>
1. В <b>getValues</b> методе, вы должны получить все значения, которые вы хотите изменить в объекте типа Sprite и сохранить их в массив с именем returnValues. В нашем случае мы меняем только одно значение, так что мы можем созранить его за первым индексом массива returnValues:<br>
<pre><code class="java">returnValues[<span class="number">0</span>]
</code></pre><br>
Далее, это значение будет изменено автоматом с помощью логики TweenEngine.<br>
<br>
2. После этой магии, изменное значение передается в метод <b>setValues</b> (в том же порядке что вы и оставили в методе getValues). Что-либо вы поместили в<b> returnValues[0]</b> теперь доступно в <b>newValues[0]</b>. Далее вы просто передаете это значение в объект типа Sprite.<br>
<br>
Эти методы вызываются автоматически. Вам необходимо передать только начальное значение, и значение, к которому его необходимо привести. Думаю все написанное будет иметь больше смысла когда мы увидите Accessor в действии.<br>
<br>
Создайте новый класс SplashScreen внутри com.kilobolt.Screens как показано ниже:<br>
<div class="spoiler"><b class="spoiler_title">SplashScreen.java</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.Screens;

<span class="keyword">import</span> aurelienribon.tweenengine.BaseTween;
<span class="keyword">import</span> aurelienribon.tweenengine.Tween;
<span class="keyword">import</span> aurelienribon.tweenengine.TweenCallback;
<span class="keyword">import</span> aurelienribon.tweenengine.TweenEquations;
<span class="keyword">import</span> aurelienribon.tweenengine.TweenManager;

<span class="keyword">import</span> com.badlogic.gdx.Gdx;
<span class="keyword">import</span> com.badlogic.gdx.Screen;
<span class="keyword">import</span> com.badlogic.gdx.graphics.GL10;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.Sprite;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.SpriteBatch;
<span class="keyword">import</span> com.kilobolt.TweenAccessors.SpriteAccessor;
<span class="keyword">import</span> com.kilobolt.ZBHelpers.AssetLoader;
<span class="keyword">import</span> com.kilobolt.ZombieBird.ZBGame;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SplashScreen</span> <span class="keyword">implements</span> <span class="title">Screen</span> {</span>

    <span class="keyword">private</span> TweenManager manager;
    <span class="keyword">private</span> SpriteBatch batcher;
    <span class="keyword">private</span> Sprite sprite;
    <span class="keyword">private</span> ZBGame game;

    <span class="keyword">public</span> SplashScreen(ZBGame game) {
        <span class="keyword">this</span>.game = game;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> show() {
        sprite = <span class="keyword">new</span> Sprite(AssetLoader.logo);
        sprite.setColor(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>);

        <span class="keyword">float</span> width = Gdx.graphics.getWidth();
        <span class="keyword">float</span> height = Gdx.graphics.getHeight();
        <span class="keyword">float</span> desiredWidth = width * <span class="number">.7</span>f;
        <span class="keyword">float</span> scale = desiredWidth / sprite.getWidth();

        sprite.setSize(sprite.getWidth() * scale, sprite.getHeight() * scale);
        sprite.setPosition((width / <span class="number">2</span>) - (sprite.getWidth() / <span class="number">2</span>), (height / <span class="number">2</span>)
                - (sprite.getHeight() / <span class="number">2</span>));
        setupTween();
        batcher = <span class="keyword">new</span> SpriteBatch();
    }

    <span class="keyword">private</span> <span class="keyword">void</span> setupTween() {
        Tween.registerAccessor(Sprite.class, <span class="keyword">new</span> SpriteAccessor());
        manager = <span class="keyword">new</span> TweenManager();

        TweenCallback cb = <span class="keyword">new</span> TweenCallback() {
            <span class="annotation">@Override</span>
            <span class="keyword">public</span> <span class="keyword">void</span> onEvent(<span class="keyword">int</span> type, BaseTween&lt;?&gt; source) {
                game.setScreen(<span class="keyword">new</span> GameScreen());
            }
        };

        Tween.to(sprite, SpriteAccessor.ALPHA, <span class="number">.8</span>f).target(<span class="number">1</span>)
                .ease(TweenEquations.easeInOutQuad).repeatYoyo(<span class="number">1</span>, <span class="number">.4</span>f)
                .setCallback(cb).setCallbackTriggers(TweenCallback.COMPLETE)
                .start(manager);
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> render(<span class="keyword">float</span> delta) {
        manager.update(delta);
        Gdx.gl.glClearColor(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>);
        Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
        batcher.begin();
        sprite.draw(batcher);
        batcher.end();
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> resize(<span class="keyword">int</span> width, <span class="keyword">int</span> height) {

    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> hide() {
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> pause() {
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> resume() {
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> dispose() {
    }

}
</code></pre><br>
</div></div><br>
<br>
<h2>Изменим ZBGame</h2><br>
Перед тем как обсудить, что делает наш новый <b>SplashScreen</b>, мы заменим им GameScreen в классе <b>ZBGame</b>, так что теперь первым будет появляться SplashScreen, а не GameScreen. Давайте откроем наш ZBGame и внесем изменения:<br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.ZombieBird;

<span class="keyword">import</span> com.badlogic.gdx.Game;
<span class="keyword">import</span> com.kilobolt.Screens.SplashScreen;
<span class="keyword">import</span> com.kilobolt.ZBHelpers.AssetLoader;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ZBGame</span> <span class="keyword">extends</span> <span class="title">Game</span> {</span>

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> create() {
        AssetLoader.load();
        setScreen(<span class="keyword">new</span> SplashScreen(<span class="keyword">this</span>));
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> dispose() {
        <span class="keyword">super</span>.dispose();
        AssetLoader.dispose();
    }

}
</code></pre><br>
Теперь вернитесь в класс SpashScreen.<br>
<br>
Первым делом давайте сфокусируемся на методе <b>setupTween</b>, потому как код в этом методе не требует пояснений.<br>
<pre><code class="java">privateTween.registerAccessor(Sprite.class, <span class="keyword">new</span> SpriteAccessor()); 
</code></pre><br>
1. Эта строчка регистрирует новый Accessor. Если дословно, то мы говорим, «Я хочу изменять Sprite используя Tween Engine. Вот мой Accessor, я создал его используя твою спецификацию (мы должны иметь методы getValues и setValues)».<br>
<pre><code class="java">manager = <span class="keyword">new</span> TweenManager(); 
</code></pre><br>
2. Чтобы Tween Engine заработала, нам нужен TweenManager, в который мы будем передавать в методе render новую delta. Этот менеджер будет производить интерполяцию используя наш SpriteAccessor. <br>
<pre><code class="java">TweenCallback cb = <span class="keyword">new</span> TweenCallback() { 
    <span class="annotation">@Override</span> 
    <span class="keyword">public</span> <span class="keyword">void</span> onEvent(<span class="keyword">int</span> type, BaseTween&lt;?&gt; source) { 
        game.setScreen(<span class="keyword">new</span> GameScreen()); 
   }
};
</code></pre><br>
3. Мы можем создать объект <b>TweenCallback</b>, методы которого будут вызываться, когда Tweening окончено. Мы создадим новый TweenCallback с именем <b>cb</b>, чей метод <b>onEvent</b> (который мы вызовем, когда Tweening закончился), перенаправит нас на GameScreen.<br>
<br>
Перед тем как перейти к более важным вещам, давайте посмотрим, что мы пытаемся выполнить. Мы берем наш <b>logo</b> спрайт, выставляем его прозрачность в 0, далее увеличиваем прозрачность до 1 (100%) и возвращаем обратно в 0.<br>
<br>
Давайте посмотрим на этот большой кусок кода в деталях: <br>
<pre><code class="java">Tween.to(sprite, SpriteAccessor.ALPHA, <span class="number">.8</span>f).target(<span class="number">1</span>).ease(TweenEquations.easeInOutQuad).repeatYoyo(<span class="number">1</span>, <span class="number">.4</span>f) .setCallback(cb).setCallbackTriggers(TweenCallback.COMPLETE) .start(manager);
</code></pre><br>
<br>
<pre><code class="java">Tween.to(sprite, SpriteAccessor.ALPHA, <span class="number">.8</span>f).target(<span class="number">1</span>)
</code></pre><br>
 — Мы хотим изменить наш объект типа sprite, используя tweenType ALPHA из нашего SpriteAccessor. Мы хотим, чтобы эта операция длилась .8 секунд. Мы хотим изменить стартовое значение (это указано в классе SpriteAccessor) в новое, равное 1.<br>
<br>
<pre><code class="java">.ease(TweenEquations.easeInOutQuad).repeatYoyo(<span class="number">1</span>, <span class="number">.4</span>f) 
</code></pre><br>
 — Мы хотим использовать квадратичную интерполяцию (вы увидите, что это значит), и повторить это действие один раз как Yoyo (за .4 секунды между повторениями). <br>
<br>
<pre><code class="java">.setCallback(cb).setCallbackTriggers(TweenCallback.COMPLETE) 
</code></pre><br>
 — Используй <b>callback</b> который мы ранее создали и назвали как <b>cb</b>, и уведомь его когда Tweening закончилось.<br>
<br>
<pre><code class="java">.start(manager);
</code></pre><br>
 — Ну и наконец, мы указываем какой менеджер выполнит всю эту работу.<br>
<br>
Теперь перейдите в метод render и посмотрите, что делает менеджер и выполните ваш код.<br>
<br>
Возможно, это очень запутанно! И тяжко все это понять сразу, но надо просто поэкспериментировать. Перед тем как продолжить, советую вам поиграться с различными опциями и эффектами.<br>
<br>
<h2>Нам надо больше TweenAccessor’ов</h2><br>
Теперь, когда вы знаете как TweenAccessors работает, создайте два новых класса внутри пакета <b>com.kilobolt.TweenAccessors</b>.<br>
<br>
Первый класс это <b>Value</b> класс, который будет оберткой для <b>float</b> переменных. Мы будем использовать для этого класс, потому что только объекты могут быть использованы в Tween Engine (с примитивами ничего не получится). Так что, чтобы изменить float нам нужен для этого класс.<br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.TweenAccessors;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Value</span> {</span>

    <span class="keyword">private</span> <span class="keyword">float</span> val = <span class="number">1</span>;

    <span class="keyword">public</span> <span class="keyword">float</span> getValue() {
        <span class="keyword">return</span> val;
    }

    <span class="keyword">public</span> <span class="keyword">void</span> setValue(<span class="keyword">float</span> newVal) {
        val = newVal;
    }

}
</code></pre><br>
Класс <b>ValueAccessor</b> поможет нам изменять <b>val</b> переменную в <b>Value</b> классе:<br>
<pre><code class="java"><span class="keyword">package</span> com.kilobolt.TweenAccessors;

<span class="keyword">import</span> aurelienribon.tweenengine.TweenAccessor;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ValueAccessor</span> <span class="keyword">implements</span> <span class="title">TweenAccessor</span>&lt;<span class="title">Value</span>&gt; {</span>

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">int</span> getValues(Value target, <span class="keyword">int</span> tweenType, <span class="keyword">float</span>[] returnValues) {
        returnValues[<span class="number">0</span>] = target.getValue();
        <span class="keyword">return</span> <span class="number">1</span>;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> setValues(Value target, <span class="keyword">int</span> tweenType, <span class="keyword">float</span>[] newValues) {
        target.setValue(newValues[<span class="number">0</span>]);
    }

}
</code></pre><br>
ValueAccessor будет использоваться когда мы захотим интерполировать float переменную. Например, если мы хотим сделать вспышку на экране изменяя прозрачность у квадрата, мы создадим новый обхект типа Value и передадим в обработку нашему ValueAccessor. Фактично, мы используем эту логику чтобы плавно перейти от SpalshScreen к GameScreen.<br>
<br>
Внесем несколько изменений в наш класс GameScreen, который состоит из: InputHandler, GameWorld и GameRenderer.<br>
<br>
Чтобы не растягивать День 11 до трех раздельных уроков, я объясню только главные изменения в коде. В большинстве случаев, изменения легкие и понятные, и вы точно все поймете когда сами поэкспериментируете. <br>
<br>
Начнем с изменений в классе InputHandler:<br>
<div class="spoiler"><b class="spoiler_title">InputHandler.java</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.ZBHelpers;

<span class="keyword">import</span> java.util.ArrayList;
<span class="keyword">import</span> java.util.List;

<span class="keyword">import</span> com.badlogic.gdx.Input.Keys;
<span class="keyword">import</span> com.badlogic.gdx.InputProcessor;
<span class="keyword">import</span> com.kilobolt.GameObjects.Bird;
<span class="keyword">import</span> com.kilobolt.GameWorld.GameWorld;
<span class="keyword">import</span> com.kilobolt.ui.SimpleButton;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InputHandler</span> <span class="keyword">implements</span> <span class="title">InputProcessor</span> {</span>
    <span class="keyword">private</span> Bird myBird;
    <span class="keyword">private</span> GameWorld myWorld;

    <span class="keyword">private</span> List&lt;SimpleButton&gt; menuButtons;

    <span class="keyword">private</span> SimpleButton playButton;

    <span class="keyword">private</span> <span class="keyword">float</span> scaleFactorX;
    <span class="keyword">private</span> <span class="keyword">float</span> scaleFactorY;

    <span class="keyword">public</span> InputHandler(GameWorld myWorld, <span class="keyword">float</span> scaleFactorX,
            <span class="keyword">float</span> scaleFactorY) {
        <span class="keyword">this</span>.myWorld = myWorld;
        myBird = myWorld.getBird();

        <span class="keyword">int</span> midPointY = myWorld.getMidPointY();

        <span class="keyword">this</span>.scaleFactorX = scaleFactorX;
        <span class="keyword">this</span>.scaleFactorY = scaleFactorY;

        menuButtons = <span class="keyword">new</span> ArrayList&lt;SimpleButton&gt;();
        playButton = <span class="keyword">new</span> SimpleButton(
                <span class="number">136</span> / <span class="number">2</span> - (AssetLoader.playButtonUp.getRegionWidth() / <span class="number">2</span>),
                midPointY + <span class="number">50</span>, <span class="number">29</span>, <span class="number">16</span>, AssetLoader.playButtonUp,
                AssetLoader.playButtonDown);
        menuButtons.add(playButton);
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> touchDown(<span class="keyword">int</span> screenX, <span class="keyword">int</span> screenY, <span class="keyword">int</span> pointer, <span class="keyword">int</span> button) {
        screenX = scaleX(screenX);
        screenY = scaleY(screenY);
        System.out.println(screenX + <span class="string">" "</span> + screenY);
        <span class="keyword">if</span> (myWorld.isMenu()) {
            playButton.isTouchDown(screenX, screenY);
        } <span class="keyword">else</span> <span class="keyword">if</span> (myWorld.isReady()) {
            myWorld.start();
        }

        myBird.onClick();

        <span class="keyword">if</span> (myWorld.isGameOver() || myWorld.isHighScore()) {
            myWorld.restart();
        }

        <span class="keyword">return</span> <span class="keyword">true</span>;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> touchUp(<span class="keyword">int</span> screenX, <span class="keyword">int</span> screenY, <span class="keyword">int</span> pointer, <span class="keyword">int</span> button) {
        screenX = scaleX(screenX);
        screenY = scaleY(screenY);

        <span class="keyword">if</span> (myWorld.isMenu()) {
            <span class="keyword">if</span> (playButton.isTouchUp(screenX, screenY)) {
                myWorld.ready();
                <span class="keyword">return</span> <span class="keyword">true</span>;
            }
        }

        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> keyDown(<span class="keyword">int</span> keycode) {

        <span class="keyword">if</span> (keycode == Keys.SPACE) {

            <span class="keyword">if</span> (myWorld.isMenu()) {
                myWorld.ready();
            } <span class="keyword">else</span> <span class="keyword">if</span> (myWorld.isReady()) {
                myWorld.start();
            }

            myBird.onClick();

            <span class="keyword">if</span> (myWorld.isGameOver() || myWorld.isHighScore()) {
                myWorld.restart();
            }

        }

        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> keyUp(<span class="keyword">int</span> keycode) {
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> keyTyped(<span class="keyword">char</span> character) {
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> touchDragged(<span class="keyword">int</span> screenX, <span class="keyword">int</span> screenY, <span class="keyword">int</span> pointer) {
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> mouseMoved(<span class="keyword">int</span> screenX, <span class="keyword">int</span> screenY) {
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">boolean</span> scrolled(<span class="keyword">int</span> amount) {
        <span class="keyword">return</span> <span class="keyword">false</span>;
    }

    <span class="keyword">private</span> <span class="keyword">int</span> scaleX(<span class="keyword">int</span> screenX) {
        <span class="keyword">return</span> (<span class="keyword">int</span>) (screenX / scaleFactorX);
    }

    <span class="keyword">private</span> <span class="keyword">int</span> scaleY(<span class="keyword">int</span> screenY) {
        <span class="keyword">return</span> (<span class="keyword">int</span>) (screenY / scaleFactorY);
    }

    <span class="keyword">public</span> List&lt;SimpleButton&gt; getMenuButtons() {
        <span class="keyword">return</span> menuButtons;
    }
}
</code></pre><br>
</div></div><br>
Большое изменение для InputHandler заключается в том, что мы будем генерировать кнопки тут. Это не лучший способ, но так как кнопки вплотную зависят от ввода, я создал их тут.<br>
<br>
Роль InputHandler заключается в том, чтобы создать <b>Button’ы</b> и обработать взаимодействие с ними, как показано выше.<br>
<br>
Я так же создал методы, с помощью которых мы будем масштабировать касания (которые сейчас зависят от размера экрана) к размеру нашего экрана, вне зависимости от ширины и высоты игрового мира. Теперь, координаты касания будут транслированы как координаты GameWorld.<br>
<br>
Так же я добавил возможность использовать <b>Spacebar</b>(Пробел) для тех, кто хочет использовать клавиатуру.<br>
<br>
Чтобы наши изменения сработали, нам необходимо обновить класс GameScreen. Эти изменения слишком мелкие, так что попробуйте сами их заметить :) (Обратите внимание на измененный вызов <b>renderer.render()</b>).<br>
<div class="spoiler"><b class="spoiler_title">GameScreen.java</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.Screens;

<span class="keyword">import</span> com.badlogic.gdx.Gdx;
<span class="keyword">import</span> com.badlogic.gdx.Screen;
<span class="keyword">import</span> com.kilobolt.GameWorld.GameRenderer;
<span class="keyword">import</span> com.kilobolt.GameWorld.GameWorld;
<span class="keyword">import</span> com.kilobolt.ZBHelpers.InputHandler;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameScreen</span> <span class="keyword">implements</span> <span class="title">Screen</span> {</span>

    <span class="keyword">private</span> GameWorld world;
    <span class="keyword">private</span> GameRenderer renderer;
    <span class="keyword">private</span> <span class="keyword">float</span> runTime;

    <span class="keyword">public</span> GameScreen() {

        <span class="keyword">float</span> screenWidth = Gdx.graphics.getWidth();
        <span class="keyword">float</span> screenHeight = Gdx.graphics.getHeight();
        <span class="keyword">float</span> gameWidth = <span class="number">136</span>;
        <span class="keyword">float</span> gameHeight = screenHeight / (screenWidth / gameWidth);
        <span class="keyword">int</span> midPointY = (<span class="keyword">int</span>) (gameHeight / <span class="number">2</span>);

        world = <span class="keyword">new</span> GameWorld(midPointY);
        Gdx.input.setInputProcessor(<span class="keyword">new</span> InputHandler(world, screenWidth / gameWidth, screenHeight / gameHeight));
        renderer = <span class="keyword">new</span> GameRenderer(world, (<span class="keyword">int</span>) gameHeight, midPointY);
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> render(<span class="keyword">float</span> delta) {
        runTime += delta;
        world.update(delta);
        renderer.render(delta, runTime);
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> resize(<span class="keyword">int</span> width, <span class="keyword">int</span> height) {
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> show() {
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> hide() {
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> pause() {
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> resume() {
    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="keyword">void</span> dispose() {
    }

}
</code></pre><br>
</div></div><br>
<br>
В классе GameWorld мы так же внесли мелкие изменения (обратите внимание на GameState и несколько новых методов):<br>
<div class="spoiler"><b class="spoiler_title">GameWorld.java</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.GameWorld;

<span class="keyword">import</span> com.badlogic.gdx.math.Intersector;
<span class="keyword">import</span> com.badlogic.gdx.math.Rectangle;
<span class="keyword">import</span> com.kilobolt.GameObjects.Bird;
<span class="keyword">import</span> com.kilobolt.GameObjects.ScrollHandler;
<span class="keyword">import</span> com.kilobolt.ZBHelpers.AssetLoader;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameWorld</span> {</span>

    <span class="keyword">private</span> Bird bird;
    <span class="keyword">private</span> ScrollHandler scroller;
    <span class="keyword">private</span> Rectangle ground;
    <span class="keyword">private</span> <span class="keyword">int</span> score = <span class="number">0</span>;
    <span class="keyword">private</span> <span class="keyword">float</span> runTime = <span class="number">0</span>;
    <span class="keyword">private</span> <span class="keyword">int</span> midPointY;

    <span class="keyword">private</span> GameState currentState;

    <span class="keyword">public</span> <span class="keyword">enum</span> GameState {
        MENU, READY, RUNNING, GAMEOVER, HIGHSCORE
    }

    <span class="keyword">public</span> GameWorld(<span class="keyword">int</span> midPointY) {
        currentState = GameState.MENU;
        <span class="keyword">this</span>.midPointY = midPointY;
        bird = <span class="keyword">new</span> Bird(<span class="number">33</span>, midPointY - <span class="number">5</span>, <span class="number">17</span>, <span class="number">12</span>);
        scroller = <span class="keyword">new</span> ScrollHandler(<span class="keyword">this</span>, midPointY + <span class="number">66</span>);
        ground = <span class="keyword">new</span> Rectangle(<span class="number">0</span>, midPointY + <span class="number">66</span>, <span class="number">137</span>, <span class="number">11</span>);
    }

    <span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {
        runTime += delta;

        <span class="keyword">switch</span> (currentState) {
        <span class="keyword">case</span> READY:
        <span class="keyword">case</span> MENU:
            updateReady(delta);
            <span class="keyword">break</span>;

        <span class="keyword">case</span> RUNNING:
            updateRunning(delta);
            <span class="keyword">break</span>;
        <span class="keyword">default</span>:
            <span class="keyword">break</span>;
        }

    }

    <span class="keyword">private</span> <span class="keyword">void</span> updateReady(<span class="keyword">float</span> delta) {
        bird.updateReady(runTime);
        scroller.updateReady(delta);
    }

    <span class="keyword">public</span> <span class="keyword">void</span> updateRunning(<span class="keyword">float</span> delta) {
        <span class="keyword">if</span> (delta &gt; <span class="number">.15</span>f) {
            delta = <span class="number">.15</span>f;
        }

        bird.update(delta);
        scroller.update(delta);

        <span class="keyword">if</span> (scroller.collides(bird) &amp;&amp; bird.isAlive()) {
            scroller.stop();
            bird.die();
            AssetLoader.dead.play();
        }

        <span class="keyword">if</span> (Intersector.overlaps(bird.getBoundingCircle(), ground)) {
            scroller.stop();
            bird.die();
            bird.decelerate();
            currentState = GameState.GAMEOVER;

            <span class="keyword">if</span> (score &gt; AssetLoader.getHighScore()) {
                AssetLoader.setHighScore(score);
                currentState = GameState.HIGHSCORE;
            }
        }
    }

    <span class="keyword">public</span> Bird getBird() {
        <span class="keyword">return</span> bird;

    }

    <span class="keyword">public</span> <span class="keyword">int</span> getMidPointY() {
        <span class="keyword">return</span> midPointY;
    }

    <span class="keyword">public</span> ScrollHandler getScroller() {
        <span class="keyword">return</span> scroller;
    }

    <span class="keyword">public</span> <span class="keyword">int</span> getScore() {
        <span class="keyword">return</span> score;
    }

    <span class="keyword">public</span> <span class="keyword">void</span> addScore(<span class="keyword">int</span> increment) {
        score += increment;
    }

    <span class="keyword">public</span> <span class="keyword">void</span> start() {
        currentState = GameState.RUNNING;
    }

    <span class="keyword">public</span> <span class="keyword">void</span> ready() {
        currentState = GameState.READY;
    }

    <span class="keyword">public</span> <span class="keyword">void</span> restart() {
        currentState = GameState.READY;
        score = <span class="number">0</span>;
        bird.onRestart(midPointY - <span class="number">5</span>);
        scroller.onRestart();
        currentState = GameState.READY;
    }

    <span class="keyword">public</span> <span class="keyword">boolean</span> isReady() {
        <span class="keyword">return</span> currentState == GameState.READY;
    }

    <span class="keyword">public</span> <span class="keyword">boolean</span> isGameOver() {
        <span class="keyword">return</span> currentState == GameState.GAMEOVER;
    }

    <span class="keyword">public</span> <span class="keyword">boolean</span> isHighScore() {
        <span class="keyword">return</span> currentState == GameState.HIGHSCORE;
    }

    <span class="keyword">public</span> <span class="keyword">boolean</span> isMenu() {
        <span class="keyword">return</span> currentState == GameState.MENU;
    }

    <span class="keyword">public</span> <span class="keyword">boolean</span> isRunning() {
        <span class="keyword">return</span> currentState == GameState.RUNNING;
    }

}
</code></pre><br>
</div></div><br>
<br>
Осталось внести мелкие изменения в классы Bird и ScrollHandler:<br>
<div class="spoiler"><b class="spoiler_title">Bird.java</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.GameObjects;

<span class="keyword">import</span> com.badlogic.gdx.math.Circle;
<span class="keyword">import</span> com.badlogic.gdx.math.Vector2;
<span class="keyword">import</span> com.kilobolt.ZBHelpers.AssetLoader;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bird</span> {</span>

    <span class="keyword">private</span> Vector2 position;
    <span class="keyword">private</span> Vector2 velocity;
    <span class="keyword">private</span> Vector2 acceleration;

    <span class="keyword">private</span> <span class="keyword">float</span> rotation;
    <span class="keyword">private</span> <span class="keyword">int</span> width;
    <span class="keyword">private</span> <span class="keyword">float</span> height;

    <span class="keyword">private</span> <span class="keyword">float</span> originalY;

    <span class="keyword">private</span> <span class="keyword">boolean</span> isAlive;

    <span class="keyword">private</span> Circle boundingCircle;

    <span class="keyword">public</span> Bird(<span class="keyword">float</span> x, <span class="keyword">float</span> y, <span class="keyword">int</span> width, <span class="keyword">int</span> height) {
        <span class="keyword">this</span>.width = width;
        <span class="keyword">this</span>.height = height;
        <span class="keyword">this</span>.originalY = y;
        position = <span class="keyword">new</span> Vector2(x, y);
        velocity = <span class="keyword">new</span> Vector2(<span class="number">0</span>, <span class="number">0</span>);
        acceleration = <span class="keyword">new</span> Vector2(<span class="number">0</span>, <span class="number">460</span>);
        boundingCircle = <span class="keyword">new</span> Circle();
        isAlive = <span class="keyword">true</span>;
    }

    <span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {

        velocity.add(acceleration.cpy().scl(delta));

        <span class="keyword">if</span> (velocity.y &gt; <span class="number">200</span>) {
            velocity.y = <span class="number">200</span>;
        }

        <span class="keyword">if</span> (position.y &lt; -<span class="number">13</span>) {
            position.y = -<span class="number">13</span>;
            velocity.y = <span class="number">0</span>;
        }

        position.add(velocity.cpy().scl(delta));

        boundingCircle.set(position.x + <span class="number">9</span>, position.y + <span class="number">6</span>, <span class="number">6.5</span>f);

        <span class="keyword">if</span> (velocity.y &lt; <span class="number">0</span>) {
            rotation -= <span class="number">600</span> * delta;

            <span class="keyword">if</span> (rotation &lt; -<span class="number">20</span>) {
                rotation = -<span class="number">20</span>;
            }
        }

        <span class="keyword">if</span> (isFalling() || !isAlive) {
            rotation += <span class="number">480</span> * delta;
            <span class="keyword">if</span> (rotation &gt; <span class="number">90</span>) {
                rotation = <span class="number">90</span>;
            }

        }

    }

    <span class="keyword">public</span> <span class="keyword">void</span> updateReady(<span class="keyword">float</span> runTime) {
        position.y = <span class="number">2</span> * (<span class="keyword">float</span>) Math.sin(<span class="number">7</span> * runTime) + originalY;
    }

    <span class="keyword">public</span> <span class="keyword">boolean</span> isFalling() {
        <span class="keyword">return</span> velocity.y &gt; <span class="number">110</span>;
    }

    <span class="keyword">public</span> <span class="keyword">boolean</span> shouldntFlap() {
        <span class="keyword">return</span> velocity.y &gt; <span class="number">70</span> || !isAlive;
    }

    <span class="keyword">public</span> <span class="keyword">void</span> onClick() {
        <span class="keyword">if</span> (isAlive) {
            AssetLoader.flap.play();
            velocity.y = -<span class="number">140</span>;
        }
    }

    <span class="keyword">public</span> <span class="keyword">void</span> die() {
        isAlive = <span class="keyword">false</span>;
        velocity.y = <span class="number">0</span>;
    }

    <span class="keyword">public</span> <span class="keyword">void</span> decelerate() {
        acceleration.y = <span class="number">0</span>;
    }

    <span class="keyword">public</span> <span class="keyword">void</span> onRestart(<span class="keyword">int</span> y) {
        rotation = <span class="number">0</span>;
        position.y = y;
        velocity.x = <span class="number">0</span>;
        velocity.y = <span class="number">0</span>;
        acceleration.x = <span class="number">0</span>;
        acceleration.y = <span class="number">460</span>;
        isAlive = <span class="keyword">true</span>;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getX() {
        <span class="keyword">return</span> position.x;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getY() {
        <span class="keyword">return</span> position.y;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getWidth() {
        <span class="keyword">return</span> width;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getHeight() {
        <span class="keyword">return</span> height;
    }

    <span class="keyword">public</span> <span class="keyword">float</span> getRotation() {
        <span class="keyword">return</span> rotation;
    }

    <span class="keyword">public</span> Circle getBoundingCircle() {
        <span class="keyword">return</span> boundingCircle;
    }

    <span class="keyword">public</span> <span class="keyword">boolean</span> isAlive() {
        <span class="keyword">return</span> isAlive;
    }

}
</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title">ScrollHandler.java</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.GameObjects;

<span class="keyword">import</span> com.kilobolt.GameWorld.GameWorld;
<span class="keyword">import</span> com.kilobolt.ZBHelpers.AssetLoader;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ScrollHandler</span> {</span>

    <span class="keyword">private</span> Grass frontGrass, backGrass;
    <span class="keyword">private</span> Pipe pipe1, pipe2, pipe3;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> SCROLL_SPEED = -<span class="number">59</span>;
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> PIPE_GAP = <span class="number">49</span>;

    <span class="keyword">private</span> GameWorld gameWorld;

    <span class="keyword">public</span> ScrollHandler(GameWorld gameWorld, <span class="keyword">float</span> yPos) {
        <span class="keyword">this</span>.gameWorld = gameWorld;
        frontGrass = <span class="keyword">new</span> Grass(<span class="number">0</span>, yPos, <span class="number">143</span>, <span class="number">11</span>, SCROLL_SPEED);
        backGrass = <span class="keyword">new</span> Grass(frontGrass.getTailX(), yPos, <span class="number">143</span>, <span class="number">11</span>,
                SCROLL_SPEED);

        pipe1 = <span class="keyword">new</span> Pipe(<span class="number">210</span>, <span class="number">0</span>, <span class="number">22</span>, <span class="number">60</span>, SCROLL_SPEED, yPos);
        pipe2 = <span class="keyword">new</span> Pipe(pipe1.getTailX() + PIPE_GAP, <span class="number">0</span>, <span class="number">22</span>, <span class="number">70</span>, SCROLL_SPEED,
                yPos);
        pipe3 = <span class="keyword">new</span> Pipe(pipe2.getTailX() + PIPE_GAP, <span class="number">0</span>, <span class="number">22</span>, <span class="number">60</span>, SCROLL_SPEED,
                yPos);
    }

    <span class="keyword">public</span> <span class="keyword">void</span> updateReady(<span class="keyword">float</span> delta) {

        frontGrass.update(delta);
        backGrass.update(delta);

        <span class="keyword">if</span> (frontGrass.isScrolledLeft()) {
            frontGrass.reset(backGrass.getTailX());

        } <span class="keyword">else</span> <span class="keyword">if</span> (backGrass.isScrolledLeft()) {
            backGrass.reset(frontGrass.getTailX());

        }

    }

    <span class="keyword">public</span> <span class="keyword">void</span> update(<span class="keyword">float</span> delta) {
        frontGrass.update(delta);
        backGrass.update(delta);
        pipe1.update(delta);
        pipe2.update(delta);
        pipe3.update(delta);

        <span class="keyword">if</span> (pipe1.isScrolledLeft()) {
            pipe1.reset(pipe3.getTailX() + PIPE_GAP);
        } <span class="keyword">else</span> <span class="keyword">if</span> (pipe2.isScrolledLeft()) {
            pipe2.reset(pipe1.getTailX() + PIPE_GAP);

        } <span class="keyword">else</span> <span class="keyword">if</span> (pipe3.isScrolledLeft()) {
            pipe3.reset(pipe2.getTailX() + PIPE_GAP);
        }

        <span class="keyword">if</span> (frontGrass.isScrolledLeft()) {
            frontGrass.reset(backGrass.getTailX());

        } <span class="keyword">else</span> <span class="keyword">if</span> (backGrass.isScrolledLeft()) {
            backGrass.reset(frontGrass.getTailX());

        }
    }

    <span class="keyword">public</span> <span class="keyword">void</span> stop() {
        frontGrass.stop();
        backGrass.stop();
        pipe1.stop();
        pipe2.stop();
        pipe3.stop();
    }

    <span class="keyword">public</span> <span class="keyword">boolean</span> collides(Bird bird) {

        <span class="keyword">if</span> (!pipe1.isScored()
                &amp;&amp; pipe1.getX() + (pipe1.getWidth() / <span class="number">2</span>) &lt; bird.getX()
                        + bird.getWidth()) {
            addScore(<span class="number">1</span>);
            pipe1.setScored(<span class="keyword">true</span>);
            AssetLoader.coin.play();
        } <span class="keyword">else</span> <span class="keyword">if</span> (!pipe2.isScored()
                &amp;&amp; pipe2.getX() + (pipe2.getWidth() / <span class="number">2</span>) &lt; bird.getX()
                        + bird.getWidth()) {
            addScore(<span class="number">1</span>);
            pipe2.setScored(<span class="keyword">true</span>);
            AssetLoader.coin.play();

        } <span class="keyword">else</span> <span class="keyword">if</span> (!pipe3.isScored()
                &amp;&amp; pipe3.getX() + (pipe3.getWidth() / <span class="number">2</span>) &lt; bird.getX()
                        + bird.getWidth()) {
            addScore(<span class="number">1</span>);
            pipe3.setScored(<span class="keyword">true</span>);
            AssetLoader.coin.play();

        }

        <span class="keyword">return</span> (pipe1.collides(bird) || pipe2.collides(bird) || pipe3
                .collides(bird));
    }

    <span class="keyword">private</span> <span class="keyword">void</span> addScore(<span class="keyword">int</span> increment) {
        gameWorld.addScore(increment);
    }

    <span class="keyword">public</span> Grass getFrontGrass() {
        <span class="keyword">return</span> frontGrass;
    }

    <span class="keyword">public</span> Grass getBackGrass() {
        <span class="keyword">return</span> backGrass;
    }

    <span class="keyword">public</span> Pipe getPipe1() {
        <span class="keyword">return</span> pipe1;
    }

    <span class="keyword">public</span> Pipe getPipe2() {
        <span class="keyword">return</span> pipe2;
    }

    <span class="keyword">public</span> Pipe getPipe3() {
        <span class="keyword">return</span> pipe3;
    }

    <span class="keyword">public</span> <span class="keyword">void</span> onRestart() {
        frontGrass.onRestart(<span class="number">0</span>, SCROLL_SPEED);
        backGrass.onRestart(frontGrass.getTailX(), SCROLL_SPEED);
        pipe1.onRestart(<span class="number">210</span>, SCROLL_SPEED);
        pipe2.onRestart(pipe1.getTailX() + PIPE_GAP, SCROLL_SPEED);
        pipe3.onRestart(pipe2.getTailX() + PIPE_GAP, SCROLL_SPEED);
    }

}
</code></pre><br>
</div></div><br>
<br>
Самое большое количество изменений выпало на душу класса <b>GameRenderer</b>, но опять-таки, они все мелкие.<br>
<div class="spoiler"><b class="spoiler_title">GameRenderer.java</b><div class="spoiler_text"><pre><code class="java"><span class="keyword">package</span> com.kilobolt.GameWorld;

<span class="keyword">import</span> java.util.List;

<span class="keyword">import</span> aurelienribon.tweenengine.Tween;
<span class="keyword">import</span> aurelienribon.tweenengine.TweenEquations;
<span class="keyword">import</span> aurelienribon.tweenengine.TweenManager;

<span class="keyword">import</span> com.badlogic.gdx.Gdx;
<span class="keyword">import</span> com.badlogic.gdx.graphics.GL10;
<span class="keyword">import</span> com.badlogic.gdx.graphics.OrthographicCamera;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.Animation;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.SpriteBatch;
<span class="keyword">import</span> com.badlogic.gdx.graphics.g2d.TextureRegion;
<span class="keyword">import</span> com.badlogic.gdx.graphics.glutils.ShapeRenderer;
<span class="keyword">import</span> com.badlogic.gdx.graphics.glutils.ShapeRenderer.ShapeType;
<span class="keyword">import</span> com.kilobolt.GameObjects.Bird;
<span class="keyword">import</span> com.kilobolt.GameObjects.Grass;
<span class="keyword">import</span> com.kilobolt.GameObjects.Pipe;
<span class="keyword">import</span> com.kilobolt.GameObjects.ScrollHandler;
<span class="keyword">import</span> com.kilobolt.TweenAccessors.Value;
<span class="keyword">import</span> com.kilobolt.TweenAccessors.ValueAccessor;
<span class="keyword">import</span> com.kilobolt.ZBHelpers.AssetLoader;
<span class="keyword">import</span> com.kilobolt.ZBHelpers.InputHandler;
<span class="keyword">import</span> com.kilobolt.ui.SimpleButton;

<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameRenderer</span> {</span>

    <span class="keyword">private</span> GameWorld myWorld;
    <span class="keyword">private</span> OrthographicCamera cam;
    <span class="keyword">private</span> ShapeRenderer shapeRenderer;

    <span class="keyword">private</span> SpriteBatch batcher;

    <span class="keyword">private</span> <span class="keyword">int</span> midPointY;

    <span class="keyword">private</span> Bird bird;
    <span class="keyword">private</span> ScrollHandler scroller;
    <span class="keyword">private</span> Grass frontGrass, backGrass;
    <span class="keyword">private</span> Pipe pipe1, pipe2, pipe3;

    <span class="keyword">private</span> TextureRegion bg, grass, birdMid, skullUp, skullDown, bar;
    <span class="keyword">private</span> Animation birdAnimation;

    <span class="keyword">private</span> TweenManager manager;
    <span class="keyword">private</span> Value alpha = <span class="keyword">new</span> Value();

    <span class="keyword">private</span> List&lt;SimpleButton&gt; menuButtons;

    <span class="keyword">public</span> GameRenderer(GameWorld world, <span class="keyword">int</span> gameHeight, <span class="keyword">int</span> midPointY) {
        myWorld = world;

        <span class="keyword">this</span>.midPointY = midPointY;
        <span class="keyword">this</span>.menuButtons = ((InputHandler) Gdx.input.getInputProcessor())
                .getMenuButtons();

        cam = <span class="keyword">new</span> OrthographicCamera();
        cam.setToOrtho(<span class="keyword">true</span>, <span class="number">136</span>, gameHeight);

        batcher = <span class="keyword">new</span> SpriteBatch();
        batcher.setProjectionMatrix(cam.combined);
        shapeRenderer = <span class="keyword">new</span> ShapeRenderer();
        shapeRenderer.setProjectionMatrix(cam.combined);

        initGameObjects();
        initAssets();
        setupTweens();

    }

    <span class="keyword">private</span> <span class="keyword">void</span> setupTweens() {
        Tween.registerAccessor(Value.class, <span class="keyword">new</span> ValueAccessor());
        manager = <span class="keyword">new</span> TweenManager();
        Tween.to(alpha, -<span class="number">1</span>, <span class="number">.5</span>f).target(<span class="number">0</span>).ease(TweenEquations.easeOutQuad)
                .start(manager);
    }

    <span class="keyword">private</span> <span class="keyword">void</span> initGameObjects() {
        bird = myWorld.getBird();
        scroller = myWorld.getScroller();
        frontGrass = scroller.getFrontGrass();
        backGrass = scroller.getBackGrass();
        pipe1 = scroller.getPipe1();
        pipe2 = scroller.getPipe2();
        pipe3 = scroller.getPipe3();
    }

    <span class="keyword">private</span> <span class="keyword">void</span> initAssets() {
        bg = AssetLoader.bg;
        grass = AssetLoader.grass;
        birdAnimation = AssetLoader.birdAnimation;
        birdMid = AssetLoader.bird;
        skullUp = AssetLoader.skullUp;
        skullDown = AssetLoader.skullDown;
        bar = AssetLoader.bar;
    }

    <span class="keyword">private</span> <span class="keyword">void</span> drawGrass() {
        batcher.draw(grass, frontGrass.getX(), frontGrass.getY(),
                frontGrass.getWidth(), frontGrass.getHeight());
        batcher.draw(grass, backGrass.getX(), backGrass.getY(),
                backGrass.getWidth(), backGrass.getHeight());
    }

    <span class="keyword">private</span> <span class="keyword">void</span> drawSkulls() {

        batcher.draw(skullUp, pipe1.getX() - <span class="number">1</span>,
                pipe1.getY() + pipe1.getHeight() - <span class="number">14</span>, <span class="number">24</span>, <span class="number">14</span>);
        batcher.draw(skullDown, pipe1.getX() - <span class="number">1</span>,
                pipe1.getY() + pipe1.getHeight() + <span class="number">45</span>, <span class="number">24</span>, <span class="number">14</span>);

        batcher.draw(skullUp, pipe2.getX() - <span class="number">1</span>,
                pipe2.getY() + pipe2.getHeight() - <span class="number">14</span>, <span class="number">24</span>, <span class="number">14</span>);
        batcher.draw(skullDown, pipe2.getX() - <span class="number">1</span>,
                pipe2.getY() + pipe2.getHeight() + <span class="number">45</span>, <span class="number">24</span>, <span class="number">14</span>);

        batcher.draw(skullUp, pipe3.getX() - <span class="number">1</span>,
                pipe3.getY() + pipe3.getHeight() - <span class="number">14</span>, <span class="number">24</span>, <span class="number">14</span>);
        batcher.draw(skullDown, pipe3.getX() - <span class="number">1</span>,
                pipe3.getY() + pipe3.getHeight() + <span class="number">45</span>, <span class="number">24</span>, <span class="number">14</span>);
    }

    <span class="keyword">private</span> <span class="keyword">void</span> drawPipes() {
        batcher.draw(bar, pipe1.getX(), pipe1.getY(), pipe1.getWidth(),
                pipe1.getHeight());
        batcher.draw(bar, pipe1.getX(), pipe1.getY() + pipe1.getHeight() + <span class="number">45</span>,
                pipe1.getWidth(), midPointY + <span class="number">66</span> - (pipe1.getHeight() + <span class="number">45</span>));

        batcher.draw(bar, pipe2.getX(), pipe2.getY(), pipe2.getWidth(),
                pipe2.getHeight());
        batcher.draw(bar, pipe2.getX(), pipe2.getY() + pipe2.getHeight() + <span class="number">45</span>,
                pipe2.getWidth(), midPointY + <span class="number">66</span> - (pipe2.getHeight() + <span class="number">45</span>));

        batcher.draw(bar, pipe3.getX(), pipe3.getY(), pipe3.getWidth(),
                pipe3.getHeight());
        batcher.draw(bar, pipe3.getX(), pipe3.getY() + pipe3.getHeight() + <span class="number">45</span>,
                pipe3.getWidth(), midPointY + <span class="number">66</span> - (pipe3.getHeight() + <span class="number">45</span>));
    }

    <span class="keyword">private</span> <span class="keyword">void</span> drawBirdCentered(<span class="keyword">float</span> runTime) {
        batcher.draw(birdAnimation.getKeyFrame(runTime), <span class="number">59</span>, bird.getY() - <span class="number">15</span>,
                bird.getWidth() / <span class="number">2.0</span>f, bird.getHeight() / <span class="number">2.0</span>f,
                bird.getWidth(), bird.getHeight(), <span class="number">1</span>, <span class="number">1</span>, bird.getRotation());
    }

    <span class="keyword">private</span> <span class="keyword">void</span> drawBird(<span class="keyword">float</span> runTime) {

        <span class="keyword">if</span> (bird.shouldntFlap()) {
            batcher.draw(birdMid, bird.getX(), bird.getY(),
                    bird.getWidth() / <span class="number">2.0</span>f, bird.getHeight() / <span class="number">2.0</span>f,
                    bird.getWidth(), bird.getHeight(), <span class="number">1</span>, <span class="number">1</span>, bird.getRotation());

        } <span class="keyword">else</span> {
            batcher.draw(birdAnimation.getKeyFrame(runTime), bird.getX(),
                    bird.getY(), bird.getWidth() / <span class="number">2.0</span>f,
                    bird.getHeight() / <span class="number">2.0</span>f, bird.getWidth(), bird.getHeight(),
                    <span class="number">1</span>, <span class="number">1</span>, bird.getRotation());
        }

    }

    <span class="keyword">private</span> <span class="keyword">void</span> drawMenuUI() {
        batcher.draw(AssetLoader.zbLogo, <span class="number">136</span> / <span class="number">2</span> - <span class="number">56</span>, midPointY - <span class="number">50</span>,
                AssetLoader.zbLogo.getRegionWidth() / <span class="number">1.2</span>f,
                AssetLoader.zbLogo.getRegionHeight() / <span class="number">1.2</span>f);

        <span class="keyword">for</span> (SimpleButton button : menuButtons) {
            button.draw(batcher);
        }

    }

    <span class="keyword">private</span> <span class="keyword">void</span> drawScore() {
        <span class="keyword">int</span> length = (<span class="string">""</span> + myWorld.getScore()).length();
        AssetLoader.shadow.draw(batcher, <span class="string">""</span> + myWorld.getScore(),
                <span class="number">68</span> - (<span class="number">3</span> * length), midPointY - <span class="number">82</span>);
        AssetLoader.font.draw(batcher, <span class="string">""</span> + myWorld.getScore(),
                <span class="number">68</span> - (<span class="number">3</span> * length), midPointY - <span class="number">83</span>);
    }

    <span class="keyword">public</span> <span class="keyword">void</span> render(<span class="keyword">float</span> delta, <span class="keyword">float</span> runTime) {

        Gdx.gl.glClearColor(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);
        Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);

        shapeRenderer.begin(ShapeType.Filled);

        shapeRenderer.setColor(<span class="number">55</span> / <span class="number">255.0</span>f, <span class="number">80</span> / <span class="number">255.0</span>f, <span class="number">100</span> / <span class="number">255.0</span>f, <span class="number">1</span>);
        shapeRenderer.rect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">136</span>, midPointY + <span class="number">66</span>);

        shapeRenderer.setColor(<span class="number">111</span> / <span class="number">255.0</span>f, <span class="number">186</span> / <span class="number">255.0</span>f, <span class="number">45</span> / <span class="number">255.0</span>f, <span class="number">1</span>);
        shapeRenderer.rect(<span class="number">0</span>, midPointY + <span class="number">66</span>, <span class="number">136</span>, <span class="number">11</span>);

        shapeRenderer.setColor(<span class="number">147</span> / <span class="number">255.0</span>f, <span class="number">80</span> / <span class="number">255.0</span>f, <span class="number">27</span> / <span class="number">255.0</span>f, <span class="number">1</span>);
        shapeRenderer.rect(<span class="number">0</span>, midPointY + <span class="number">77</span>, <span class="number">136</span>, <span class="number">52</span>);

        shapeRenderer.end();

        batcher.begin();
        batcher.disableBlending();

        batcher.draw(bg, <span class="number">0</span>, midPointY + <span class="number">23</span>, <span class="number">136</span>, <span class="number">43</span>);

        drawGrass();
        drawPipes();

        batcher.enableBlending();
        drawSkulls();

        <span class="keyword">if</span> (myWorld.isRunning()) {
            drawBird(runTime);
            drawScore();
        } <span class="keyword">else</span> <span class="keyword">if</span> (myWorld.isReady()) {
            drawBird(runTime);
            drawScore();
        } <span class="keyword">else</span> <span class="keyword">if</span> (myWorld.isMenu()) {
            drawBirdCentered(runTime);
            drawMenuUI();
        } <span class="keyword">else</span> <span class="keyword">if</span> (myWorld.isGameOver()) {
            drawBird(runTime);
            drawScore();
        } <span class="keyword">else</span> <span class="keyword">if</span> (myWorld.isHighScore()) {
            drawBird(runTime);
            drawScore();
        }

        batcher.end();
        drawTransition(delta);

    }

    <span class="keyword">private</span> <span class="keyword">void</span> drawTransition(<span class="keyword">float</span> delta) {
        <span class="keyword">if</span> (alpha.getValue() &gt; <span class="number">0</span>) {
            manager.update(delta);
            Gdx.gl.glEnable(GL10.GL_BLEND);
            Gdx.gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
            shapeRenderer.begin(ShapeType.Filled);
            shapeRenderer.setColor(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, alpha.getValue());
            shapeRenderer.rect(<span class="number">0</span>, <span class="number">0</span>, <span class="number">136</span>, <span class="number">300</span>);
            shapeRenderer.end();
            Gdx.gl.glDisable(GL10.GL_BLEND);

        }
    }

}
</code></pre><br>
</div></div><br>
<br>
Конечно, осталось еще много работы по улучшению нашего UI. И вот как мы поступим. Я выложу код примера для <b>законченной</b> игры как День 12, этот пример будет включать в себя законченный UI. И это будет окончание Секции 1, цель которой была скопировать поведение <b>Flappy Bird</b>.<br>
<br>
<h2>Исходный код за день</h2><br>
Если вы вне настроения писать код самостоятельно, скачайте его отсюда:<br>
<img src="./tutorial_files/e273ed1a4ed342abb148c53ad824d8f3.png" hspace="4" vspace="4" align="left"><a href="http://www.kilobolt.com/uploads/1/2/5/7/12571940/day_11.zip">day_11.zip</a><br>
<br>
<br>
<br>
<img src="./tutorial_files/4f355491bc81468cbcb05427325b49ca.png"> <a href="http://habrahabr.ru/post/243471/#ContentList">К Оглавлению</a><br>
<br>
<br>
<br>
<br>
<br>
<br>
<a name="Day12"></a><h1><img src="./tutorial_files/4e55852eb2a04db2a1200c031304129c.png"> День 12 — Конечный вариант UI и Исходный код</h1><hr><br>
<img src="./tutorial_files/ec13fff877ae4f52a297eee9e35e70f2.png" hspace="8" vspace="8" align="left"> Добро пожаловать в День 12. Ниже вы найдете финальный вариант кода, который включает в себя следующее:<br>
<ul>
<li>Законченный UI</li>
<li>Добавлен упрощенный способ применения транзиций</li>
<li>Добавлен экран Game Over </li>
<li>Добавлено отображение рейтинга в виде звезд на экране Game Over </li>
<li>Добавлен новый звуковой эффект (падение птички)</li>
<li>Изменена логика для звуковых эффектов</li>
<li>Исправлены проблемы с громкостью</li>
<li>Многочисленные улучшения в коде</li>
</ul><br>
<br>
Так как я не добавил новых концептов, День 12 не будет пояснять перечисленные изменения. Просмотрите код и если у вас появятся вопросы, задайте их мне! <br>
<br>
<br>
<br>
<br>
<br>
<h2>Исходный код за день</h2><br>
Скачайте последнюю версию примера. Распакуйте архив и импортируйте проект в Eclipse.<br>
<img src="./tutorial_files/e273ed1a4ed342abb148c53ad824d8f3.png" hspace="4" vspace="4" align="left"><a href="http://www.kilobolt.com/uploads/1/2/5/7/12571940/day12.zip">day12.zip</a><br>
<br>
<br>
<br>
<br>
Так же <a href="http://jamescho7.com/zombiebird">тут</a> вы можете поиграться с тем, что у нас получилось.<br>
<br>
<br>
<img src="./tutorial_files/4f355491bc81468cbcb05427325b49ca.png"> <a href="http://habrahabr.ru/post/243471/#ContentList">К Оглавлению</a>
  	<div class="clear"></div>
    </div>
    
    
<ul class="tags">
	<li><a href="http://habrahabr.ru/search/?q=%5Blibgdx%5D&target_type=posts" rel="tag">libgdx</a></li><li>, <a href="http://habrahabr.ru/search/?q=%5Bgame%20development%5D&target_type=posts" rel="tag">game development</a></li><li>, <a href="http://habrahabr.ru/search/?q=%5Bjava%5D&target_type=posts" rel="tag">java</a></li><li>, <a href="http://habrahabr.ru/search/?q=%5Beclipse%5D&target_type=posts" rel="tag">eclipse</a></li><li>, <a href="http://habrahabr.ru/search/?q=%5Bflappy%20bird%5D&target_type=posts" rel="tag">flappy bird</a></li><li>, <a href="http://habrahabr.ru/search/?q=%5B%D0%BF%D0%B5%D1%80%D0%B5%D0%B2%D0%BE%D0%B4%5D&target_type=posts" rel="tag">перевод</a></li>
</ul>


    <div class="infopanel_wrapper">
	<div class="infopanel " id="infopanel_post_243471">

				<div class="voting   ">
	
						<span class="plus" title="Срок голосования истек."></span>
	
					<div class="mark positive ">
							<span class="score" title="Всего 111: ↑102 и ↓9">+93</span>
					</div>
					
						<span class="minus" title="Срок голосования истек."></span>
		
				</div>
	
		<div class="pageviews" title="Просмотры публикации">56963</div>
			
		<div class="favorite">
				<a class="add" title="Добавить в избранное" href="http://habrahabr.ru/post/243471/#" onclick="return posts_add_to_favorite(this, &#39;2&#39;, 243471)"> </a>
		</div>
		<div class="favs_count" title="Количество пользователей, добавивших публикацию в избранное">773</div>
		
		
			<div class="original-author">
				<a title="Автор оригинала: jamescho7" href="http://www.kilobolt.com/day-1-flappy-bird---an-in-depth-analysis.html">jamescho7</a>
			</div>
		
	
	
	
	
				<div class="author">
					<a title="Автор текста" href="http://habrahabr.ru/users/eliotik/">eliotik</a>
					<span class="rating" title="рейтинг пользователя">3,0</span>
				</div>
		
	

			<div class="share">
				<div class="twitter">
					<a href="http://twitter.com/intent/tweet?text=%5BLibGDX%5D+%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%B5%D0%BC+%D0%BA%D0%BB%D0%BE%D0%BD+Flappy+Bird+%E2%80%94+Zombie+Bird+http://habr.ru/p/243471/+via+%40habrahabr+%23habr" title="Опубликовать ссылку в Twitter" target="_blank"></a>
				</div>
				<div class="vkontakte">
					<a href="https://vk.com/share.php?url=http://habrahabr.ru/post/243471/" title="Опубликовать ссылку во ВКонтакте" onclick="window.open(this.href, &#39;Опубликовать ссылку во Вконтакте&#39;, &#39;width=800,height=300&#39;); return false"></a>
				</div>
				<div class="facebook">
					<a href="https://www.facebook.com/sharer/sharer.php?u=http://habrahabr.ru/post/243471/" title="Опубликовать ссылку в Facebook" onclick="window.open(this.href, &#39;Опубликовать ссылку в Facebook&#39;, &#39;width=640,height=436,toolbar=0,status=0&#39;); return false"></a>
				</div>
				<div class="googleplus">
					<a href="https://plus.google.com/share?url=http://habrahabr.ru/post/243471/" title="Опубликовать ссылку в Google Plus" onclick="window.open(this.href, &#39;Опубликовать ссылку в Google Plus&#39;, &#39;width=800,height=300&#39;); return false"></a>
				</div>
			</div>
	
	</div>
	<div class="clear"></div>
</div>




    
    
		
		
	</div>

    </div>

  	
  <div id="adriver_banner_132032996"></div>

  <script type="text/javascript">
      /** Для блоков гугла **/
      function requireAdsafe(file){
          var head = document.getElementsByTagName("head")[0];
          var script = document.createElement('script');
          script.src = file;
          script.type = 'text/javascript';
          head.appendChild(script);
      }

      function show_inner_banner_block(name, url){
          if( typeof(name) !== 'undefined'){
              //$.get('/html/'+name+'/1429261672/', function(html){
              $.get('http://special.habrahabr.ru/api/htmlblock/'+name+'/', function(html){
                  $('#adriver_banner_132032996').html(html);
                  $('.'+name+'_inner_banner').removeClass('hidden');
                  if( typeof(url) !== 'undefined'){
                      $('.'+name+'_inner_banner .block_url').attr('href', url);
                  }
              }, 'html')
          }
      }

        $(function(){
          var check_scroll_position = function() {
            var height = $(window).height();
            var scrollTop = $(window).scrollTop();
            var scrollBottom = $(window).scrollTop() + height;
            var blockTop = $('#adriver_banner_132032996').position().top;
            var show = scrollTop < blockTop && blockTop < scrollBottom;

            if( show ){
                $( window ).off('scroll', check_scroll_position);
                $( window ).trigger('show_bn3');
            }
          };

          $( window ).on('scroll', check_scroll_position);

          $( window ).on('show_bn3', function(){
            var keyword = '';
            if (typeof crtg_content !== 'undefined' && crtg_content) { keyword = crtg_content; }
            var custom = { 4:ar_duo1 };
                custom[1] = 'gdev';
                custom[2] = 'java';

            //if (true)
            //    show_inner_banner_block('raiffaizen2');
            //else
                new adriver("adriver_banner_132032996", {sid: 176776, bt: 52, bn: 3, custom: custom, keyword: keyword});
          });

          //$( window ).trigger('show_bn3');
        });
    </script>





      <div class="block_after_post">
        


<div class="block similar_posts">

    <div class="title">Похожие публикации</div>
    <div class="posts_list">
        <div class="post_item">
            <a class="post_name" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;similar_posts&#39;, $(this).parents(&#39;.similar_posts&#39;).hasClass(&#39;float_block&#39;) ? &#39;float&#39; : &#39;common&#39;); }" href="http://habrahabr.ru/post/246883/">6 уроков Flappy Bird для предпринимателей</a>
            <span class="when">26 декабря 2014 в 22:16</span>
        </div>
        <div class="post_item">
            <a class="post_name" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;similar_posts&#39;, $(this).parents(&#39;.similar_posts&#39;).hasClass(&#39;float_block&#39;) ? &#39;float&#39; : &#39;common&#39;); }" href="http://habrahabr.ru/post/238327/">Google Play Game Services в Libgdx</a>
            <span class="when">26 сентября 2014 в 18:14</span>
        </div>
        <div class="post_item">
            <a class="post_name" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;similar_posts&#39;, $(this).parents(&#39;.similar_posts&#39;).hasClass(&#39;float_block&#39;) ? &#39;float&#39; : &#39;common&#39;); }" href="http://habrahabr.ru/post/230733/">Портируем Flappy Bird на Gear 2</a>
            <span class="when">22 июля 2014 в 17:37</span>
        </div>
        <div class="post_item">
            <a class="post_name" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;similar_posts&#39;, $(this).parents(&#39;.similar_posts&#39;).hasClass(&#39;float_block&#39;) ? &#39;float&#39; : &#39;common&#39;); }" href="http://habrahabr.ru/post/221133/">JSR 133 (Java Memory Model) FAQ (перевод)</a>
            <span class="when">28 апреля 2014 в 14:51</span>
        </div>
        <div class="post_item">
            <a class="post_name" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;similar_posts&#39;, $(this).parents(&#39;.similar_posts&#39;).hasClass(&#39;float_block&#39;) ? &#39;float&#39; : &#39;common&#39;); }" href="http://habrahabr.ru/post/220399/">«Flappy Bird» до 1КБ</a>
            <span class="when">22 апреля 2014 в 19:24</span>
        </div>
        <div class="post_item">
            <a class="post_name" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;similar_posts&#39;, $(this).parents(&#39;.similar_posts&#39;).hasClass(&#39;float_block&#39;) ? &#39;float&#39; : &#39;common&#39;); }" href="http://habrahabr.ru/post/217645/">Как Минковский во Flappy Bird играл</a>
            <span class="when">31 марта 2014 в 11:36</span>
        </div>
        <div class="post_item">
            <a class="post_name" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;similar_posts&#39;, $(this).parents(&#39;.similar_posts&#39;).hasClass(&#39;float_block&#39;) ? &#39;float&#39; : &#39;common&#39;); }" href="http://habrahabr.ru/post/214013/">Разрабатываем Flappy Bird на Phaser (Часть I)</a>
            <span class="when">16 марта 2014 в 14:45</span>
        </div>
        <div class="post_item">
            <a class="post_name" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;similar_posts&#39;, $(this).parents(&#39;.similar_posts&#39;).hasClass(&#39;float_block&#39;) ? &#39;float&#39; : &#39;common&#39;); }" href="http://habrahabr.ru/post/215913/">Flappy Bot для Flappy Bird</a>
            <span class="when">15 марта 2014 в 00:47</span>
        </div>
        <div class="post_item">
            <a class="post_name" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;similar_posts&#39;, $(this).parents(&#39;.similar_posts&#39;).hasClass(&#39;float_block&#39;) ? &#39;float&#39; : &#39;common&#39;); }" href="http://habrahabr.ru/post/212383/">Создаем прототип игры Flappy Bird под Android на LibGDX</a>
            <span class="when">12 февраля 2014 в 17:22</span>
        </div>
        <div class="post_item">
            <a class="post_name" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;similar_posts&#39;, $(this).parents(&#39;.similar_posts&#39;).hasClass(&#39;float_block&#39;) ? &#39;float&#39; : &#39;common&#39;); }" href="http://habrahabr.ru/post/212295/">Создаем клон игры Flappy Bird, используя движок физики iOS7</a>
            <span class="when">11 февраля 2014 в 23:10</span>
        </div>
    </div>
</div>



      </div>

  		    <div class="comments_list " id="comments">

        <h2 class="title ">Комментарии (<span id="comments_count">28</span>)
            		<span class="subscribe_comments">
			отслеживать новые: 
			<label><input type="checkbox" id="subscribe_comments" rel="{target_type:&#39;2&#39;,target_id:243471 }"> в почте</label>
			<label><input type="checkbox" id="tracker_comments" rel="{target_type:&#39;2&#39;,target_id:243471 }"> в трекере</label>
		</span>


        </h2>

        

            <div class="comment_item" id="comment_8130931">

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="8130931">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_8130931" class="voting   ">
                <span class="minus" title="Срок голосования истек "></span>
                <span class="plus" title="Срок голосования истек "></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 11: ↑8 и ↓3">+5</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/SerafimArts/" class="avatar"><img src="./tutorial_files/dcb44f5e1ad75b467e18e67a24eaf291_small.png" alt=""></a>
            <a href="http://habrahabr.ru/users/SerafimArts/" class="username">SerafimArts</a>
            <time>18 ноября 2014 в 02:35<span class="time_changed"> (комментарий был изменён)</span></time>

            <a href="http://habrahabr.ru/post/243471/#comment_8130931" class="link_to_comment">#</a>
            
                    <a href="http://habrahabr.ru/post/243471/#" class="favorite add" onclick="return comments_add_to_favorite(this, &#39;3&#39;, 8130931 )" title="В избранное"></a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Это просто… просто… Эпичный пост! Поделите на несколько частей, прошу. Где-то на дне третьем-четвёртом начинается взлом мозга и текст перестаёт читаться.<br>
<br>
З.Ы. По теме — недавно начал присматриваться к libgdx, тем более (по секрету, никому не говорите), <a href="http://habrahabr.ru/users/dim_s/" class="user_link">dim_s</a> упоминал о прикрутке оного к Jphp.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
		            <a href="http://habrahabr.ru/post/243471/#reply" class="reply_link" onclick="return comment_show_reply_form(8130931 )">ответить</a>
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_8130931">
        <div class="comment_item" id="comment_8130979">

    <span class="parent_id" data-parent_id="8130931"></span>
    <div class="comment_body ">
        <div class="info  " rel="8130979">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_8130979" class="voting   ">
                <span class="minus" title="Срок голосования истек "></span>
                <span class="plus" title="Срок голосования истек "></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: ↑0 и ↓0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/SystemXFiles/" class="avatar"><img src="./tutorial_files/9ba8bd0cccd6be7700d730d0ea30928e_small.png" alt=""></a>
            <a href="http://habrahabr.ru/users/SystemXFiles/" class="username">SystemXFiles</a>
            <time>18 ноября 2014 в 05:05</time>

            <a href="http://habrahabr.ru/post/243471/#comment_8130979" class="link_to_comment">#</a>
            
                    <a href="http://habrahabr.ru/post/243471/#" class="favorite add" onclick="return comments_add_to_favorite(this, &#39;3&#39;, 8130979 )" title="В избранное"></a>
                <div class="show_tree" data-id="8130979" data-parent_id="8130931" title="Показать ветку комментариев">↵</div>
                <a href="http://habrahabr.ru/post/243471/#comment_8130931" data-id="8130979" data-parent_id="8130931" class="to_parent">↑</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Я как статью увидел, тут же появилась мысль переписать эту игру на JPHP в будущем. <br>
Статья в целом вообще радует глаз, даже несмотря на размер. Видно оформление делали с душой.<br>
<br>
P.S. Айяйяй палить товарища так =)
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
		            <a href="http://habrahabr.ru/post/243471/#reply" class="reply_link" onclick="return comment_show_reply_form(8130979 )">ответить</a>
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_8130979">
    </div>
</div>

        <div class="comment_item" id="comment_8131003">

    <span class="parent_id" data-parent_id="8130931"></span>
    <div class="comment_body ">
        <div class="info  " rel="8131003">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_8131003" class="voting   ">
                <span class="minus" title="Срок голосования истек "></span>
                <span class="plus" title="Срок голосования истек "></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 7: ↑6 и ↓1">+5</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/Indexator/" class="avatar"><img src="./tutorial_files/f9e83c5e1b203b5179ccb1026ab3ad1f_small.gif" alt=""></a>
            <a href="http://habrahabr.ru/users/Indexator/" class="username">Indexator</a>
            <time>18 ноября 2014 в 06:09</time>

            <a href="http://habrahabr.ru/post/243471/#comment_8131003" class="link_to_comment">#</a>
            
                    <a href="http://habrahabr.ru/post/243471/#" class="favorite add" onclick="return comments_add_to_favorite(this, &#39;3&#39;, 8131003 )" title="В избранное"></a>
                <div class="show_tree" data-id="8131003" data-parent_id="8130931" title="Показать ветку комментариев">↵</div>
                <a href="http://habrahabr.ru/post/243471/#comment_8130931" data-id="8131003" data-parent_id="8130931" class="to_parent">↑</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            <blockquote>Поделите на несколько частей, прошу.</blockquote> Не надо так!<br>
<blockquote>Где-то на дне третьем-четвёртом начинается взлом мозга и текст перестаёт читаться.</blockquote> <s><i>Точите</i></s> Читайте пореже…
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
		            <a href="http://habrahabr.ru/post/243471/#reply" class="reply_link" onclick="return comment_show_reply_form(8131003 )">ответить</a>
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_8131003">
        <div class="comment_item" id="comment_8131257">

    <span class="parent_id" data-parent_id="8131003"></span>
    <div class="comment_body ">
        <div class="info  " rel="8131257">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_8131257" class="voting   ">
                <span class="minus" title="Срок голосования истек "></span>
                <span class="plus" title="Срок голосования истек "></span>
                <div class="mark  negative">
                    <span class="score" title="Всего 4: ↑1 и ↓3">–2</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/SerafimArts/" class="avatar"><img src="./tutorial_files/dcb44f5e1ad75b467e18e67a24eaf291_small.png" alt=""></a>
            <a href="http://habrahabr.ru/users/SerafimArts/" class="username">SerafimArts</a>
            <time>18 ноября 2014 в 10:56</time>

            <a href="http://habrahabr.ru/post/243471/#comment_8131257" class="link_to_comment">#</a>
            
                    <a href="http://habrahabr.ru/post/243471/#" class="favorite add" onclick="return comments_add_to_favorite(this, &#39;3&#39;, 8131257 )" title="В избранное"></a>
                <div class="show_tree" data-id="8131257" data-parent_id="8131003" title="Показать ветку комментариев">↵</div>
                <a href="http://habrahabr.ru/post/243471/#comment_8131003" data-id="8131257" data-parent_id="8131003" class="to_parent">↑</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format bad bad2">
            Почему же не надо? Взять к примеру вот это: <a href="http://habrahabr.ru/post/241666/">habrahabr.ru/post/241666/</a> Помимо того, что читается очень просто и вдохновенно, ещё и каждая статья ожидается, прям как новая серия игры престолов ;)
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
		            <a href="http://habrahabr.ru/post/243471/#reply" class="reply_link" onclick="return comment_show_reply_form(8131257 )">ответить</a>
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_8131257">
        <div class="comment_item" id="comment_8132219">

    <span class="parent_id" data-parent_id="8131257"></span>
    <div class="comment_body ">
        <div class="info  " rel="8132219">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_8132219" class="voting   ">
                <span class="minus" title="Срок голосования истек "></span>
                <span class="plus" title="Срок голосования истек "></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 2: ↑2 и ↓0">+2</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/Shultc/" class="avatar"><img src="./tutorial_files/15152b70fde635a3e04d0b4040d8e2d4_small.jpg" alt=""></a>
            <a href="http://habrahabr.ru/users/Shultc/" class="username">Shultc</a>
            <time>18 ноября 2014 в 17:18</time>

            <a href="http://habrahabr.ru/post/243471/#comment_8132219" class="link_to_comment">#</a>
            
                    <a href="http://habrahabr.ru/post/243471/#" class="favorite add" onclick="return comments_add_to_favorite(this, &#39;3&#39;, 8132219 )" title="В избранное"></a>
                <div class="show_tree" data-id="8132219" data-parent_id="8131257" title="Показать ветку комментариев">↵</div>
                <a href="http://habrahabr.ru/post/243471/#comment_8131257" data-id="8132219" data-parent_id="8131257" class="to_parent">↑</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Потому что не надо ничего ждать. Всё уже есть на месте. Если вам тяжело читать подряд, добавьте в Избранное, и продолжайте чтение, когда вам удобно. Но не надо других удовольствия лишать.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
		            <a href="http://habrahabr.ru/post/243471/#reply" class="reply_link" onclick="return comment_show_reply_form(8132219 )">ответить</a>
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_8132219">
        <div class="comment_item" id="comment_8132415">

    <span class="parent_id" data-parent_id="8132219"></span>
    <div class="comment_body ">
        <div class="info  " rel="8132415">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_8132415" class="voting   ">
                <span class="minus" title="Срок голосования истек "></span>
                <span class="plus" title="Срок голосования истек "></span>
                <div class="mark  negative">
                    <span class="score" title="Всего 4: ↑0 и ↓4">–4</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/SerafimArts/" class="avatar"><img src="./tutorial_files/dcb44f5e1ad75b467e18e67a24eaf291_small.png" alt=""></a>
            <a href="http://habrahabr.ru/users/SerafimArts/" class="username">SerafimArts</a>
            <time>18 ноября 2014 в 18:27</time>

            <a href="http://habrahabr.ru/post/243471/#comment_8132415" class="link_to_comment">#</a>
            
                    <a href="http://habrahabr.ru/post/243471/#" class="favorite add" onclick="return comments_add_to_favorite(this, &#39;3&#39;, 8132415 )" title="В избранное"></a>
                <div class="show_tree" data-id="8132415" data-parent_id="8132219" title="Показать ветку комментариев">↵</div>
                <a href="http://habrahabr.ru/post/243471/#comment_8132219" data-id="8132415" data-parent_id="8132219" class="to_parent">↑</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format bad bad4">
            Стандартная практика делать пагинацию для длинных страниц — для слабаков, я уже понял. Просто статья в 124 тысячи 37 пикселя в высоту, лично для меня — слишком много, чтобы запомнить где я закончил читать, увы. Но т.к. это лично моё мнение — пусть оно останется лично моим, может действительно так лучше.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
		            <a href="http://habrahabr.ru/post/243471/#reply" class="reply_link" onclick="return comment_show_reply_form(8132415 )">ответить</a>
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_8132415">
        <div class="comment_item" id="comment_8132459">

    <span class="parent_id" data-parent_id="8132415"></span>
    <div class="comment_body ">
        <div class="info  " rel="8132459">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_8132459" class="voting   ">
                <span class="minus" title="Срок голосования истек "></span>
                <span class="plus" title="Срок голосования истек "></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 4: ↑4 и ↓0">+4</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/Shultc/" class="avatar"><img src="./tutorial_files/15152b70fde635a3e04d0b4040d8e2d4_small.jpg" alt=""></a>
            <a href="http://habrahabr.ru/users/Shultc/" class="username">Shultc</a>
            <time>18 ноября 2014 в 18:41</time>

            <a href="http://habrahabr.ru/post/243471/#comment_8132459" class="link_to_comment">#</a>
            
                    <a href="http://habrahabr.ru/post/243471/#" class="favorite add" onclick="return comments_add_to_favorite(this, &#39;3&#39;, 8132459 )" title="В избранное"></a>
                <div class="show_tree" data-id="8132459" data-parent_id="8132415" title="Показать ветку комментариев">↵</div>
                <a href="http://habrahabr.ru/post/243471/#comment_8132415" data-id="8132459" data-parent_id="8132415" class="to_parent">↑</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Для этого автор стати был таким молодцом, что аж создал раздел «Содержание» со ссылками! Спасибо вам, <a href="http://habrahabr.ru/users/eliotik/" class="user_link">eliotik</a>!<br>
<br>
<a href="http://habrahabr.ru/users/serafimarts/" class="user_link">SerafimArts</a>, ваши притензии могли бы иметь место, если бы перед нами была огромная простыня текста. Тут же хорошо структурированная статья. Каждый может её читать как ему удобно.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
		            <a href="http://habrahabr.ru/post/243471/#reply" class="reply_link" onclick="return comment_show_reply_form(8132459 )">ответить</a>
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_8132459">
    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

        <div class="comment_item" id="comment_8146207">

    <span class="parent_id" data-parent_id="8130931"></span>
    <div class="comment_body ">
        <div class="info  " rel="8146207">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_8146207" class="voting   ">
                <span class="minus" title="Срок голосования истек "></span>
                <span class="plus" title="Срок голосования истек "></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: ↑0 и ↓0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/seyfer/" class="avatar"><img src="./tutorial_files/46c356757c6215332442fa494512e2e6_small.jpg" alt=""></a>
            <a href="http://habrahabr.ru/users/seyfer/" class="username">seyfer</a>
            <time>26 ноября 2014 в 08:43</time>

            <a href="http://habrahabr.ru/post/243471/#comment_8146207" class="link_to_comment">#</a>
            
                    <a href="http://habrahabr.ru/post/243471/#" class="favorite add" onclick="return comments_add_to_favorite(this, &#39;3&#39;, 8146207 )" title="В избранное"></a>
                <div class="show_tree" data-id="8146207" data-parent_id="8130931" title="Показать ветку комментариев">↵</div>
                <a href="http://habrahabr.ru/post/243471/#comment_8130931" data-id="8146207" data-parent_id="8130931" class="to_parent">↑</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Согласен. лучший мануал что я читал ever.<br>
<br>
з.ы. если только <a href="http://habrahabr.ru/users/1nt3g3r/" class="user_link">1nt3g3r</a> не напишет исправленную версию, как он обещал <a href="http://habrahabr.ru/post/243471/?utm_campaign=email_digest&utm_source=email_habrahabr&utm_medium=email_week_20141125&utm_content=link2post#comment_8131211">#comment_8131211</a>
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
		            <a href="http://habrahabr.ru/post/243471/#reply" class="reply_link" onclick="return comment_show_reply_form(8146207 )">ответить</a>
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_8146207">
    </div>
</div>

    </div>
</div>

            <div class="comment_item" id="comment_8130967">

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="8130967">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_8130967" class="voting   ">
                <span class="minus" title="Срок голосования истек "></span>
                <span class="plus" title="Срок голосования истек "></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 4: ↑4 и ↓0">+4</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/AndersonDunai/" class="avatar"><img src="./tutorial_files/fe74bfa65258d63d80586ae200dab653_small.png" alt=""></a>
            <a href="http://habrahabr.ru/users/AndersonDunai/" class="username">AndersonDunai</a>
            <time>18 ноября 2014 в 04:11<span class="time_changed"> (комментарий был изменён)</span></time>

            <a href="http://habrahabr.ru/post/243471/#comment_8130967" class="link_to_comment">#</a>
            
                    <a href="http://habrahabr.ru/post/243471/#" class="favorite add" onclick="return comments_add_to_favorite(this, &#39;3&#39;, 8130967 )" title="В избранное"></a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Ого. Действительно огромная статья, но и занимательная. Пост месяца, я б сказал. Спасибо! Как раз интересовал libGDX.<br>
<br>
<blockquote>на глаз ширина экрана примерно 135-136 пикселей</blockquote><br>
Зорький у вас глаз :)
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
		            <a href="http://habrahabr.ru/post/243471/#reply" class="reply_link" onclick="return comment_show_reply_form(8130967 )">ответить</a>
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_8130967">
    </div>
</div>

            <div class="comment_item" id="comment_8130981">

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="8130981">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_8130981" class="voting   ">
                <span class="minus" title="Срок голосования истек "></span>
                <span class="plus" title="Срок голосования истек "></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: ↑0 и ↓0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/Indexator/" class="avatar"><img src="./tutorial_files/f9e83c5e1b203b5179ccb1026ab3ad1f_small.gif" alt=""></a>
            <a href="http://habrahabr.ru/users/Indexator/" class="username">Indexator</a>
            <time>18 ноября 2014 в 05:14</time>

            <a href="http://habrahabr.ru/post/243471/#comment_8130981" class="link_to_comment">#</a>
            
                    <a href="http://habrahabr.ru/post/243471/#" class="favorite add" onclick="return comments_add_to_favorite(this, &#39;3&#39;, 8130981 )" title="В избранное"></a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Воу! Серьезный докУмент! Спасибище! :)<br>
<br>
<i>PS:</i><br>
<i>Когда уже придумают заливку данных с компа прямо в мозг?!</i> &gt;__&lt;<br>
<i>Авторы DIY хаба, ну же!</i>
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
		            <a href="http://habrahabr.ru/post/243471/#reply" class="reply_link" onclick="return comment_show_reply_form(8130981 )">ответить</a>
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_8130981">
    </div>
</div>

            <div class="comment_item" id="comment_8130983">

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="8130983">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_8130983" class="voting   ">
                <span class="minus" title="Срок голосования истек "></span>
                <span class="plus" title="Срок голосования истек "></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: ↑0 и ↓0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/Indexator/" class="avatar"><img src="./tutorial_files/f9e83c5e1b203b5179ccb1026ab3ad1f_small.gif" alt=""></a>
            <a href="http://habrahabr.ru/users/Indexator/" class="username">Indexator</a>
            <time>18 ноября 2014 в 05:19</time>

            <a href="http://habrahabr.ru/post/243471/#comment_8130983" class="link_to_comment">#</a>
            
                    <a href="http://habrahabr.ru/post/243471/#" class="favorite add" onclick="return comments_add_to_favorite(this, &#39;3&#39;, 8130983 )" title="В избранное"></a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Кстати, и когда уже libGDX начнет поддерживать WP? :(
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
		            <a href="http://habrahabr.ru/post/243471/#reply" class="reply_link" onclick="return comment_show_reply_form(8130983 )">ответить</a>
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_8130983">
        <div class="comment_item" id="comment_8131051">

    <span class="parent_id" data-parent_id="8130983"></span>
    <div class="comment_body ">
        <div class="info  " rel="8131051">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_8131051" class="voting   ">
                <span class="minus" title="Срок голосования истек "></span>
                <span class="plus" title="Срок голосования истек "></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: ↑1 и ↓0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/4ex/" class="avatar"><img src="./tutorial_files/stub-user-small.gif" alt=""></a>
            <a href="http://habrahabr.ru/users/4ex/" class="username">4ex</a>
            <time>18 ноября 2014 в 08:43</time>

            <a href="http://habrahabr.ru/post/243471/#comment_8131051" class="link_to_comment">#</a>
            
                    <a href="http://habrahabr.ru/post/243471/#" class="favorite add" onclick="return comments_add_to_favorite(this, &#39;3&#39;, 8131051 )" title="В избранное"></a>
                <div class="show_tree" data-id="8131051" data-parent_id="8130983" title="Показать ветку комментариев">↵</div>
                <a href="http://habrahabr.ru/post/243471/#comment_8130983" data-id="8131051" data-parent_id="8130983" class="to_parent">↑</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Был небольшой прогресс в последнее время: <a href="http://www.badlogicgames.com/forum/viewtopic.php?f=17&t=14766&start=10#p72332">http://www.badlogicgames.com/forum/viewtopic.php?f=17&amp;t=14766&amp;start=10#p72332</a>. Но пока сообществу это не особенно интересно.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
		            <a href="http://habrahabr.ru/post/243471/#reply" class="reply_link" onclick="return comment_show_reply_form(8131051 )">ответить</a>
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_8131051">
        <div class="comment_item" id="comment_8132417">

    <span class="parent_id" data-parent_id="8131051"></span>
    <div class="comment_body ">
        <div class="info  " rel="8132417">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_8132417" class="voting   ">
                <span class="minus" title="Срок голосования истек "></span>
                <span class="plus" title="Срок голосования истек "></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: ↑1 и ↓0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/4ex/" class="avatar"><img src="./tutorial_files/stub-user-small.gif" alt=""></a>
            <a href="http://habrahabr.ru/users/4ex/" class="username">4ex</a>
            <time>18 ноября 2014 в 18:27</time>

            <a href="http://habrahabr.ru/post/243471/#comment_8132417" class="link_to_comment">#</a>
            
                    <a href="http://habrahabr.ru/post/243471/#" class="favorite add" onclick="return comments_add_to_favorite(this, &#39;3&#39;, 8132417 )" title="В избранное"></a>
                <div class="show_tree" data-id="8132417" data-parent_id="8131051" title="Показать ветку комментариев">↵</div>
                <a href="http://habrahabr.ru/post/243471/#comment_8131051" data-id="8132417" data-parent_id="8131051" class="to_parent">↑</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            И вдогонку <a href="http://www.badlogicgames.com/forum/viewtopic.php?f=17&t=14766&start=20#p73157">сегодняшнее обновление</a>. Автор утверждает, что запустил свою игру на Windows Phone 8.1
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
		            <a href="http://habrahabr.ru/post/243471/#reply" class="reply_link" onclick="return comment_show_reply_form(8132417 )">ответить</a>
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_8132417">
    </div>
</div>

    </div>
</div>

    </div>
</div>

            <div class="comment_item" id="comment_8131033">

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="8131033">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_8131033" class="voting   ">
                <span class="minus" title="Срок голосования истек "></span>
                <span class="plus" title="Срок голосования истек "></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: ↑0 и ↓0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/Lerg/" class="avatar"><img src="./tutorial_files/2a862e1b0e239623ab1f82abd32aef0d_small.png" alt=""></a>
            <a href="http://habrahabr.ru/users/Lerg/" class="username">Lerg</a>
            <time>18 ноября 2014 в 07:20</time>

            <a href="http://habrahabr.ru/post/243471/#comment_8131033" class="link_to_comment">#</a>
            
                    <a href="http://habrahabr.ru/post/243471/#" class="favorite add" onclick="return comments_add_to_favorite(this, &#39;3&#39;, 8131033 )" title="В избранное"></a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Интересная статья, спасибо. Я использую другой фреймворк для игр и тоже делал клон этой игры. Было интересно узнать и сравнить как то же самое делается в LibGDX и Java. Как и предполагал кода больше, но можно настроить всё намного тоньше.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
		            <a href="http://habrahabr.ru/post/243471/#reply" class="reply_link" onclick="return comment_show_reply_form(8131033 )">ответить</a>
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_8131033">
    </div>
</div>

            <div class="comment_item" id="comment_8131099">

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="8131099">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_8131099" class="voting   ">
                <span class="minus" title="Срок голосования истек "></span>
                <span class="plus" title="Срок голосования истек "></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: ↑0 и ↓0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/niceteg/" class="avatar"><img src="./tutorial_files/769fa261274e2bd80224bf6aaa195232_small.jpg" alt=""></a>
            <a href="http://habrahabr.ru/users/niceteg/" class="username">niceteg</a>
            <time>18 ноября 2014 в 09:23</time>

            <a href="http://habrahabr.ru/post/243471/#comment_8131099" class="link_to_comment">#</a>
            
                    <a href="http://habrahabr.ru/post/243471/#" class="favorite add" onclick="return comments_add_to_favorite(this, &#39;3&#39;, 8131099 )" title="В избранное"></a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Спасибо! Именно libGDX сейчас и хочеться поучить. Как всегда, вовремя! 
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
		            <a href="http://habrahabr.ru/post/243471/#reply" class="reply_link" onclick="return comment_show_reply_form(8131099 )">ответить</a>
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_8131099">
    </div>
</div>

            <div class="comment_item" id="comment_8131211">

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="8131211">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_8131211" class="voting   ">
                <span class="minus" title="Срок голосования истек "></span>
                <span class="plus" title="Срок голосования истек "></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 14: ↑14 и ↓0">+14</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/1nt3g3r/" class="avatar"><img src="./tutorial_files/45fdeca0c88c5a443b2810c84720c2b9_small.jpg" alt=""></a>
            <a href="http://habrahabr.ru/users/1nt3g3r/" class="username">1nt3g3r</a>
            <time>18 ноября 2014 в 10:30</time>

            <a href="http://habrahabr.ru/post/243471/#comment_8131211" class="link_to_comment">#</a>
            
                    <a href="http://habrahabr.ru/post/243471/#" class="favorite add" onclick="return comments_add_to_favorite(this, &#39;3&#39;, 8131211 )" title="В избранное"></a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Прочел статью, заметил несколько интересных моментов:<br>
<br>
1) Импорт проекта. Как замечено в статье, используется Gradle, поэтому и импортировать проекты нужно именно как Gradle. То есть, нужно установить Gradle плагин, после этого использовать Import-&gt;Gradle-&gt;Gradle Project. Способ, что в статье, вряд ли будет работать. Еще — скриншоты явно не чистого Eclipse, а Android Studio. Разве что Android Studio автоматически умеет определять тип проекта и импортировать его.<br>
Вот пруф из официальной вики libGDX — <br>
<br>
А дальше по тексту сказано — «Откройте gdx-setup-ui.jar, как мы проделали это в Дне 2.». И приводится другой скриншот, из старого установщика. То есть, в libGDX есть два установщика. Устаревший делает все как сказано в туториале сначала, и не требует Gradle. Но у в статье перемешаны скриншоты из нового и старого, а инструкции все для старого.<br>
<br>
2) Использование стандартных коллекций — не лучшее решение. В libGDX есть свои коллекции с преферансом и поэтессами. Из плюсов библиотек — они экономнее относятся к памяти (при итерировании for(String s: array) не создается новый итератор, а переиспользуется текущий), интерфейс обьективно удобней (тот же Array можно использовать и как массив, и как стек), удобная работа с пулами (можно сразу освободить Array обьектов в пул).<br>
Ссылка на коллекции в libGDX — <br>
<br>
3) Использование Gdx.app.log(«GameScreen FPS», (1/delta) + "") — это «самопальное», хоть и правильное решение. Для этих целей в libGDX есть стандартный класс — <br>
<br>
4) «Я забыл упомянуть (вы скорее всего уже и сами поняли), что мы будем использовать Y-Вниз» — по умолчанию в libGDX используется система координат, где (0, 0) — левый нижний угол, то есть У-вверх.<br>
<br>
5) Самопальный AssetLoader — это подходит лишь для небольших проектов. В libGDX есть встроенный менеджер ресурсов — AssetManager, который позволяет грузить текстуры, звуки, шрифты и другие ресурсы. Менеджер расширяемый, можно писать свои загрузчики для собственных типов ресурсов. Также он позволяет делать асинхронную загрузку (можно делать загрузочный экран с отображением прогресса). Ссылка — <br>
<br>
6) Использование ShapeRenderer — это неэкономичная штука. Если хотите залить задний фон чем-то — лучше используйте для этого SpriteBatch с текстурой. Также совместное использование SpriteBatch и ShapeRenderer может вызвать проблемы. ShapeRenderer рекомендуется использовать для отладки. Вот здесь люди жалуются на медленную скорость работы ShapeRenderer — <br>
<br>
Вообще, такое впечатление, что автор статьи использовал какую-то старую версию libGDX. Эту же игру можно было бы очень просто написать, используя Stage и Actor. Отпадает сразу целая куча проблем:<br>
<br>
1) Мультиэкранность — Stage умеет автоматически растягивать экран, сохраняя пропорции<br>
 2) Проблема с Y-down — не нужно вращать текстуру<br>
 3) Удобный ввод — уже реализован удобный UI с кнопочками, скроллами, текстовыми полями и всем таким<br>
 4) Tween Engine — не нужно его использовать, есть механизм Actions, который и удобней, и быстрее, и экономичней (Actions возвращаются в пул после использования).<br>
<br>
Также я не уловил момента с текстурой. Как я понял, там текстурный атлас — но не увидел файла описания к этому атласу. Если его нет, а мы указываем вручную координаты нужных кусков — это рукалицо. Я так делал когда-то тоже, это получается ужас в сопровождении. Есть утилита GdxTexturePacker — она делает атласы, потом одной строчкой кода они грузятся. Есть встроенные в libGDX классы которые тоже умеют делать атласы.<br>
<br>
Использование wav — как по мне, лучше использовать mp3. Банально занимает меньше места, а за счет того, что звуки можно грузить в отдельном потоке, паралельно с текстурами, загрузка не займет больше времени, а результирующий файл игры будет меньше.<br>
<br>
Не сочтите, что я придираюсь, это хорошо, что появляются такие статьи. Дело в том, что я пишу на libGDX уже три года, и такие мелочи замечаются на автомате. Данную игру можно сделать за день, используя все возможности libGDX, а не используя его лишь как рендерер.<br>
<br>
В общем, за статью как переводчику вам плюс, но данную игру можно было бы написать намного проще. Если кому-то будет интересно — могу на днях написать более правильный, на мое мнение, туториал.<br>
<br>
Спасибо за прочтение столь длинной простыни текста!<br>

        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
		            <a href="http://habrahabr.ru/post/243471/#reply" class="reply_link" onclick="return comment_show_reply_form(8131211 )">ответить</a>
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_8131211">
        <div class="comment_item" id="comment_8131225">

    <span class="parent_id" data-parent_id="8131211"></span>
    <div class="comment_body ">
        <div class="info  is_topic_starter  " rel="8131225">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_8131225" class="voting   ">
                <span class="minus" title="Срок голосования истек "></span>
                <span class="plus" title="Срок голосования истек "></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 4: ↑4 и ↓0">+4</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/eliotik/" class="avatar"><img src="./tutorial_files/stub-user-small.gif" alt=""></a>
            <a href="http://habrahabr.ru/users/eliotik/" class="username">eliotik</a>
            <time>18 ноября 2014 в 10:39</time>

            <a href="http://habrahabr.ru/post/243471/#comment_8131225" class="link_to_comment">#</a>
            
                    <a href="http://habrahabr.ru/post/243471/#" class="favorite add" onclick="return comments_add_to_favorite(this, &#39;3&#39;, 8131225 )" title="В избранное"></a>
                <div class="show_tree" data-id="8131225" data-parent_id="8131211" title="Показать ветку комментариев">↵</div>
                <a href="http://habrahabr.ru/post/243471/#comment_8131211" data-id="8131225" data-parent_id="8131211" class="to_parent">↑</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Спасибо за отличный комментарий! Вчера уже не хватило сил добавить пару слов от себя, но вы полностью правы. Можно было использовать Stage и Actor, а так же вместо UTE использовать Actions, а для UI использовать Scene2D.<br>
Я сейчас сидел дописывал это как эпилог, но ваш комментарий все сделал за меня. Спасибо. Жаль только что ссылки в комментарии съелись.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
		            <a href="http://habrahabr.ru/post/243471/#reply" class="reply_link" onclick="return comment_show_reply_form(8131225 )">ответить</a>
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_8131225">
    </div>
</div>

        <div class="comment_item" id="comment_8131233">

    <span class="parent_id" data-parent_id="8131211"></span>
    <div class="comment_body ">
        <div class="info  is_topic_starter  " rel="8131233">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_8131233" class="voting   ">
                <span class="minus" title="Срок голосования истек "></span>
                <span class="plus" title="Срок голосования истек "></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 8: ↑8 и ↓0">+8</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/eliotik/" class="avatar"><img src="./tutorial_files/stub-user-small.gif" alt=""></a>
            <a href="http://habrahabr.ru/users/eliotik/" class="username">eliotik</a>
            <time>18 ноября 2014 в 10:48</time>

            <a href="http://habrahabr.ru/post/243471/#comment_8131233" class="link_to_comment">#</a>
            
                    <a href="http://habrahabr.ru/post/243471/#" class="favorite add" onclick="return comments_add_to_favorite(this, &#39;3&#39;, 8131233 )" title="В избранное"></a>
                <div class="show_tree" data-id="8131233" data-parent_id="8131211" title="Показать ветку комментариев">↵</div>
                <a href="http://habrahabr.ru/post/243471/#comment_8131211" data-id="8131233" data-parent_id="8131211" class="to_parent">↑</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            <blockquote>Если кому-то будет интересно — могу на днях написать более правильный, на мое мнение, туториал.</blockquote><br>
Было бы великолепно.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
		            <a href="http://habrahabr.ru/post/243471/#reply" class="reply_link" onclick="return comment_show_reply_form(8131233 )">ответить</a>
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_8131233">
    </div>
</div>

        <div class="comment_item" id="comment_8132443">

    <span class="parent_id" data-parent_id="8131211"></span>
    <div class="comment_body ">
        <div class="info  " rel="8132443">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_8132443" class="voting   ">
                <span class="minus" title="Срок голосования истек "></span>
                <span class="plus" title="Срок голосования истек "></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: ↑0 и ↓0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/stepanp/" class="avatar"><img src="./tutorial_files/stub-user-small.gif" alt=""></a>
            <a href="http://habrahabr.ru/users/stepanp/" class="username">stepanp</a>
            <time>18 ноября 2014 в 18:36</time>

            <a href="http://habrahabr.ru/post/243471/#comment_8132443" class="link_to_comment">#</a>
            
                    <a href="http://habrahabr.ru/post/243471/#" class="favorite add" onclick="return comments_add_to_favorite(this, &#39;3&#39;, 8132443 )" title="В избранное"></a>
                <div class="show_tree" data-id="8132443" data-parent_id="8131211" title="Показать ветку комментариев">↵</div>
                <a href="http://habrahabr.ru/post/243471/#comment_8131211" data-id="8132443" data-parent_id="8131211" class="to_parent">↑</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            <blockquote>Использование wav — как по мне, лучше использовать mp3. Банально занимает меньше места, а за счет того, что звуки можно грузить в отдельном потоке, паралельно с текстурами, загрузка не займет больше времени, а результирующий файл игры будет меньше.</blockquote><br>
По опыту, лучше использовать ogg. Не знаю как сейчас, а пару лет назад mp3 могло не на всех девайсах работать в libgdx'е
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
		            <a href="http://habrahabr.ru/post/243471/#reply" class="reply_link" onclick="return comment_show_reply_form(8132443 )">ответить</a>
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_8132443">
        <div class="comment_item" id="comment_8133779">

    <span class="parent_id" data-parent_id="8132443"></span>
    <div class="comment_body ">
        <div class="info  " rel="8133779">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_8133779" class="voting   ">
                <span class="minus" title="Срок голосования истек "></span>
                <span class="plus" title="Срок голосования истек "></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: ↑0 и ↓0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/1nt3g3r/" class="avatar"><img src="./tutorial_files/45fdeca0c88c5a443b2810c84720c2b9_small.jpg" alt=""></a>
            <a href="http://habrahabr.ru/users/1nt3g3r/" class="username">1nt3g3r</a>
            <time>19 ноября 2014 в 13:06</time>

            <a href="http://habrahabr.ru/post/243471/#comment_8133779" class="link_to_comment">#</a>
            
                    <a href="http://habrahabr.ru/post/243471/#" class="favorite add" onclick="return comments_add_to_favorite(this, &#39;3&#39;, 8133779 )" title="В избранное"></a>
                <div class="show_tree" data-id="8133779" data-parent_id="8132443" title="Показать ветку комментариев">↵</div>
                <a href="http://habrahabr.ru/post/243471/#comment_8132443" data-id="8133779" data-parent_id="8132443" class="to_parent">↑</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Да, вы правы, я сталкивался с похожей проблемой. Если точнее, у меня mp3 проигрывался лишь раз, а при повторном запуске — тишина. Заменил на ogg — заработало. Не знаю, поправили ли сейчас этот баг.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
		            <a href="http://habrahabr.ru/post/243471/#reply" class="reply_link" onclick="return comment_show_reply_form(8133779 )">ответить</a>
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_8133779">
    </div>
</div>

    </div>
</div>

        <div class="comment_item" id="comment_8146203">

    <span class="parent_id" data-parent_id="8131211"></span>
    <div class="comment_body ">
        <div class="info  " rel="8146203">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_8146203" class="voting   ">
                <span class="minus" title="Срок голосования истек "></span>
                <span class="plus" title="Срок голосования истек "></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: ↑0 и ↓0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/seyfer/" class="avatar"><img src="./tutorial_files/46c356757c6215332442fa494512e2e6_small.jpg" alt=""></a>
            <a href="http://habrahabr.ru/users/seyfer/" class="username">seyfer</a>
            <time>26 ноября 2014 в 08:38</time>

            <a href="http://habrahabr.ru/post/243471/#comment_8146203" class="link_to_comment">#</a>
            
                    <a href="http://habrahabr.ru/post/243471/#" class="favorite add" onclick="return comments_add_to_favorite(this, &#39;3&#39;, 8146203 )" title="В избранное"></a>
                <div class="show_tree" data-id="8146203" data-parent_id="8131211" title="Показать ветку комментариев">↵</div>
                <a href="http://habrahabr.ru/post/243471/#comment_8131211" data-id="8146203" data-parent_id="8131211" class="to_parent">↑</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Напишите, пожайлуста, со всеми сиправлениями и используя возможности libGDX больше.<br>
Это очень интересно.
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
		            <a href="http://habrahabr.ru/post/243471/#reply" class="reply_link" onclick="return comment_show_reply_form(8146203 )">ответить</a>
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_8146203">
    </div>
</div>

    </div>
</div>

            <div class="comment_item" id="comment_8131815">

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="8131815">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_8131815" class="voting   ">
                <span class="minus" title="Срок голосования истек "></span>
                <span class="plus" title="Срок голосования истек "></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: ↑0 и ↓0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/Jabher/" class="avatar"><img src="./tutorial_files/af540b2bf8b80345ea4c30e42c4d0948_small.jpg" alt=""></a>
            <a href="http://habrahabr.ru/users/Jabher/" class="username">Jabher</a>
            <time>18 ноября 2014 в 14:57<span class="time_changed"> (комментарий был изменён)</span></time>

            <a href="http://habrahabr.ru/post/243471/#comment_8131815" class="link_to_comment">#</a>
            
                    <a href="http://habrahabr.ru/post/243471/#" class="favorite add" onclick="return comments_add_to_favorite(this, &#39;3&#39;, 8131815 )" title="В избранное"></a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Я знаю, тут больше про код… Но не могли бы вы дать пару ссылок на хорошие статьи про «разочарование-награда-зависимость»?<br>
Догадываюсь, что даже на хабре были подобные, но не могу найти.<br>
<br>
А пост шикарный, да:)
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
		            <a href="http://habrahabr.ru/post/243471/#reply" class="reply_link" onclick="return comment_show_reply_form(8131815 )">ответить</a>
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_8131815">
    </div>
</div>

            <div class="comment_item" id="comment_8132841">

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="8132841">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_8132841" class="voting   ">
                <span class="minus" title="Срок голосования истек "></span>
                <span class="plus" title="Срок голосования истек "></span>
                <div class="mark  negative">
                    <span class="score" title="Всего 2: ↑0 и ↓2">–2</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/alan008/" class="avatar"><img src="./tutorial_files/ec803b13208aa1d78d25b2e3bdfb4029_small.jpg" alt=""></a>
            <a href="http://habrahabr.ru/users/alan008/" class="username">alan008</a>
            <time>18 ноября 2014 в 21:30<span class="time_changed"> (комментарий был изменён)</span></time>

            <a href="http://habrahabr.ru/post/243471/#comment_8132841" class="link_to_comment">#</a>
            
                    <a href="http://habrahabr.ru/post/243471/#" class="favorite add" onclick="return comments_add_to_favorite(this, &#39;3&#39;, 8132841 )" title="В избранное"></a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format bad bad2">
            [ sarcasm ]<br>
Если создание игры уровня сложности Flappy Bird порождает такие простыни таинственных манипуляций с инструментами разработки / библиотеками и т.п. (ну вы меня поняли), то создание игр уровня GTA 5 должно простым смертным казаться какой-то rocket science.<br>
[ /sarcasm ]
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
		            <a href="http://habrahabr.ru/post/243471/#reply" class="reply_link" onclick="return comment_show_reply_form(8132841 )">ответить</a>
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_8132841">
        <div class="comment_item" id="comment_8132943">

    <span class="parent_id" data-parent_id="8132841"></span>
    <div class="comment_body ">
        <div class="info  " rel="8132943">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_8132943" class="voting   ">
                <span class="minus" title="Срок голосования истек "></span>
                <span class="plus" title="Срок голосования истек "></span>
                <div class="mark  ">
                    <span class="score" title="Всего 2: ↑1 и ↓1">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/SerafimArts/" class="avatar"><img src="./tutorial_files/dcb44f5e1ad75b467e18e67a24eaf291_small.png" alt=""></a>
            <a href="http://habrahabr.ru/users/SerafimArts/" class="username">SerafimArts</a>
            <time>18 ноября 2014 в 22:46<span class="time_changed"> (комментарий был изменён)</span></time>

            <a href="http://habrahabr.ru/post/243471/#comment_8132943" class="link_to_comment">#</a>
            
                    <a href="http://habrahabr.ru/post/243471/#" class="favorite add" onclick="return comments_add_to_favorite(this, &#39;3&#39;, 8132943 )" title="В избранное"></a>
                <div class="show_tree" data-id="8132943" data-parent_id="8132841" title="Показать ветку комментариев">↵</div>
                <a href="http://habrahabr.ru/post/243471/#comment_8132841" data-id="8132943" data-parent_id="8132841" class="to_parent">↑</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            После небольшого копания в OpenGL мне кажется, что даже просто нарисовать белый кубик — это верх совершенства.<br>
<br>
З.Ы. И даже без сарказма, это действительно адъ
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
		            <a href="http://habrahabr.ru/post/243471/#reply" class="reply_link" onclick="return comment_show_reply_form(8132943 )">ответить</a>
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_8132943">
        <div class="comment_item" id="comment_8133005">

    <span class="parent_id" data-parent_id="8132943"></span>
    <div class="comment_body ">
        <div class="info  " rel="8133005">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_8133005" class="voting   ">
                <span class="minus" title="Срок голосования истек "></span>
                <span class="plus" title="Срок голосования истек "></span>
                <div class="mark  negative">
                    <span class="score" title="Всего 1: ↑0 и ↓1">–1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/alan008/" class="avatar"><img src="./tutorial_files/ec803b13208aa1d78d25b2e3bdfb4029_small.jpg" alt=""></a>
            <a href="http://habrahabr.ru/users/alan008/" class="username">alan008</a>
            <time>18 ноября 2014 в 23:42</time>

            <a href="http://habrahabr.ru/post/243471/#comment_8133005" class="link_to_comment">#</a>
            
                    <a href="http://habrahabr.ru/post/243471/#" class="favorite add" onclick="return comments_add_to_favorite(this, &#39;3&#39;, 8133005 )" title="В избранное"></a>
                <div class="show_tree" data-id="8133005" data-parent_id="8132943" title="Показать ветку комментариев">↵</div>
                <a href="http://habrahabr.ru/post/243471/#comment_8132943" data-id="8133005" data-parent_id="8132943" class="to_parent">↑</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format bad bad1">
            Ну наверно это одна из причин, для чего существуют более высокоуровневые библиотеки.<br>
Чтобы я мог написать Кубик.Создайся, Шарик.Создайся, Камера.ЛетайВокруг :)<br>
А в контексте данной статьи я почему-то этой высокоуровневой легкости не ощутил :)
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
		            <a href="http://habrahabr.ru/post/243471/#reply" class="reply_link" onclick="return comment_show_reply_form(8133005 )">ответить</a>
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_8133005">
        <div class="comment_item" id="comment_8133077">

    <span class="parent_id" data-parent_id="8133005"></span>
    <div class="comment_body ">
        <div class="info  " rel="8133077">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_8133077" class="voting   ">
                <span class="minus" title="Срок голосования истек "></span>
                <span class="plus" title="Срок голосования истек "></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: ↑0 и ↓0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/SerafimArts/" class="avatar"><img src="./tutorial_files/dcb44f5e1ad75b467e18e67a24eaf291_small.png" alt=""></a>
            <a href="http://habrahabr.ru/users/SerafimArts/" class="username">SerafimArts</a>
            <time>19 ноября 2014 в 00:36<span class="time_changed"> (комментарий был изменён)</span></time>

            <a href="http://habrahabr.ru/post/243471/#comment_8133077" class="link_to_comment">#</a>
            
                    <a href="http://habrahabr.ru/post/243471/#" class="favorite add" onclick="return comments_add_to_favorite(this, &#39;3&#39;, 8133077 )" title="В избранное"></a>
                <div class="show_tree" data-id="8133077" data-parent_id="8133005" title="Показать ветку комментариев">↵</div>
                <a href="http://habrahabr.ru/post/243471/#comment_8133005" data-id="8133077" data-parent_id="8133005" class="to_parent">↑</a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Потому что как всегда, 80% программы — это бизнес-логика, заменить которую фреймом или отдельными библиотеками невозможно по факту, ну разве что заиспользовать редакторы из серии Game Maker
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
		            <a href="http://habrahabr.ru/post/243471/#reply" class="reply_link" onclick="return comment_show_reply_form(8133077 )">ответить</a>
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_8133077">
    </div>
</div>

    </div>
</div>

    </div>
</div>

    </div>
</div>

            <div class="comment_item" id="comment_8143695">

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="8143695">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_8143695" class="voting   ">
                <span class="minus" title="Срок голосования истек "></span>
                <span class="plus" title="Срок голосования истек "></span>
                <div class="mark positive ">
                    <span class="score" title="Всего 1: ↑1 и ↓0">+1</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/johnnythekid/" class="avatar"><img src="./tutorial_files/32abe71b9cd44be750f536e793246239_small.jpg" alt=""></a>
            <a href="http://habrahabr.ru/users/johnnythekid/" class="username">johnnythekid</a>
            <time>25 ноября 2014 в 01:15</time>

            <a href="http://habrahabr.ru/post/243471/#comment_8143695" class="link_to_comment">#</a>
            
                    <a href="http://habrahabr.ru/post/243471/#" class="favorite add" onclick="return comments_add_to_favorite(this, &#39;3&#39;, 8143695 )" title="В избранное"></a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Я попробовал пройти этот туториал, но он реально устарел. libGDX генерит немножко другую структуру, все билдится не так гладко, как хотелось бы, в общем на 6 дне оказалось, что сгенеренные конфиги не могут найти картинку в соседнем модуле, а так как я в мире джавы новичок — не смог даже нормально нагуглить решение.<br>
<br>

        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
		            <a href="http://habrahabr.ru/post/243471/#reply" class="reply_link" onclick="return comment_show_reply_form(8143695 )">ответить</a>
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_8143695">
    </div>
</div>

            <div class="comment_item" id="comment_8145731">

    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment_body ">
        <div class="info  " rel="8145731">
            <div class="folding-dot-holder"><div class="folding-dot"></div></div>
            <div id="voting_8145731" class="voting   ">
                <span class="minus" title="Срок голосования истек "></span>
                <span class="plus" title="Срок голосования истек "></span>
                <div class="mark  ">
                    <span class="score" title="Всего 0: ↑0 и ↓0">0</span>
                </div>
            </div>
            <a href="http://habrahabr.ru/users/iSeiryu/" class="avatar"><img src="./tutorial_files/stub-user-small.gif" alt=""></a>
            <a href="http://habrahabr.ru/users/iSeiryu/" class="username">iSeiryu</a>
            <time>25 ноября 2014 в 22:08</time>

            <a href="http://habrahabr.ru/post/243471/#comment_8145731" class="link_to_comment">#</a>
            
                    <a href="http://habrahabr.ru/post/243471/#" class="favorite add" onclick="return comments_add_to_favorite(this, &#39;3&#39;, 8145731 )" title="В избранное"></a>
            <span class="to_chidren"></span>
            <div class="clear"></div>
        </div>
        <div class="message html_format ">
            Я уж думал что это original content. Но к середине статьи закралось сомнение. И оп, точно, перевод!<br>
Но всё равно спасибо за труд!
        </div>
        <div class="reply_form_placeholder"></div>
        <div class="reply">
		            <a href="http://habrahabr.ru/post/243471/#reply" class="reply_link" onclick="return comment_show_reply_form(8145731 )">ответить</a>
            
        </div>
    </div>

    <div class="reply_comments" id="reply_comments_8145731">
    </div>
</div>

    </div>


  					<div class="comments_form" id="comments_form_placeholder">
				<h2 class="title"><a href="http://habrahabr.ru/post/243471/#" onclick="return comment_show_form()">Написать комментарий</a></h2>
				<form action="http://habrahabr.ru/json/comment/" method="post" id="comments_form">

				<div id="preview_placeholder" class="hidden html_format"></div>

				<input type="hidden" name="ts" value="1429449112">
				<input type="hidden" name="tt" value="2">
				<input type="hidden" name="ti" value="243471">  
				<input type="hidden" name="comment_id" value="0">
				<input type="hidden" name="parent_id" value="0">


				<div class="editor">
						<div class="panel">
							<div class="wysiwyg_wrapper">
	<div class="can_use_html"><a href="http://habrahabr.ru/post/243471/#html_help" onclick="$(this).parents(&#39;.wysiwyg_wrapper&#39;).find(&#39;.help_holder&#39;).toggleClass(&#39;hidden&#39;);return false;">html-теги</a></div>
	<a class="btn" title="Жирный" onclick="return habraWYG.insertTagWithText(this, &#39;b&#39;);" href="http://habrahabr.ru/post/243471/#" tabindex="-1"><span class="g-icon g-icon-bold"></span></a>
	<a class="btn" title="Курсив" onclick="return habraWYG.insertTagWithText(this, &#39;i&#39;);" href="http://habrahabr.ru/post/243471/#" tabindex="-1"><span class="g-icon g-icon-italic"></span></a>
	<a class="btn" title="Подчёркнутый" onclick="return habraWYG.insertTagWithText(this, &#39;u&#39;);" href="http://habrahabr.ru/post/243471/#" tabindex="-1"><span class="g-icon g-icon-underline"></span></a>
	<a class="btn" title="Зачёркнутый" onclick="return habraWYG.insertTagWithText(this, &#39;s&#39;);" href="http://habrahabr.ru/post/243471/#" tabindex="-1"><span class="g-icon g-icon-strike"></span></a>
	<a class="btn" title="Цитата" onclick="return habraWYG.insertTagWithText(this, &#39;blockquote&#39;);" href="http://habrahabr.ru/post/243471/#" tabindex="-1"><span class="g-icon g-icon-quote"></span></a>
	<div class="btn btn-dropdown">
		<span class="g-icon g-icon-list"></span>
		<select name="list" onchange="habraWYG.insertList(this);" onclick="return false;" tabindex="-1">
			<option value="" class="title">Список:</option>
			<option value="ul">UL LI</option>
			<option value="ol">OL LI</option>
		</select>
	</div>
	<a class="btn" title="Пользователь" onclick="return habraWYG.insertUser(this);" href="http://habrahabr.ru/post/243471/#" tabindex="-1"><span class="g-icon g-icon-users"></span></a>
	<a class="btn" title="Вставить ссылку" onclick="return habraWYG.insertLink(this);" href="http://habrahabr.ru/post/243471/#" tabindex="-1"><span class="g-icon g-icon-link"></span></a>
	<a class="btn" title="Вставить изображение" onclick="return habraWYG.insertImage(this);" href="http://habrahabr.ru/post/243471/#" tabindex="-1"><span class="g-icon g-icon-images"></span></a>
	<a class="btn" title="Вставить видео" onclick="return habraWYG.insertTagWithText(this, &#39;video&#39;);" href="http://habrahabr.ru/post/243471/#" tabindex="-1"><span class="g-icon g-icon-video"></span></a>
	<a class="btn" title="Вставить спойлер" onclick="return habraWYG.insertSpoiler(this);" href="http://habrahabr.ru/post/243471/#" tabindex="-1"><span class="g-icon g-icon-spoiler"></span></a>
	<div class="btn btn-dropdown">
		<span class="g-icon g-icon-code"></span>
		<select class="with-title" name="source" title="Используйте этот тег для блочных элементов" onchange="habraWYG.insertSource(this);" tabindex="-1">
			<option value="" class="title">Source:</option>
			<option value="bash">Bash</option>
			<option value="cs">C#</option>
			<option value="cpp">C++</option>
			<option value="css">CSS</option>
			<option value="diff">Diff</option>
			<option value="html">HTML</option>
			<option value="xml">XML</option>
			<option value="java">Java</option>
			<option value="javascript">JavaScript</option>
			<option value="php">PHP</option>
			<option value="perl">Perl</option>
			<option value="python">Python</option>
			<option value="ruby">Ruby</option>
			<option value="sql">SQL</option>
			<option value="1c">1C</option>
			<option value="actionscript">ActionScript</option>
			<option value="apache">Apache</option>
			<option value="axapta">Axapta</option>
			<option value="cmake">CMake</option>
			<option value="coffeescript">CoffeeScript</option>
			<option value="dos">DOS</option>
			<option value="delphi">Delphi</option>
			<option value="django">Django</option>
			<option value="erlang">Erlang</option>
			<option value="erlang_repl">Erlang REPL</option>
      <option value="glsl">GLSL</option>
			<option value="go">Go</option>
			<option value="haskell">Haskell</option>
			<option value="lisp">Lisp</option>
			<option value="lua">Lua</option>
			<option value="mel">MEL</option>
			<option value="markdown">Markdown</option>
			<option value="matlab">Matlab</option>
			<option value="nginx">Nginx</option>
			<option value="objectivec">Objective C</option>
			<option value="rust">Rust</option>
			<option value="scala">Scala</option>
			<option value="smalltalk">Smalltalk</option>
			<option value="tex">TeX</option>
			<option value="vbscript">VBScript</option>
			<option value="vhdl">VHDL</option>
			<option value="vala">Vala</option>
		</select>
	</div>
	

	<div class="clear"></div>

		<div class="help_holder hidden">
          <h4>Теги Хабрахабра</h4>
					<dl class="block_semi">
						<dt>&lt;habracut&gt;</dt>
						<dd class="description">Используется только в текстах публикаций, скрывает под кат часть текста, следующую за тегом (будет написано «Читать дальше»).</dd>
					</dl>
					<dl class="block_semi">
	
						<dt>&lt;habracut text="Подробности" /&gt;</dt>
						<dd class="description">Так можно превратить надпись «Читать дальше» в любой текст.</dd>
					</dl>
					<dl class="block_semi">
						<dt>&lt;source lang="Язык"&gt;&lt;/source&gt;</dt>
						<dd class="description">Подсвечивает исходный код (на выбор: 
						Bash,  C#,  C++,  CSS,  Diff,  HTML, XML,  Ini,  Java,  JavaScript,  PHP,  Perl,  Python,  Ruby,  SQL,
						1C,  AVR Assembler,  ActionScript,  Apache,  Axapta,  CMake,  CoffeeScript,  DOS, .bat,  Delphi,  Django,  Erlang,  Erlang REPL,  Go,  Haskell,  Lisp,  Lua,  MEL,  Markdown,  Matlab,  Nginx,  Objective C,  Parser3,  Python profile,  RenderMan,  Rust,  Scala,  Smalltalk,  TeX,  VBScript,  VHDL,  Vala    
						).</dd>
					</dl>
					<dl class="block_semi">
						<dt>&lt;video&gt;http://...&lt;/video&gt;</dt>
	
						<dd class="description">Добавляет в публикацию видео со следующих хостингов: YouTube, RuTube, Google video, Vimeo, Я.Видео, Ivideon и Видео@Mail.ru<br>Вставляйте между тегами только прямую ссылку на видеоролик.</dd>
					</dl>

					<dl class="block_semi">
						<dt>&lt;twitter&gt;http://...&lt;/twitter&gt;</dt>

						<dd class="description">Добавляет в публикацию твит. Необходимо указать полную ссылку на твит. Например: &lt;twitter&gt;https://twitter.com/habrahabr/status/522334394175213568&lt;/twitter&gt;</dd>
					</dl>

					<dl class="block_semi">
						<dt>&lt;slideshow&gt;http://...&lt;/slideshow&gt;</dt>						
	
						<dd class="description">Вставка интерактивного слайд-шоу. Пока поддерживается только сервис Slideshare.net.</dd>
					</dl>

					<dl class="block_semi">
						<dt>@username</dt>
	
						<dd class="description">
							Выводит имя пользователя в тексте и отправляет пользователю уведомление о том, что его упомянули в публикации/комментарии. 
							Вы можете использовать конструкцию <b>@username</b>, где <b>username</b> — это имя пользователя.
						</dd>
					</dl>
					
					<dl class="block_semi">
						<dt>&lt;spoiler title="Заголовок"&gt;Содержимое&lt;/spoiler&gt;</dt>
	
						<dd class="description">Вставка спойлера (разворачиваемый блок информации).</dd>
					</dl>
					
					
					
					
					<h4>Стандартные</h4>
					<table class="wide">
						<tbody><tr>
							<td>
		
								<dl class="block_semi">
									<dt>&lt;h1&gt;&lt;/h1&gt;<br>
										...<br>
										&lt;h6&gt;&lt;/h6&gt;
									</dt>
									<dd class="description">Заголовки разного уровня.</dd>
								</dl>
								<dl class="block_semi">
	
									<dt>&lt;img src="" /&gt;</dt>
									<dd class="description">Вставка изображения, в атрибуте src нужно указывать полный путь к изображению. Возможно выравнивание картинки атрибутом align.</dd>
								</dl>
								<dl class="block_semi">
									<dt>&lt;a href="http://..."&gt;Ссылка&lt;/a&gt;</dt>
	
									<dd class="description">Вставка ссылки, в атрибуте href указывается желаемый интернет-адрес или якорь (anchor) для навигации по странице.</dd>
								</dl>								
								<dl class="block_semi">
									<dt>&lt;anchor&gt;Example1&lt;/anchor&gt;</dt>
	
									<dd class="description">Тег для указания якоря. Для вызова используйте тег вставки ссылок (&lt;a href="#Example1"&gt;Текст&lt;/a&gt;).</dd>
								</dl>								
								<dl class="block_semi">
									<dt>&lt;b&gt;&lt;/b&gt;<br>
										&lt;strong&gt;&lt;/strong&gt;</dt>
									<dd class="description">Выделение важного текста, на странице выделяется жирным начертанием.</dd>
								</dl>
								<dl class="block_semi">
	
									<dt>&lt;i&gt;&lt;/i&gt;<br>
										&lt;em&gt;&lt;/em&gt;</dt>
									<dd class="description">Выделение важного текста, на странице выделяется курсивом.</dd>
								</dl>
								<dl class="block_semi">
									<dt>
										&lt;s&gt;&lt;/s&gt;<br>
										&lt;strike&gt;&lt;/strike&gt;
									</dt>
									<dd class="description">Текст между этими тегами будет отображаться как зачеркнутый.</dd>
								</dl>
	
								<dl class="block_semi">
									<dt>
										&lt;u&gt;&lt;/u&gt;
									</dt>
									<dd class="description">Текст между этими тегами будет отображаться как подчеркнутый.</dd>
								</dl>
	
								
							</td>
							
							<td width="5%"></td>
							
							<td>
							<dl class="block_semi">
								<dt>
									&lt;hr /&gt;
								</dt>
								<dd class="description">Тег для вставки горизонтальной линии.</dd>
							</dl>	
								<dl class="block_semi">
									<dt>
										&lt;blockquote&gt;&lt;/blockquote&gt;
									</dt>
									<dd class="description">Используйте этот тег для выделения цитат.</dd>
	
								</dl>
								<dl class="block_semi">
									<dt>
										&lt;table&gt;&lt;/table&gt;<br>
										&lt;th&gt;&lt;/th&gt;<br>
										&lt;td&gt;&lt;/td&gt;<br>
	
										&lt;tr&gt;&lt;/tr&gt;
									</dt>
									<dd class="description">Набор тегов для создания таблицы. Тег &lt;td&gt; обозначает ячейку таблицы, тег &lt;th&gt; - ячейку в заголовке, &lt;tr&gt; - строчку таблицы. Все содержимое таблицы помещайте в тег &lt;table&gt;.</dd>
	
								</dl>
								<dl class="block_semi">
									<dt>
										&lt;sup&gt;&lt;/sup&gt;<br>
										&lt;sub&gt;&lt;/sub&gt;
									</dt>
									<dd class="description">Текст, заключенный в тег &lt;sup&gt; отображается в виде верхнего индекса, &lt;sub&gt; - в виде нижнего.</dd>
	
								</dl>
								<dl class="block_semi">
									<dt>
										&lt;abbr title="" &gt;&lt;/abbr&gt;<br>
										&lt;acronym title="" &gt;&lt;/acronym&gt;
									</dt>
	
									<dd class="description">Тегом &lt;abbr&gt; выделяется аббревиатура, в атрибуте title указывайте её расшифровку. Используйте тег &lt;acronym&gt; для устоявшихся аббревиатур.</dd>
								</dl>
								<dl class="block_semi">
									<dt>
										&lt;pre&gt;&lt;/pre&gt;
	
									</dt>
									<dd class="description">Текст в теге &lt;pre&gt; не форматируется автоматически.</dd>
								</dl>
								<dl class="block_semi">
									<dt>
										&lt;nobr&gt;&lt;/nobr&gt;<br>
	
										&lt;br clear="all|left||right" /&gt;
									</dt>
									<dd class="description">Текст, помещенный в тег &lt;nobr&gt;, не переносится на странице; для принудительного переноса текста используйте тег &lt;br /&gt;; для аккуратного выравнивания изображений используйте атрибут clear="all|left||right" в теге &lt;br /&gt;.</dd>
								</dl>
								
								<dl class="block_semi">
									<dt>
										&lt;ul&gt;&lt;/ul&gt;<br>
										&lt;li&gt;&lt;/li&gt;
									</dt>
									<dd class="description">Ненумерованный список; каждый элемент списка задается тегом &lt;li&gt;, набор элементов списка помещайте в тег &lt;ul&gt;.</dd>
	
								</dl>
								<dl class="block_semi">
									<dt>
										&lt;ol&gt;&lt;/ol&gt;<br>
										&lt;li&gt;&lt;/li&gt;
									</dt>
									<dd class="description">Нумерованный список; каждый элемент списка задается тегом &lt;li&gt;, набор элементов списка помещайте в тег &lt;ol&gt;.</dd>
	
								</dl>
							</td>
						</tr>
	
					</tbody></table>
					
					<div class="close_html"><a href="http://habrahabr.ru/post/243471/#html_help_close" onclick="$(this).parents(&#39;.wysiwyg_wrapper&#39;).find(&#39;.help_holder&#39;).toggleClass(&#39;hidden&#39;);return false;">закрыть</a></div>
					
		</div>
</div>
						</div>
						<div class="text-holder">
						 <textarea cols="30" rows="10" name="text" id="comment_text"></textarea>
						</div>
						<span id="error_text" class="error"></span>
					</div>
					<div class="buttons">
						<input type="button" class="preview disableble" value="Предпросмотр" disabled="disabled" onclick="comment_preview(this.form, this)">
						<input type="button" class="submit disableble" value="Написать" disabled="disabled" onclick="comment_send(this.form, this)">
						<input type="button" class="edit hidden disableble" value="Сохранить" disabled="disabled" onclick="comment_update(this.form, this)">
						

						<span class="time_left" title="Оставшееся время редактирования комментария"></span>
					</div>
				</form>
			</div>


  	
<form action="http://habrahabr.ru/json/favorites/" method="post" id="edit_tags_form" class="hidden">
  <input type="hidden" name="action" value="add">
  <input type="hidden" name="ti" value="0">
  <input type="hidden" name="tt" value="0">
  <label>Пометьте топик понятными вам метками, если хотите</label>
  <input type="text" name="tags_string" class="tags_string" autocomplete="off">
  <div class="description">Метки лучше разделять запятой. Например: <i>общение, социальные сети, myspace.com, подростки, мердок</i></div>
  <input type="submit" value="Сохранить" class="submit"> или <a href="http://habrahabr.ru/post/243471/#" class="close" onclick="return close_edit_tags()">закрыть</a>
</form>



  </div>
  <div class="sidebar_right">
  			<div class="banner_300x500">
		<div id="adriver_banner_1863387959"></div>
		<script type="text/javascript">
            function show_bn1_block(name, url){
                console.log('show' + name);
                if( typeof(name) !== 'undefined'){
                    $.get('/html/'+name+'/1429261672/', function(html){
                        $('#adriver_banner_1863387959').html(html);
                        if( typeof(url) !== 'undefined'){
                            $('.'+name+'_inner_banner .block_url').attr('href', url);
                        }
                    })
                }
            }



			$(function(){

                // конвертирут кириллицу в cp1251
                // doc: http://www.adriver.ru/doc/edu-n/pub/settargt/standtrgt/scentrgt/scentrgt.html#9
				function esc(s){
                    for(var i=0,l=s.length,r='';i<l;i++){
                        var c = s.charCodeAt(i);r += String.fromCharCode(c>1039&&c<1104 ? c-848 : c==1105 ? 184 : c==1025 ? 168 : c);
                    }
                    return r;
                }

                var keyword = '';

                if (typeof crtg_content !== 'undefined' && crtg_content) { keyword = crtg_content; }
                
                

				var custom = {4:ar_duo1};
					custom[1] = 'gdev';
					custom[2] = 'java';

                 new adriver("adriver_banner_1863387959", {sid: 176776, bt: 52, bn: 1, custom: custom, keyword: keyword});
			}());



            
		</script>
	</div>

  		
  		
<div class="block daily_best_posts float_block" style="width: 260px; opacity: 1;">
  <div class="title">Популярное за сутки</div>
  <div class="posts_list">
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/company/yandex/blog/255985/" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;daily_best_posts&#39;, $(this).parents(&#39;.daily_best_posts&#39;).hasClass(&#39;float_block&#39;) ? &#39;float&#39; : &#39;common&#39;); }" class="post_name">Построение признаков и сравнение изображений: локальные признаки. Лекции от Яндекса</a>
      </div>
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/post/256057/" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;daily_best_posts&#39;, $(this).parents(&#39;.daily_best_posts&#39;).hasClass(&#39;float_block&#39;) ? &#39;float&#39; : &#39;common&#39;); }" class="post_name">Java 8: Овладейте новым уровнем абстракции</a>
      </div>
      <div class="post_item">
        
				
				
				
				
				

        <a href="http://habrahabr.ru/post/256063/" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;daily_best_posts&#39;, $(this).parents(&#39;.daily_best_posts&#39;).hasClass(&#39;float_block&#39;) ? &#39;float&#39; : &#39;common&#39;); }" class="post_name">Переводим с помощью Яндекс</a>
      </div>
  </div>
  <div class="all"><a href="http://habrahabr.ru/top/">все лучшие</a></div>
</div>

	    

<div class="block geektimes_top">
	<a href="http://geektimes.ru/" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo" class="title">Лучшее на Geektimes</a>
	<div class="posts_list">
  		<div class="post_item">
  			<a class="post_name" href="http://geektimes.ru/post/249196/" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo">Почему существуют секс и разделение на мужчин и женщин?</a>
  		</div>
  		<div class="post_item">
  			<a class="post_name" href="http://geektimes.ru/post/249208/" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo">Google успешно использует новый интернет-протокол QUIC в работе браузера Chrome</a>
  		</div>
  		<div class="post_item">
  			<a class="post_name" href="http://geektimes.ru/post/249202/" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo">Подробности о домашней аккумуляторной батарее Tesla</a>
  		</div>
  		<div class="post_item">
  			<a class="post_name" href="http://geektimes.ru/post/249212/" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo">В сотне тысяч ближайших галактик следов деятельности сверхцивилизаций не обнаружено</a>
  		</div>
  		<div class="post_item">
  			<a class="post_name" href="http://geektimes.ru/post/249200/" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo">Поезд на магнитной подушке побил рекорд 12-летней давности и развил скорость в 590 км/ч</a>
  		</div>
  		<div class="post_item">
  			<a class="post_name" href="http://geektimes.ru/post/249210/" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo">Как мы придумывали конструктор для детской робототехники. Часть 0. Акрил</a>
  		</div>
  		<div class="post_item">
  			<a class="post_name" href="http://geektimes.ru/post/249198/" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo">RALPH — компьютерная система первого робомобиля</a>
  		</div>
  		<div class="post_item">
  			<a class="post_name" href="http://geektimes.ru/post/249214/" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo">GTA 5 в Oculus Rift — как использовать беговую дорожку с пользой (Видео)</a>
  		</div>
  		<div class="post_item">
  			<a class="post_name" href="http://geektimes.ru/post/249216/" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo">Леонардо да Винчи учит писать резюме</a>
  		</div>
  		<div class="post_item">
  			<a class="post_name" href="http://geektimes.ru/post/249204/" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo">Безболезненный отбор крови — новая реальность, спонсируемая DARPA</a>
  		</div>
	</div>
	<div class="all"><a href="http://geektimes.ru/" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo">все публикации</a></div>
</div>

	  	

<div class="block geektimes_top">
    <a href="http://megamozg.ru/" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo" class="title">Лучшее на Мегамозге</a>
    <div class="posts_list">
        <div class="post_item">
            <a class="post_name" href="http://megamozg.ru/post/14404/" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo">В Амстердаме возбудили уголовное дело против Uber</a>
        </div>

    </div>
    <div class="all"><a href="http://megamozg.ru/" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo">все публикации</a></div>
</div>


  	  
<div class="block similar_questions">
	<div class="title">Вопросы по теме</div>

	<div class="posts_list">
    	<div class="post_item">
    	    <a class="post_name" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo" href="http://toster.ru/q/211282">Как решить задачку по java с регулярными выражениями?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo" href="http://toster.ru/q/211275">Использовать ли Ruby on Rails вместо Java?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo" href="http://toster.ru/q/211269">Где искать заказы java-разработчику (web, энтерпрайз)?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo" href="http://toster.ru/q/211185">Появление непонятних символов в Android studio, откуда они?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo" href="http://toster.ru/q/211148">Spring, существует ли шаблонизатор?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo" href="http://toster.ru/q/211139">Отечественные компании с офисами в теплых странах?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo" href="http://toster.ru/q/211138">Почему при закрытии приложения текстуры становятся чёрными?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo" href="http://toster.ru/q/211049">Как использовать лицензию LGPL применительно к Java и Android?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo" href="http://toster.ru/q/211047">Что такое/чем отличаются Repository и Dao интерфейсы?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo" href="http://toster.ru/q/211013">В чем преимущество Python перед Java для анализа больших данных / машинного обучения?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo" href="http://toster.ru/q/210953">JAVA web service autogenerated client выдает ошибку. КАк узнать причину?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo" href="http://toster.ru/q/210948">На какой факультет программисту поступать надо?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo" href="http://toster.ru/q/210941">Как отослать пакет от клиента к клиенту не используя сервер?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo" href="http://toster.ru/q/210912">Как залить полуальфой в libGDX?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo" href="http://toster.ru/q/210838">Можно ли исправить проблему при запуске сгенерированных в netbeans JSF-страниц?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo" href="http://toster.ru/q/210769">Как спарсить текст или число по маске в переменную Android Studio?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo" href="http://toster.ru/q/210611">Как воспроизвести звук в JAVA?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo" href="http://toster.ru/q/210572">Как не волноваться на собеседовании?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo" href="http://toster.ru/q/210504">Кто может поделиться опытом по курсам Java на proglive?</a>
		</div>
    	<div class="post_item">
    	    <a class="post_name" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo" href="http://toster.ru/q/210489">Какую либу лучше использовать в java для компьютерного зрения (поиск изображения в изображении)?</a>
		</div>
  </div>

</div>


  		

	<div class="block live_broadcast">
		<div class="title">Что обсуждают? </div>

		<div class="live_broadcast_activity">
				<div class="posts_list">
							<div class="post_item">
								<a href="http://habrahabr.ru/post/255845#comments" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;live_broadcast_activity&#39;, &#39;post&#39;); }" class="post_name">Systemd за пять минут</a>&nbsp;<span class="count">32</span>
							</div>
							<div class="post_item">
								<a href="http://habrahabr.ru/post/256063#comments" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;live_broadcast_activity&#39;, &#39;post&#39;); }" class="post_name">Переводим с помощью Яндекс</a>&nbsp;<span class="count">4</span>
							</div>
							<div class="post_item">
								<a href="http://habrahabr.ru/post/256043#comments" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;live_broadcast_activity&#39;, &#39;post&#39;); }" class="post_name">Windows Update KB3045999 приводит к BSOD</a>&nbsp;<span class="count">22</span>
							</div>
							<div class="post_item">
								<a href="http://habrahabr.ru/post/256057#comments" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;live_broadcast_activity&#39;, &#39;post&#39;); }" class="post_name">Java 8: Овладейте новым уровнем абстракции</a>&nbsp;<span class="count">29</span>
							</div>
							<div class="post_item">
								<a href="http://habrahabr.ru/post/255969#comments" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;live_broadcast_activity&#39;, &#39;post&#39;); }" class="post_name">Запускаем сайт на облачном VPS от Infobox за 10 минут</a>&nbsp;<span class="count">10</span>
							</div>
							<div class="post_item">
								<a href="http://habrahabr.ru/post/251143#comments" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;live_broadcast_activity&#39;, &#39;post&#39;); }" class="post_name">Собственная реализация https с использованием crypto++ для начальной загрузки I2P</a>&nbsp;<span class="count">11</span>
							</div>
							<div class="post_item">
								<a href="http://habrahabr.ru/post/256069#comments" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;live_broadcast_activity&#39;, &#39;post&#39;); }" class="post_name">CSS будущего: расстояние до глаз</a>&nbsp;<span class="count">34</span>
							</div>
							<div class="post_item">
								<a href="http://habrahabr.ru/post/256079#comments" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;live_broadcast_activity&#39;, &#39;post&#39;); }" class="post_name">Устранение загадочной&nbsp;ошибки «undefined is&nbsp;not a&nbsp;function» в&nbsp;V8</a>&nbsp;<span class="count">1</span>
							</div>
							<div class="post_item">
								<a href="http://habrahabr.ru/post/256047#comments" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;live_broadcast_activity&#39;, &#39;post&#39;); }" class="post_name">Phalcon 2 вышел</a>&nbsp;<span class="count">38</span>
							</div>
							<div class="post_item">
								<a href="http://habrahabr.ru/post/254843#comments" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;live_broadcast_activity&#39;, &#39;post&#39;); }" class="post_name">Лекции Технопарка. 3 семестр. Проектирование высоконагруженных систем</a>&nbsp;<span class="count">4</span>
							</div>
				</div>
				<div class="all"><a href="http://habrahabr.ru/posts/" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;live_broadcast_activity&#39;, &#39;all_posts&#39;); }">все публикации</a></div>
		</div>

	</div>

  		<!--  AdRiver code START. Type:AjaxJS Site: habrahabr PZ: 0 BN: 2 -->

<div id="adriver_banner_480931290" class="adbanner"></div>


<script type="text/javascript">
    function show_bn2_block(name, url){
        if( typeof(name) !== 'undefined'){
            $.get('/html/'+name+'/1429261672/', function(html){
                $('#adriver_banner_480931290').html(html);
                if( typeof(url) !== 'undefined'){
                    $('.'+name+'_inner_banner .block_url').attr('href', url);
                }
            })
        }
    }

    $(function(){

        var check_scroll_position = function() {
            var height = $(window).height();
            var scrollTop = $(window).scrollTop();
            var scrollBottom = $(window).scrollTop() + height;
            var blockTop = $('#adriver_banner_480931290').position().top;
            var show = scrollTop < blockTop && blockTop < scrollBottom;
            if( show ){
                $( window ).off('scroll', check_scroll_position);
                $( window ).trigger('show_bn2');
            }
        };
        $( window ).on('scroll', check_scroll_position);

        $( window ).on('show_bn2', function(){
            var keyword = '';
            if (typeof crtg_content !== 'undefined' && crtg_content) { keyword = crtg_content; }
            var custom = {4:ar_duo1};
            custom[1] = 'gdev';
            custom[2] = 'java';
            new adriver("adriver_banner_480931290", {sid: 176776, bt: 52, bn: 2, custom: custom, keyword: keyword});
        });
    });
    </script>
<!--  AdRiver code END  -->

  		
<div class="block best_company">

		<div class="title">Компания дня <img src="./tutorial_files/bg_cicle_help.png" class="help-tip"></div>

		<div class="company_info">
			<div class="name">
			 <img class="favicon" src="./tutorial_files/7df1b3b4a526936f2ee6bbde8fafd8d0_small.png" alt="JetBrains" height="16" width="16">
			 <div class="company_name"><a href="http://habrahabr.ru/company/JetBrains/" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;best_company&#39;, &#39;title&#39;); }" class="title">JetBrains</a></div>
			</div>

			<p>Последняя публикация:
				<a href="http://habrahabr.ru/company/JetBrains/blog/255723/" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;best_company&#39;, &#39;post&#39;); }">CLion 1.0 — мощный инструмент для мощного языка</a>
			</p>

			<div class="buttons">
  			<div id="fans_count">4574 подписчика</div>
  				<input type="button" id="addCompanyFan" data-id="559" class="blue " title="Мне нравится компания" value="Подписаться">
  				<input type="button" id="removeCompanyFan" data-id="559" class="hidden" title="Компания мне больше не нравится" value="Подписан">
			</div>
		</div>

	</div>


  		
  		
  		
  </div>
  <div class="clear"></div>

  <script>
    // hubs to GA
      ga('send', 'event', 'Post_view', 'gdev (Game Development)',  window.location.pathname + window.location.search);
      ga('send', 'event', 'Post_view', 'java (JAVA)',  window.location.pathname + window.location.search);
  </script>




        	
	<div class="rotated_posts">
			<div class="rotated_post ">
				<a href="http://habrahabr.ru/post/253237/" class="grey" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;posts_rotation_block&#39;); }">Нескучные выходные или «тачка на прокачку»</a>
			</div>
			<div class="rotated_post ">
				<a href="http://habrahabr.ru/company/mailru/blog/248873/" class="grey" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;posts_rotation_block&#39;); }">Skyforge: технологии рендеринга</a>
			</div>
			<div class="rotated_post last">
				<a href="http://habrahabr.ru/post/249535/" class="grey" onclick="if (typeof ga === &#39;function&#39;) { ga(&#39;send&#39;, &#39;event&#39;, &#39;tm_block&#39;, &#39;posts_rotation_block&#39;); }">Искусственный рассвет</a>
			</div>
		<div class="clear"></div>
	</div>

        <div class="bottom_promo_blocks">
    <div class="left">
            
	<div class="block new_vacanies">
  <a href="http://brainstorage.me/jobs" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo" class="title">Brainstorage</a>
  <div class="vacancies">
		<div class="job_item ">
			<a href="http://brainstorage.me/jobs/28951" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo">HTML-верстальщик</a>
		</div>
		<div class="job_item marked">
			<a href="http://brainstorage.me/jobs/23257" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo">Системный администратор и DBA и DevOps инженер</a>
		</div>
		<div class="job_item marked">
			<a href="http://brainstorage.me/jobs/9435" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo">Аккаунт-менеджер (стажер)</a>
		</div>
		<div class="job_item ">
			<a href="http://brainstorage.me/jobs/28755" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo">Разработка плагина для Битрикса</a>
		</div>
		<div class="job_item marked">
			<a href="http://brainstorage.me/jobs/18441" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo">Системный программист iOS, OS X (реверс инженер)</a>
		</div>
		<div class="job_item ">
			<a href="http://brainstorage.me/jobs/18447" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo">IOS Developer</a>
		</div>
		<div class="job_item ">
			<a href="http://brainstorage.me/jobs/28923" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo">PHP-разработчик</a>
		</div>
		<div class="job_item ">
			<a href="http://brainstorage.me/jobs/15819" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo">Front-end разработчик / Верстальщик в команду (JS, SASS/LESS, GRUNT)</a>
		</div>
		<div class="job_item marked">
			<a href="http://brainstorage.me/jobs/28795" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo">UX-дизайнер мобильных приложений </a>
		</div>
		<div class="job_item ">
			<a href="http://brainstorage.me/jobs/25729" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo">Python Developer [World of Tanks - UI]</a>
		</div>
  </div>
  <div class="all"><a href="http://brainstorage.me/jobs" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_campaign=tm_promo">все вакансии</a></div>
</div>

    </div>
    <div class="right">
        
	<div class="block freelansim">
	  <a href="http://freelansim.ru/" data-utm="?utm_source=habrahabr&amp;utm_medium=referral&amp;utm_campaign=mainpage&amp;utm_content=block_freelansim" class="title"></a>
	  <div class="tasks">
				<div class="task ">
					<a href="http://freelansim.ru/tasks/107595" data-utm="?utm_source=habrahabr&amp;utm_medium=referral&amp;utm_campaign=mainpage&amp;utm_content=block_freelansim">Требуется хороший php разработчик, который знает API vk/facebook</a>
				</div>
				<div class="task ">
					<a href="http://freelansim.ru/tasks/107591" data-utm="?utm_source=habrahabr&amp;utm_medium=referral&amp;utm_campaign=mainpage&amp;utm_content=block_freelansim">Нужна вёрстка лендинга</a>
				</div>
				<div class="task ">
					<a href="http://freelansim.ru/tasks/107515" data-utm="?utm_source=habrahabr&amp;utm_medium=referral&amp;utm_campaign=mainpage&amp;utm_content=block_freelansim">Разработка дизайна сайта девелоперской компании</a>
				</div>
				<div class="task ">
					<a href="http://freelansim.ru/tasks/107273" data-utm="?utm_source=habrahabr&amp;utm_medium=referral&amp;utm_campaign=mainpage&amp;utm_content=block_freelansim">Вёрстка интернет-магазина</a>
				</div>
				<div class="task ">
					<a href="http://freelansim.ru/tasks/107589" data-utm="?utm_source=habrahabr&amp;utm_medium=referral&amp;utm_campaign=mainpage&amp;utm_content=block_freelansim">Литературные переводы с английского</a>
				</div>
				<div class="task ">
					<a href="http://freelansim.ru/tasks/107587" data-utm="?utm_source=habrahabr&amp;utm_medium=referral&amp;utm_campaign=mainpage&amp;utm_content=block_freelansim">Вёртска сайта — Shitsite — антирейтинг рунета</a>
				</div>
				<div class="task marked">
					<a href="http://freelansim.ru/tasks/106321" data-utm="?utm_source=habrahabr&amp;utm_medium=referral&amp;utm_campaign=mainpage&amp;utm_content=block_freelansim">Текстовая симуляция игры Вари</a>
				</div>
				<div class="task ">
					<a href="http://freelansim.ru/tasks/107585" data-utm="?utm_source=habrahabr&amp;utm_medium=referral&amp;utm_campaign=mainpage&amp;utm_content=block_freelansim">Справочник на yii</a>
				</div>
				<div class="task ">
					<a href="http://freelansim.ru/tasks/107583" data-utm="?utm_source=habrahabr&amp;utm_medium=referral&amp;utm_campaign=mainpage&amp;utm_content=block_freelansim">Сервис wifi после авторизации через соц сети для ночного клуба</a>
				</div>
				<div class="task ">
					<a href="http://freelansim.ru/tasks/107579" data-utm="?utm_source=habrahabr&amp;utm_medium=referral&amp;utm_campaign=mainpage&amp;utm_content=block_freelansim">Доработка вёрстки</a>
				</div>

	  </div>
	  <div class="all"><a href="http://freelansim.ru/tasks" data-utm="?utm_source=habrahabr&amp;utm_medium=referral&amp;utm_campaign=mainpage&amp;utm_content=block_freelansim">все заказы</a></div>
	</div>

    </div>
    <div class="clear"></div>
</div>



        <div class="clear"></div>

        <div class="footer_panel">
          <div id="footer">
	<dl class="user">
		<dt><a href="http://habrahabr.ru/users/SmartBye/">SmartBye</a></dt>
		<dd><a href="http://habrahabr.ru/feed/">Лента</a></dd>
		<dd><a href="http://habrahabr.ru/tracker/">Трекер</a></dd>
			<dd><a href="http://habrahabr.ru/topic/add/">Написать</a></dd>
			<dd><a href="http://habrahabr.ru/conversations/">Диалоги</a></dd>
			<dd><a href="https://habrahabr.ru/auth/settings/">Настройки</a></dd>
			<dd><a href="http://habrahabr.ru/ppa/">ППА</a></dd>
	</dl>
	<dl>
		<dt>Разделы</dt>
		<dd><a href="http://habrahabr.ru/posts/top/">Публикации</a></dd>
		<dd><a href="http://habrahabr.ru/hubs/">Хабы</a></dd>
		<dd><a href="http://habrahabr.ru/companies/">Компании</a></dd>
		<dd><a href="http://habrahabr.ru/users/">Пользователи</a></dd>
		<dd><a href="http://toster.ru/?_aa=press_anykey">Q&amp;A</a></dd>
		<dd><a href="http://habrahabr.ru/sandbox/">Песочница</a></dd>
		
	</dl>	
	<dl>
		<dt>Инфо</dt>
		<dd><a href="http://habrahabr.ru/info/about/">О сайте</a></dd>
		<dd><a href="http://habrahabr.ru/info/help/rules/">Правила</a></dd>
		<dd><a href="http://habrahabr.ru/info/help/">Помощь</a></dd>
		<dd><a href="http://habrahabr.ru/info/agreement/">Соглашение</a></dd>
	</dl>
	<dl>
		<dt>Услуги</dt>
		<dd><a href="http://special.habrahabr.ru/advertising/">Реклама</a></dd>
        <dd><a href="http://special.habrahabr.ru/">Спецпроекты</a></dd>
        <dd><a href="http://special.habrahabr.ru/corporate/">Тарифы</a></dd>
        <dd><a href="http://special.habrahabr.ru/content/">Контент</a></dd>
        <dd><a href="http://special.habrahabr.ru/workshops/">Семинары</a></dd>
	</dl>
	<dl>
		<dt>Разное</dt>
		<dd><a href="http://habrahabr.ru/apps/">Приложения</a></dd>
		<dd><a href="http://habrahabr.ru/special/testdrive/">Тест-драйвы</a></dd>
		<dd><a href="http://special.habrahabr.ru/hello_startup/habrahabr/">Помощь стартапам</a></dd>
	</dl>
	<div class="copyright">

		<div class="about">
			<a href="http://tmtm.ru/">© TM</a>
			
			<br><br>
			<a href="http://habrahabr.ru/feedback/">Служба поддержки</a><br><br>
                <a href="http://m.habrahabr.ru/post/243471/?mobile=yes">Мобильная версия</a><br><br>
			

			<div class="social_accounts">
				<a href="https://twitter.com/habrahabr" class="tw"></a>
				<a href="https://www.facebook.com/habrahabr.ru" class="fb"></a>
				<a href="http://vk.com/habr" class="vk"></a>
				<!-- <a href="" class="gp"></a> //-->
			</div>

		</div>
	</div>

</div>

        </div>
      </div>
    </div>



    <script type="text/javascript">
  // global vars
  var g_base_url = 'habrahabr.ru';
  var g_show_xpanel = true;
  var g_base_fullurl = 'http://habrahabr.ru/';
  var g_is_guest = true;
  var g_user_login = 'SmartBye';
  var g_user_id = 38789;
  var g_user_avatar = '//habrahabr.ru/i/avatars/stub-user-middle.gif';   
</script> 

      <script type="text/javascript" src="./tutorial_files/shortcuts.js"></script>

    <script type="text/javascript" src="./tutorial_files/global_footer_main.js"></script>

    	<script type="text/javascript" src="./tutorial_files/saved_resource"></script>

    

<!-- Yandex.Metrika counter -->
<script type="text/javascript">
(function (d, w, c) {
    (w[c] = w[c] || []).push(function() {
        try {
            w.yaCounter24049213 = new Ya.Metrika({id:24049213,
                    webvisor:true,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true});
        } catch(e) { }
    });

    var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
    s.type = "text/javascript";
    s.async = true;
    s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

    if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
    } else { f(); }
})(document, window, "yandex_metrika_callbacks");
</script>
<noscript>&lt;div&gt;&lt;img src="//mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" /&gt;&lt;/div&gt;</noscript>
<!-- /Yandex.Metrika counter -->



<!-- adriver counter //-->
<span style="position:absolute;left:-9999px;">
  <img src="./tutorial_files/rle.cgi" width="1" height="1" alt="" style="display: none !important;">
</span>
<!-- adriver counter end //-->


    

    <!-- Хабр не резиновый! -->
  

<div id="tiptip_holder" style="max-width:auto;"><div id="tiptip_arrow"><div id="tiptip_arrow_inner"></div></div><div id="tiptip_content"></div></div><div id="AutocompleteContainter_c520e" style="position: absolute; z-index: 9999; top: 0px; left: 0px;"><div class="autocomplete-w1"><div class="autocomplete" id="Autocomplete_c520e" style="display: none; width: 300px; max-height: 400px;"></div></div></div><div id="AutocompleteContainter_91b56" style="position: absolute; z-index: 9999; top: 2px; left: 0px;"><div class="autocomplete-w1"><div class="autocomplete" id="Autocomplete_91b56" style="display: none; width: 300px; max-height: 400px;"></div></div></div><div id="xpanel"><a href="http://habrahabr.ru/post/243471/#refresh" class="refresh"></a><a href="http://habrahabr.ru/post/243471/#prev_new" class="prev_new" title="По клику (горячая клавиша - k) переходит к предыдущему непрочитанному комментарию." style="display: none;">↑</a><a href="http://habrahabr.ru/post/243471/#new" class="new" title="Количество новых комментариев. По клику (горячая клавиша - f) переходит к первому непрочитанному комментарию." style="display: none;">0</a><a href="http://habrahabr.ru/post/243471/#next_new" class="next_new" title="По клику (горячая клавиша - j) переходит к следующему непрочитанному комментарию." style="display: none;">↓</a></div><script id="hiddenlpsubmitdiv" style="display: none;"></script><script>try{for(var lastpass_iter=0; lastpass_iter < document.forms.length; lastpass_iter++){ var lastpass_f = document.forms[lastpass_iter]; if(typeof(lastpass_f.lpsubmitorig2)=="undefined"){ lastpass_f.lpsubmitorig2 = lastpass_f.submit; if (typeof(lastpass_f.lpsubmitorig2)=='object'){ console.error('LastPass: Skipping form because submit is not a function!');continue;}lastpass_f.submit = function(){ var form=this; var customEvent = document.createEvent("Event"); customEvent.initEvent("lpCustomEvent", true, true); var d = document.getElementById("hiddenlpsubmitdiv"); if (d) {for(var i = 0; i < document.forms.length; i++){ if(document.forms[i]==form){ if (typeof(d.innerText) != 'undefined') { d.innerText=i; } else { d.textContent=i; } } } d.dispatchEvent(customEvent); }form.lpsubmitorig2(); } } }}catch(e){}</script></body></html>